const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HeroSection-voGqaZLM.js","assets/vendor-C35Cq8M9.js","assets/MissionSection-oZU1c61q.js","assets/ServicesSection-B7qEDQws.js"])))=>i.map(i=>d[i]);
import{r as Fd,a as $d,g as nl,b as p,u as il,c as ws,L as Qt,R as qi,d as Zd,e as Hd,f as Ud,h as ut,B as qd}from"./vendor-C35Cq8M9.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();var Ma={exports:{}},ii={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo;function Wd(){if(yo)return ii;yo=1;var s=Fd(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,b){var x,_={},S=null,y=null;b!==void 0&&(S=""+b),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(y=g.ref);for(x in g)o.call(g,x)&&!u.hasOwnProperty(x)&&(_[x]=g[x]);if(f&&f.defaultProps)for(x in g=f.defaultProps,g)_[x]===void 0&&(_[x]=g[x]);return{$$typeof:i,type:f,key:S,ref:y,props:_,_owner:c.current}}return ii.Fragment=a,ii.jsx=h,ii.jsxs=h,ii}var bo;function Vd(){return bo||(bo=1,Ma.exports=Wd()),Ma.exports}var e=Vd(),zi={},wo;function Gd(){if(wo)return zi;wo=1;var s=$d();return zi.createRoot=s.createRoot,zi.hydrateRoot=s.hydrateRoot,zi}var Jd=Gd();const Yd=nl(Jd),Kd="modulepreload",Xd=function(s){return"/"+s},jo={},hi=function(i,a,o){let c=Promise.resolve();if(a&&a.length>0){let h=function(b){return Promise.all(b.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));c=h(a.map(b=>{if(b=Xd(b),b in jo)return;jo[b]=!0;const x=b.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${_}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":Kd,x||(S.as="script"),S.crossOrigin="",S.href=b,g&&S.setAttribute("nonce",g),document.head.appendChild(S),x)return new Promise((y,j)=>{S.addEventListener("load",y),S.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${b}`)))})}))}function u(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return c.then(h=>{for(const f of h||[])f.status==="rejected"&&u(f.reason);return i().catch(u)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(s,i)=>{const a=p.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:f="",children:g,...b},x)=>p.createElement("svg",{ref:x,...Qd,width:c,height:c,stroke:o,strokeWidth:h?Number(u)*24/Number(c):u,className:["lucide",`lucide-${eu(s)}`,f].join(" "),...b},[...i.map(([_,S])=>p.createElement(_,S)),...Array.isArray(g)?g:[g]]));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ye("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=ye("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=ye("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ye("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ye("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ye("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ye("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ye("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=ye("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=ye("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=ye("WashingMachine",[["path",{d:"M3 6h3",key:"155dbl"}],["path",{d:"M17 6h.01",key:"e2y6kg"}],["rect",{width:"18",height:"20",x:"3",y:"2",rx:"2",key:"od3kk9"}],["circle",{cx:"12",cy:"13",r:"5",key:"nlbqau"}],["path",{d:"M12 18a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 1 0-5",key:"17lach"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),xu=()=>{const[s,i]=p.useState(null),[a,o]=p.useState(!1);p.useEffect(()=>{const u=h=>{console.log("✅ beforeinstallprompt fired"),h.preventDefault(),i(h),o(!0)};return window.addEventListener("beforeinstallprompt",u),()=>{window.removeEventListener("beforeinstallprompt",u)}},[]);const c=async()=>{if(!s)return;s.prompt();const{outcome:u}=await s.userChoice;console.log(u==="accepted"?"✅ User accepted the install":"❌ User dismissed the install"),i(null),o(!1)};return p.useEffect(()=>{/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase())&&o(!1)},[]),a?e.jsx("button",{onClick:c,className:"fixed bottom-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-xl shadow-lg z-50",children:"📲 Install App"}):null};function di({searchQuery:s,onSearchChange:i,cartItemCount:a,onCartClick:o}){const[c,u]=p.useState(!1),h=il(),[f,g]=p.useState(!1);ws(),p.useEffect(()=>{g(!!localStorage.getItem("token"))},[h]);const b=()=>{u(!1)},x=()=>{localStorage.removeItem("token"),g(!1),window.location.href="/"},_=[{to:"/",label:"Home"},{to:"/about",label:"About"},{to:"/contact",label:"Contact"},{to:"/orders",label:"Order"}];return e.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(Qt,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(fi,{className:"w-6 h-6 md:w-8 md:h-8 text-blue-600"}),e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"DhobiXpress"})]}),e.jsx("div",{className:"hidden md:flex flex-1 max-w-md ml-8",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by product or Dhobi name...",value:s,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[_.map(S=>e.jsx(Qt,{to:S.to,className:"text-slate-700 hover:text-blue-600",children:S.label},S.to)),f?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{to:"/customerdashboard",className:"text-slate-700 hover:text-blue-600",children:"Dashboard"}),e.jsx("button",{onClick:x,className:"text-slate-700 hover:text-red-600",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Qt,{to:"/signin",className:"flex items-center text-slate-700 hover:text-blue-600",children:[e.jsx(hr,{className:"w-4 h-4 mr-1"})," Sign In"]}),e.jsxs(Qt,{to:"/signup",className:"flex items-center text-slate-700 hover:text-blue-600",children:[e.jsx(gu,{className:"w-4 h-4 mr-1"})," Sign Up"]})]}),e.jsxs("button",{onClick:o,className:"relative p-2 text-gray-700 hover:text-blue-600",children:[e.jsx(So,{className:"w-5 h-5"}),a&&a>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:a})]}),e.jsx(xu,{})]}),e.jsx("button",{onClick:()=>u(!c),className:"md:hidden text-gray-800","aria-label":"Toggle menu","aria-expanded":c,children:c?e.jsx(es,{className:"h-6 w-6"}):e.jsx(ll,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"md:hidden mt-2 mb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:s,onChange:S=>i(S.target.value),placeholder:"Search services or Dhobi...",className:"border rounded px-3 py-2 w-full"})]})}),c&&e.jsx("div",{className:"md:hidden bg-white p-4 shadow-lg rounded-md",children:e.jsxs("ul",{className:"space-y-4",children:[_.map(S=>e.jsx("li",{children:e.jsx(Qt,{to:S.to,onClick:b,className:"block text-slate-700 hover:text-blue-600",children:S.label})},S.to)),f?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(Qt,{to:"/customerdashboard",onClick:b,className:"block text-slate-700 hover:text-blue-600",children:"Dashboard"})}),e.jsx("li",{children:e.jsx("button",{onClick:x,className:"block text-slate-700 hover:text-red-600",children:"Logout"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(Qt,{to:"/signin",onClick:b,className:"block text-slate-700 hover:text-blue-600",children:"Sign In"})}),e.jsx("li",{children:e.jsx(Qt,{to:"/signup",onClick:b,className:"block text-slate-700 hover:text-blue-600",children:"Sign Up"})})]}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{o&&o(),u(!1)},className:"relative flex items-center text-slate-700 hover:text-blue-600",children:[e.jsx(So,{className:"w-5 h-5 mr-1"})," Cart",a&&a>0&&e.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:a})]})}),e.jsx("li",{children:e.jsx("a",{href:"/app-debug.apk",download:!0,target:"_blank",rel:"noopener noreferrer",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"📲 Download Android App"})})]})})]})})}let vu={data:""},yu=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||vu,bu=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wu=/\/\*[^]*?\*\/|  +/g,Po=/\n+/g,Es=(s,i)=>{let a="",o="",c="";for(let u in s){let h=s[u];u[0]=="@"?u[1]=="i"?a=u+" "+h+";":o+=u[1]=="f"?Es(h,u):u+"{"+Es(h,u[1]=="k"?"":i)+"}":typeof h=="object"?o+=Es(h,i?i.replace(/([^,])+/g,f=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,f):f?f+" "+g:g)):u):h!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=Es.p?Es.p(u,h):u+":"+h+";")}return a+(i&&c?i+"{"+c+"}":c)+o},vs={},fl=s=>{if(typeof s=="object"){let i="";for(let a in s)i+=a+fl(s[a]);return i}return s},ju=(s,i,a,o,c)=>{let u=fl(s),h=vs[u]||(vs[u]=(g=>{let b=0,x=11;for(;b<g.length;)x=101*x+g.charCodeAt(b++)>>>0;return"go"+x})(u));if(!vs[h]){let g=u!==s?s:(b=>{let x,_,S=[{}];for(;x=bu.exec(b.replace(wu,""));)x[4]?S.shift():x[3]?(_=x[3].replace(Po," ").trim(),S.unshift(S[0][_]=S[0][_]||{})):S[0][x[1]]=x[2].replace(Po," ").trim();return S[0]})(s);vs[h]=Es(c?{["@keyframes "+h]:g}:g,a?"":"."+h)}let f=a&&vs.g?vs.g:null;return a&&(vs.g=vs[h]),((g,b,x,_)=>{_?b.data=b.data.replace(_,g):b.data.indexOf(g)===-1&&(b.data=x?g+b.data:b.data+g)})(vs[h],i,o,f),h},_u=(s,i,a)=>s.reduce((o,c,u)=>{let h=i[u];if(h&&h.call){let f=h(a),g=f&&f.props&&f.props.className||/^go/.test(f)&&f;h=g?"."+g:f&&typeof f=="object"?f.props?"":Es(f,""):f===!1?"":f}return o+c+(h??"")},"");function ia(s){let i=this||{},a=s.call?s(i.p):s;return ju(a.unshift?a.raw?_u(a,[].slice.call(arguments,1),i.p):a.reduce((o,c)=>Object.assign(o,c&&c.call?c(i.p):c),{}):a,yu(i.target),i.g,i.o,i.k)}let pl,Va,Ga;ia.bind({g:1});let bs=ia.bind({k:1});function Nu(s,i,a,o){Es.p=i,pl=s,Va=a,Ga=o}function Bs(s,i){let a=this||{};return function(){let o=arguments;function c(u,h){let f=Object.assign({},u),g=f.className||c.className;a.p=Object.assign({theme:Va&&Va()},f),a.o=/ *go\d+/.test(g),f.className=ia.apply(a,o)+(g?" "+g:"");let b=s;return s[0]&&(b=f.as||s,delete f.as),Ga&&b[0]&&Ga(f),pl(b,f)}return c}}var Su=s=>typeof s=="function",Ja=(s,i)=>Su(s)?s(i):s,ku=(()=>{let s=0;return()=>(++s).toString()})(),Cu=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");s=!i||i.matches}return s}})(),Pu=20,gl=(s,i)=>{switch(i.type){case 0:return{...s,toasts:[i.toast,...s.toasts].slice(0,Pu)};case 1:return{...s,toasts:s.toasts.map(u=>u.id===i.toast.id?{...u,...i.toast}:u)};case 2:let{toast:a}=i;return gl(s,{type:s.toasts.find(u=>u.id===a.id)?1:0,toast:a});case 3:let{toastId:o}=i;return{...s,toasts:s.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return i.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(u=>u.id!==i.toastId)};case 5:return{...s,pausedAt:i.time};case 6:let c=i.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+c}))}}},Lu=[],Da={toasts:[],pausedAt:void 0},mr=s=>{Da=gl(Da,s),Lu.forEach(i=>{i(Da)})},Au=(s,i="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||ku()}),pi=s=>(i,a)=>{let o=Au(i,s,a);return mr({type:2,toast:o}),o.id},ht=(s,i)=>pi("blank")(s,i);ht.error=pi("error");ht.success=pi("success");ht.loading=pi("loading");ht.custom=pi("custom");ht.dismiss=s=>{mr({type:3,toastId:s})};ht.remove=s=>mr({type:4,toastId:s});ht.promise=(s,i,a)=>{let o=ht.loading(i.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(c=>{let u=i.success?Ja(i.success,c):void 0;return u?ht.success(u,{id:o,...a,...a==null?void 0:a.success}):ht.dismiss(o),c}).catch(c=>{let u=i.error?Ja(i.error,c):void 0;u?ht.error(u,{id:o,...a,...a==null?void 0:a.error}):ht.dismiss(o)}),s};var Tu=bs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Eu=bs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ou=bs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Mu=Bs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Tu} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Eu} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ou} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Iu=bs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Du=Bs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Iu} 1s linear infinite;
`,Bu=bs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,zu=bs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ru=Bs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bu} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${zu} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Fu=Bs("div")`
  position: absolute;
`,$u=Bs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Zu=bs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hu=Bs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Zu} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Uu=({toast:s})=>{let{icon:i,type:a,iconTheme:o}=s;return i!==void 0?typeof i=="string"?p.createElement(Hu,null,i):i:a==="blank"?null:p.createElement($u,null,p.createElement(Du,{...o}),a!=="loading"&&p.createElement(Fu,null,a==="error"?p.createElement(Mu,{...o}):p.createElement(Ru,{...o})))},qu=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Wu=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Vu="0%{opacity:0;} 100%{opacity:1;}",Gu="0%{opacity:1;} 100%{opacity:0;}",Ju=Bs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Yu=Bs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ku=(s,i)=>{let a=s.includes("top")?1:-1,[o,c]=Cu()?[Vu,Gu]:[qu(a),Wu(a)];return{animation:i?`${bs(o)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bs(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};p.memo(({toast:s,position:i,style:a,children:o})=>{let c=s.height?Ku(s.position||i||"top-center",s.visible):{opacity:0},u=p.createElement(Uu,{toast:s}),h=p.createElement(Yu,{...s.ariaProps},Ja(s.message,s));return p.createElement(Ju,{className:s.className,style:{...c,...a,...s.style}},typeof o=="function"?o({icon:u,message:h}):p.createElement(p.Fragment,null,u,h))});Nu(p.createElement);ia`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;function Xu({service:s,onAddToCart:i}){var N;const[a,o]=p.useState(0),[c,u]=p.useState([]),[h,f]=p.useState(!1),g=!!localStorage.getItem("token"),b=v=>{if(!g){ht.error("Please log in as a customer to add products");return}const P=Math.max(0,a+v);o(P),P===0&&u([])},x=v=>{u(P=>P.includes(v)?P.filter(E=>E!==v):[...P,v])},_=()=>c.reduce((P,E)=>{var F;const z=(F=s.options)==null?void 0:F.find(A=>A.id===E);return P+((z==null?void 0:z.price)||0)},0)*a,S=()=>{if(!g){ht.error("Please log in to add items to cart");return}a>0&&c.length>0&&(i(s,a,c),u([]),f(!1))},y=a>0&&c.length>0,j=s.options&&s.options.length>0;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[e.jsx("div",{className:"w-full h-48 overflow-hidden rounded-t-lg",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2",children:s.category}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Washerman: ",(N=s.washerman)==null?void 0:N.name]})]}),j&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>f(!h),className:"flex items-center justify-between w-full p-2 md:p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700",children:h?"Hide Services":"Select Services *"}),h?e.jsx(dr,{className:"w-4 h-4 text-gray-500"}):e.jsx(cr,{className:"w-4 h-4 text-gray-500"})]}),h&&e.jsx("div",{className:"mt-3 space-y-2",children:s.options.map(v=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:c.includes(v.id),onChange:()=>x(v.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:!g}),e.jsxs("div",{className:"flex-1 flex justify-between",children:[e.jsx("span",{className:"text-xs md:text-sm text-gray-700",children:v.name}),e.jsxs("span",{className:"text-xs md:text-sm font-medium text-blue-600",children:["₹",v.price]})]})]},v.id))}),a>0&&c.length===0&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-xs text-red-600",children:"Please select at least one service to continue"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[e.jsx("button",{onClick:()=>b(-1),disabled:a===0,className:"p-1.5 md:p-2 rounded-full border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:e.jsx(cl,{className:"w-3 h-3 md:w-4 md:h-4"})}),e.jsx("span",{className:"text-base md:text-lg font-semibold w-6 md:w-8 text-center",children:a}),e.jsx("button",{onClick:()=>b(1),className:"p-1.5 md:p-2 rounded-full border border-gray-300 hover:bg-gray-50 transition-colors",children:e.jsx(Ms,{className:"w-3 h-3 md:w-4 md:h-4"})})]}),a>0&&_()>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-base md:text-lg font-bold text-blue-600",children:["₹",_()]})]})]}),a>0&&e.jsx("button",{onClick:S,disabled:!y,className:`w-full mt-4 py-2 px-4 rounded-lg font-medium text-sm md:text-base transition-colors ${y?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:!y&&c.length===0?"Select Services to Add to Cart":"Add to Cart"})]})]})}function xl(s,i){return function(){return s.apply(i,arguments)}}const{toString:Qu}=Object.prototype,{getPrototypeOf:fr}=Object,{iterator:aa,toStringTag:vl}=Symbol,ra=(s=>i=>{const a=Qu.call(i);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),ts=s=>(s=s.toLowerCase(),i=>ra(i)===s),oa=s=>i=>typeof i===s,{isArray:Fn}=Array,ui=oa("undefined");function eh(s){return s!==null&&!ui(s)&&s.constructor!==null&&!ui(s.constructor)&&Mt(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const yl=ts("ArrayBuffer");function th(s){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(s):i=s&&s.buffer&&yl(s.buffer),i}const sh=oa("string"),Mt=oa("function"),bl=oa("number"),la=s=>s!==null&&typeof s=="object",nh=s=>s===!0||s===!1,Zi=s=>{if(ra(s)!=="object")return!1;const i=fr(s);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(vl in s)&&!(aa in s)},ih=ts("Date"),ah=ts("File"),rh=ts("Blob"),oh=ts("FileList"),lh=s=>la(s)&&Mt(s.pipe),ch=s=>{let i;return s&&(typeof FormData=="function"&&s instanceof FormData||Mt(s.append)&&((i=ra(s))==="formdata"||i==="object"&&Mt(s.toString)&&s.toString()==="[object FormData]"))},dh=ts("URLSearchParams"),[uh,hh,mh,fh]=["ReadableStream","Request","Response","Headers"].map(ts),ph=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gi(s,i,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let o,c;if(typeof s!="object"&&(s=[s]),Fn(s))for(o=0,c=s.length;o<c;o++)i.call(null,s[o],o,s);else{const u=a?Object.getOwnPropertyNames(s):Object.keys(s),h=u.length;let f;for(o=0;o<h;o++)f=u[o],i.call(null,s[f],f,s)}}function wl(s,i){i=i.toLowerCase();const a=Object.keys(s);let o=a.length,c;for(;o-- >0;)if(c=a[o],i===c.toLowerCase())return c;return null}const Xs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jl=s=>!ui(s)&&s!==Xs;function Ya(){const{caseless:s}=jl(this)&&this||{},i={},a=(o,c)=>{const u=s&&wl(i,c)||c;Zi(i[u])&&Zi(o)?i[u]=Ya(i[u],o):Zi(o)?i[u]=Ya({},o):Fn(o)?i[u]=o.slice():i[u]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&gi(arguments[o],a);return i}const gh=(s,i,a,{allOwnKeys:o}={})=>(gi(i,(c,u)=>{a&&Mt(c)?s[u]=xl(c,a):s[u]=c},{allOwnKeys:o}),s),xh=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),vh=(s,i,a,o)=>{s.prototype=Object.create(i.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:i.prototype}),a&&Object.assign(s.prototype,a)},yh=(s,i,a,o)=>{let c,u,h;const f={};if(i=i||{},s==null)return i;do{for(c=Object.getOwnPropertyNames(s),u=c.length;u-- >0;)h=c[u],(!o||o(h,s,i))&&!f[h]&&(i[h]=s[h],f[h]=!0);s=a!==!1&&fr(s)}while(s&&(!a||a(s,i))&&s!==Object.prototype);return i},bh=(s,i,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=i.length;const o=s.indexOf(i,a);return o!==-1&&o===a},wh=s=>{if(!s)return null;if(Fn(s))return s;let i=s.length;if(!bl(i))return null;const a=new Array(i);for(;i-- >0;)a[i]=s[i];return a},jh=(s=>i=>s&&i instanceof s)(typeof Uint8Array<"u"&&fr(Uint8Array)),_h=(s,i)=>{const o=(s&&s[aa]).call(s);let c;for(;(c=o.next())&&!c.done;){const u=c.value;i.call(s,u[0],u[1])}},Nh=(s,i)=>{let a;const o=[];for(;(a=s.exec(i))!==null;)o.push(a);return o},Sh=ts("HTMLFormElement"),kh=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,o,c){return o.toUpperCase()+c}),Lo=(({hasOwnProperty:s})=>(i,a)=>s.call(i,a))(Object.prototype),Ch=ts("RegExp"),_l=(s,i)=>{const a=Object.getOwnPropertyDescriptors(s),o={};gi(a,(c,u)=>{let h;(h=i(c,u,s))!==!1&&(o[u]=h||c)}),Object.defineProperties(s,o)},Ph=s=>{_l(s,(i,a)=>{if(Mt(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const o=s[a];if(Mt(o)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Lh=(s,i)=>{const a={},o=c=>{c.forEach(u=>{a[u]=!0})};return Fn(s)?o(s):o(String(s).split(i)),a},Ah=()=>{},Th=(s,i)=>s!=null&&Number.isFinite(s=+s)?s:i;function Eh(s){return!!(s&&Mt(s.append)&&s[vl]==="FormData"&&s[aa])}const Oh=s=>{const i=new Array(10),a=(o,c)=>{if(la(o)){if(i.indexOf(o)>=0)return;if(!("toJSON"in o)){i[c]=o;const u=Fn(o)?[]:{};return gi(o,(h,f)=>{const g=a(h,c+1);!ui(g)&&(u[f]=g)}),i[c]=void 0,u}}return o};return a(s,0)},Mh=ts("AsyncFunction"),Ih=s=>s&&(la(s)||Mt(s))&&Mt(s.then)&&Mt(s.catch),Nl=((s,i)=>s?setImmediate:i?((a,o)=>(Xs.addEventListener("message",({source:c,data:u})=>{c===Xs&&u===a&&o.length&&o.shift()()},!1),c=>{o.push(c),Xs.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Mt(Xs.postMessage)),Dh=typeof queueMicrotask<"u"?queueMicrotask.bind(Xs):typeof process<"u"&&process.nextTick||Nl,Bh=s=>s!=null&&Mt(s[aa]),M={isArray:Fn,isArrayBuffer:yl,isBuffer:eh,isFormData:ch,isArrayBufferView:th,isString:sh,isNumber:bl,isBoolean:nh,isObject:la,isPlainObject:Zi,isReadableStream:uh,isRequest:hh,isResponse:mh,isHeaders:fh,isUndefined:ui,isDate:ih,isFile:ah,isBlob:rh,isRegExp:Ch,isFunction:Mt,isStream:lh,isURLSearchParams:dh,isTypedArray:jh,isFileList:oh,forEach:gi,merge:Ya,extend:gh,trim:ph,stripBOM:xh,inherits:vh,toFlatObject:yh,kindOf:ra,kindOfTest:ts,endsWith:bh,toArray:wh,forEachEntry:_h,matchAll:Nh,isHTMLForm:Sh,hasOwnProperty:Lo,hasOwnProp:Lo,reduceDescriptors:_l,freezeMethods:Ph,toObjectSet:Lh,toCamelCase:kh,noop:Ah,toFiniteNumber:Th,findKey:wl,global:Xs,isContextDefined:jl,isSpecCompliantForm:Eh,toJSONObject:Oh,isAsyncFn:Mh,isThenable:Ih,setImmediate:Nl,asap:Dh,isIterable:Bh};function ke(s,i,a,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",i&&(this.code=i),a&&(this.config=a),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}M.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const Sl=ke.prototype,kl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{kl[s]={value:s}});Object.defineProperties(ke,kl);Object.defineProperty(Sl,"isAxiosError",{value:!0});ke.from=(s,i,a,o,c,u)=>{const h=Object.create(Sl);return M.toFlatObject(s,h,function(g){return g!==Error.prototype},f=>f!=="isAxiosError"),ke.call(h,s.message,i,a,o,c),h.cause=s,h.name=s.name,u&&Object.assign(h,u),h};const zh=null;function Ka(s){return M.isPlainObject(s)||M.isArray(s)}function Cl(s){return M.endsWith(s,"[]")?s.slice(0,-2):s}function Ao(s,i,a){return s?s.concat(i).map(function(c,u){return c=Cl(c),!a&&u?"["+c+"]":c}).join(a?".":""):i}function Rh(s){return M.isArray(s)&&!s.some(Ka)}const Fh=M.toFlatObject(M,{},null,function(i){return/^is[A-Z]/.test(i)});function ca(s,i,a){if(!M.isObject(s))throw new TypeError("target must be an object");i=i||new FormData,a=M.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,v){return!M.isUndefined(v[N])});const o=a.metaTokens,c=a.visitor||x,u=a.dots,h=a.indexes,g=(a.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(i);if(!M.isFunction(c))throw new TypeError("visitor must be a function");function b(j){if(j===null)return"";if(M.isDate(j))return j.toISOString();if(M.isBoolean(j))return j.toString();if(!g&&M.isBlob(j))throw new ke("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(j)||M.isTypedArray(j)?g&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function x(j,N,v){let P=j;if(j&&!v&&typeof j=="object"){if(M.endsWith(N,"{}"))N=o?N:N.slice(0,-2),j=JSON.stringify(j);else if(M.isArray(j)&&Rh(j)||(M.isFileList(j)||M.endsWith(N,"[]"))&&(P=M.toArray(j)))return N=Cl(N),P.forEach(function(z,F){!(M.isUndefined(z)||z===null)&&i.append(h===!0?Ao([N],F,u):h===null?N:N+"[]",b(z))}),!1}return Ka(j)?!0:(i.append(Ao(v,N,u),b(j)),!1)}const _=[],S=Object.assign(Fh,{defaultVisitor:x,convertValue:b,isVisitable:Ka});function y(j,N){if(!M.isUndefined(j)){if(_.indexOf(j)!==-1)throw Error("Circular reference detected in "+N.join("."));_.push(j),M.forEach(j,function(P,E){(!(M.isUndefined(P)||P===null)&&c.call(i,P,M.isString(E)?E.trim():E,N,S))===!0&&y(P,N?N.concat(E):[E])}),_.pop()}}if(!M.isObject(s))throw new TypeError("data must be an object");return y(s),i}function To(s){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return i[o]})}function pr(s,i){this._pairs=[],s&&ca(s,this,i)}const Pl=pr.prototype;Pl.append=function(i,a){this._pairs.push([i,a])};Pl.toString=function(i){const a=i?function(o){return i.call(this,o,To)}:To;return this._pairs.map(function(c){return a(c[0])+"="+a(c[1])},"").join("&")};function $h(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ll(s,i,a){if(!i)return s;const o=a&&a.encode||$h;M.isFunction(a)&&(a={serialize:a});const c=a&&a.serialize;let u;if(c?u=c(i,a):u=M.isURLSearchParams(i)?i.toString():new pr(i,a).toString(o),u){const h=s.indexOf("#");h!==-1&&(s=s.slice(0,h)),s+=(s.indexOf("?")===-1?"?":"&")+u}return s}class Eo{constructor(){this.handlers=[]}use(i,a,o){return this.handlers.push({fulfilled:i,rejected:a,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){M.forEach(this.handlers,function(o){o!==null&&i(o)})}}const Al={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zh=typeof URLSearchParams<"u"?URLSearchParams:pr,Hh=typeof FormData<"u"?FormData:null,Uh=typeof Blob<"u"?Blob:null,qh={isBrowser:!0,classes:{URLSearchParams:Zh,FormData:Hh,Blob:Uh},protocols:["http","https","file","blob","url","data"]},gr=typeof window<"u"&&typeof document<"u",Xa=typeof navigator=="object"&&navigator||void 0,Wh=gr&&(!Xa||["ReactNative","NativeScript","NS"].indexOf(Xa.product)<0),Vh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gh=gr&&window.location.href||"http://localhost",Jh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gr,hasStandardBrowserEnv:Wh,hasStandardBrowserWebWorkerEnv:Vh,navigator:Xa,origin:Gh},Symbol.toStringTag,{value:"Module"})),wt={...Jh,...qh};function Yh(s,i){return ca(s,new wt.classes.URLSearchParams,Object.assign({visitor:function(a,o,c,u){return wt.isNode&&M.isBuffer(a)?(this.append(o,a.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},i))}function Kh(s){return M.matchAll(/\w+|\[(\w*)]/g,s).map(i=>i[0]==="[]"?"":i[1]||i[0])}function Xh(s){const i={},a=Object.keys(s);let o;const c=a.length;let u;for(o=0;o<c;o++)u=a[o],i[u]=s[u];return i}function Tl(s){function i(a,o,c,u){let h=a[u++];if(h==="__proto__")return!0;const f=Number.isFinite(+h),g=u>=a.length;return h=!h&&M.isArray(c)?c.length:h,g?(M.hasOwnProp(c,h)?c[h]=[c[h],o]:c[h]=o,!f):((!c[h]||!M.isObject(c[h]))&&(c[h]=[]),i(a,o,c[h],u)&&M.isArray(c[h])&&(c[h]=Xh(c[h])),!f)}if(M.isFormData(s)&&M.isFunction(s.entries)){const a={};return M.forEachEntry(s,(o,c)=>{i(Kh(o),c,a,0)}),a}return null}function Qh(s,i,a){if(M.isString(s))try{return(i||JSON.parse)(s),M.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(a||JSON.stringify)(s)}const xi={transitional:Al,adapter:["xhr","http","fetch"],transformRequest:[function(i,a){const o=a.getContentType()||"",c=o.indexOf("application/json")>-1,u=M.isObject(i);if(u&&M.isHTMLForm(i)&&(i=new FormData(i)),M.isFormData(i))return c?JSON.stringify(Tl(i)):i;if(M.isArrayBuffer(i)||M.isBuffer(i)||M.isStream(i)||M.isFile(i)||M.isBlob(i)||M.isReadableStream(i))return i;if(M.isArrayBufferView(i))return i.buffer;if(M.isURLSearchParams(i))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let f;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Yh(i,this.formSerializer).toString();if((f=M.isFileList(i))||o.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return ca(f?{"files[]":i}:i,g&&new g,this.formSerializer)}}return u||c?(a.setContentType("application/json",!1),Qh(i)):i}],transformResponse:[function(i){const a=this.transitional||xi.transitional,o=a&&a.forcedJSONParsing,c=this.responseType==="json";if(M.isResponse(i)||M.isReadableStream(i))return i;if(i&&M.isString(i)&&(o&&!this.responseType||c)){const h=!(a&&a.silentJSONParsing)&&c;try{return JSON.parse(i)}catch(f){if(h)throw f.name==="SyntaxError"?ke.from(f,ke.ERR_BAD_RESPONSE,this,null,this.response):f}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wt.classes.FormData,Blob:wt.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],s=>{xi.headers[s]={}});const em=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tm=s=>{const i={};let a,o,c;return s&&s.split(`
`).forEach(function(h){c=h.indexOf(":"),a=h.substring(0,c).trim().toLowerCase(),o=h.substring(c+1).trim(),!(!a||i[a]&&em[a])&&(a==="set-cookie"?i[a]?i[a].push(o):i[a]=[o]:i[a]=i[a]?i[a]+", "+o:o)}),i},Oo=Symbol("internals");function ai(s){return s&&String(s).trim().toLowerCase()}function Hi(s){return s===!1||s==null?s:M.isArray(s)?s.map(Hi):String(s)}function sm(s){const i=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=a.exec(s);)i[o[1]]=o[2];return i}const nm=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Ba(s,i,a,o,c){if(M.isFunction(o))return o.call(this,i,a);if(c&&(i=a),!!M.isString(i)){if(M.isString(o))return i.indexOf(o)!==-1;if(M.isRegExp(o))return o.test(i)}}function im(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,a,o)=>a.toUpperCase()+o)}function am(s,i){const a=M.toCamelCase(" "+i);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+a,{value:function(c,u,h){return this[o].call(this,i,c,u,h)},configurable:!0})})}let It=class{constructor(i){i&&this.set(i)}set(i,a,o){const c=this;function u(f,g,b){const x=ai(g);if(!x)throw new Error("header name must be a non-empty string");const _=M.findKey(c,x);(!_||c[_]===void 0||b===!0||b===void 0&&c[_]!==!1)&&(c[_||g]=Hi(f))}const h=(f,g)=>M.forEach(f,(b,x)=>u(b,x,g));if(M.isPlainObject(i)||i instanceof this.constructor)h(i,a);else if(M.isString(i)&&(i=i.trim())&&!nm(i))h(tm(i),a);else if(M.isObject(i)&&M.isIterable(i)){let f={},g,b;for(const x of i){if(!M.isArray(x))throw TypeError("Object iterator must return a key-value pair");f[b=x[0]]=(g=f[b])?M.isArray(g)?[...g,x[1]]:[g,x[1]]:x[1]}h(f,a)}else i!=null&&u(a,i,o);return this}get(i,a){if(i=ai(i),i){const o=M.findKey(this,i);if(o){const c=this[o];if(!a)return c;if(a===!0)return sm(c);if(M.isFunction(a))return a.call(this,c,o);if(M.isRegExp(a))return a.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,a){if(i=ai(i),i){const o=M.findKey(this,i);return!!(o&&this[o]!==void 0&&(!a||Ba(this,this[o],o,a)))}return!1}delete(i,a){const o=this;let c=!1;function u(h){if(h=ai(h),h){const f=M.findKey(o,h);f&&(!a||Ba(o,o[f],f,a))&&(delete o[f],c=!0)}}return M.isArray(i)?i.forEach(u):u(i),c}clear(i){const a=Object.keys(this);let o=a.length,c=!1;for(;o--;){const u=a[o];(!i||Ba(this,this[u],u,i,!0))&&(delete this[u],c=!0)}return c}normalize(i){const a=this,o={};return M.forEach(this,(c,u)=>{const h=M.findKey(o,u);if(h){a[h]=Hi(c),delete a[u];return}const f=i?im(u):String(u).trim();f!==u&&delete a[u],a[f]=Hi(c),o[f]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const a=Object.create(null);return M.forEach(this,(o,c)=>{o!=null&&o!==!1&&(a[c]=i&&M.isArray(o)?o.join(", "):o)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,a])=>i+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...a){const o=new this(i);return a.forEach(c=>o.set(c)),o}static accessor(i){const o=(this[Oo]=this[Oo]={accessors:{}}).accessors,c=this.prototype;function u(h){const f=ai(h);o[f]||(am(c,h),o[f]=!0)}return M.isArray(i)?i.forEach(u):u(i),this}};It.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(It.prototype,({value:s},i)=>{let a=i[0].toUpperCase()+i.slice(1);return{get:()=>s,set(o){this[a]=o}}});M.freezeMethods(It);function za(s,i){const a=this||xi,o=i||a,c=It.from(o.headers);let u=o.data;return M.forEach(s,function(f){u=f.call(a,u,c.normalize(),i?i.status:void 0)}),c.normalize(),u}function El(s){return!!(s&&s.__CANCEL__)}function $n(s,i,a){ke.call(this,s??"canceled",ke.ERR_CANCELED,i,a),this.name="CanceledError"}M.inherits($n,ke,{__CANCEL__:!0});function Ol(s,i,a){const o=a.config.validateStatus;!a.status||!o||o(a.status)?s(a):i(new ke("Request failed with status code "+a.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function rm(s){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return i&&i[1]||""}function om(s,i){s=s||10;const a=new Array(s),o=new Array(s);let c=0,u=0,h;return i=i!==void 0?i:1e3,function(g){const b=Date.now(),x=o[u];h||(h=b),a[c]=g,o[c]=b;let _=u,S=0;for(;_!==c;)S+=a[_++],_=_%s;if(c=(c+1)%s,c===u&&(u=(u+1)%s),b-h<i)return;const y=x&&b-x;return y?Math.round(S*1e3/y):void 0}}function lm(s,i){let a=0,o=1e3/i,c,u;const h=(b,x=Date.now())=>{a=x,c=null,u&&(clearTimeout(u),u=null),s.apply(null,b)};return[(...b)=>{const x=Date.now(),_=x-a;_>=o?h(b,x):(c=b,u||(u=setTimeout(()=>{u=null,h(c)},o-_)))},()=>c&&h(c)]}const Wi=(s,i,a=3)=>{let o=0;const c=om(50,250);return lm(u=>{const h=u.loaded,f=u.lengthComputable?u.total:void 0,g=h-o,b=c(g),x=h<=f;o=h;const _={loaded:h,total:f,progress:f?h/f:void 0,bytes:g,rate:b||void 0,estimated:b&&f&&x?(f-h)/b:void 0,event:u,lengthComputable:f!=null,[i?"download":"upload"]:!0};s(_)},a)},Mo=(s,i)=>{const a=s!=null;return[o=>i[0]({lengthComputable:a,total:s,loaded:o}),i[1]]},Io=s=>(...i)=>M.asap(()=>s(...i)),cm=wt.hasStandardBrowserEnv?((s,i)=>a=>(a=new URL(a,wt.origin),s.protocol===a.protocol&&s.host===a.host&&(i||s.port===a.port)))(new URL(wt.origin),wt.navigator&&/(msie|trident)/i.test(wt.navigator.userAgent)):()=>!0,dm=wt.hasStandardBrowserEnv?{write(s,i,a,o,c,u){const h=[s+"="+encodeURIComponent(i)];M.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),M.isString(o)&&h.push("path="+o),M.isString(c)&&h.push("domain="+c),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read(s){const i=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function um(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function hm(s,i){return i?s.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):s}function Ml(s,i,a){let o=!um(i);return s&&(o||a==!1)?hm(s,i):i}const Do=s=>s instanceof It?{...s}:s;function tn(s,i){i=i||{};const a={};function o(b,x,_,S){return M.isPlainObject(b)&&M.isPlainObject(x)?M.merge.call({caseless:S},b,x):M.isPlainObject(x)?M.merge({},x):M.isArray(x)?x.slice():x}function c(b,x,_,S){if(M.isUndefined(x)){if(!M.isUndefined(b))return o(void 0,b,_,S)}else return o(b,x,_,S)}function u(b,x){if(!M.isUndefined(x))return o(void 0,x)}function h(b,x){if(M.isUndefined(x)){if(!M.isUndefined(b))return o(void 0,b)}else return o(void 0,x)}function f(b,x,_){if(_ in i)return o(b,x);if(_ in s)return o(void 0,b)}const g={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:f,headers:(b,x,_)=>c(Do(b),Do(x),_,!0)};return M.forEach(Object.keys(Object.assign({},s,i)),function(x){const _=g[x]||c,S=_(s[x],i[x],x);M.isUndefined(S)&&_!==f||(a[x]=S)}),a}const Il=s=>{const i=tn({},s);let{data:a,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:u,headers:h,auth:f}=i;i.headers=h=It.from(h),i.url=Ll(Ml(i.baseURL,i.url,i.allowAbsoluteUrls),s.params,s.paramsSerializer),f&&h.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let g;if(M.isFormData(a)){if(wt.hasStandardBrowserEnv||wt.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((g=h.getContentType())!==!1){const[b,...x]=g?g.split(";").map(_=>_.trim()).filter(Boolean):[];h.setContentType([b||"multipart/form-data",...x].join("; "))}}if(wt.hasStandardBrowserEnv&&(o&&M.isFunction(o)&&(o=o(i)),o||o!==!1&&cm(i.url))){const b=c&&u&&dm.read(u);b&&h.set(c,b)}return i},mm=typeof XMLHttpRequest<"u",fm=mm&&function(s){return new Promise(function(a,o){const c=Il(s);let u=c.data;const h=It.from(c.headers).normalize();let{responseType:f,onUploadProgress:g,onDownloadProgress:b}=c,x,_,S,y,j;function N(){y&&y(),j&&j(),c.cancelToken&&c.cancelToken.unsubscribe(x),c.signal&&c.signal.removeEventListener("abort",x)}let v=new XMLHttpRequest;v.open(c.method.toUpperCase(),c.url,!0),v.timeout=c.timeout;function P(){if(!v)return;const z=It.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),A={data:!f||f==="text"||f==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:z,config:s,request:v};Ol(function(K){a(K),N()},function(K){o(K),N()},A),v=null}"onloadend"in v?v.onloadend=P:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(P)},v.onabort=function(){v&&(o(new ke("Request aborted",ke.ECONNABORTED,s,v)),v=null)},v.onerror=function(){o(new ke("Network Error",ke.ERR_NETWORK,s,v)),v=null},v.ontimeout=function(){let F=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const A=c.transitional||Al;c.timeoutErrorMessage&&(F=c.timeoutErrorMessage),o(new ke(F,A.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,s,v)),v=null},u===void 0&&h.setContentType(null),"setRequestHeader"in v&&M.forEach(h.toJSON(),function(F,A){v.setRequestHeader(A,F)}),M.isUndefined(c.withCredentials)||(v.withCredentials=!!c.withCredentials),f&&f!=="json"&&(v.responseType=c.responseType),b&&([S,j]=Wi(b,!0),v.addEventListener("progress",S)),g&&v.upload&&([_,y]=Wi(g),v.upload.addEventListener("progress",_),v.upload.addEventListener("loadend",y)),(c.cancelToken||c.signal)&&(x=z=>{v&&(o(!z||z.type?new $n(null,s,v):z),v.abort(),v=null)},c.cancelToken&&c.cancelToken.subscribe(x),c.signal&&(c.signal.aborted?x():c.signal.addEventListener("abort",x)));const E=rm(c.url);if(E&&wt.protocols.indexOf(E)===-1){o(new ke("Unsupported protocol "+E+":",ke.ERR_BAD_REQUEST,s));return}v.send(u||null)})},pm=(s,i)=>{const{length:a}=s=s?s.filter(Boolean):[];if(i||a){let o=new AbortController,c;const u=function(b){if(!c){c=!0,f();const x=b instanceof Error?b:this.reason;o.abort(x instanceof ke?x:new $n(x instanceof Error?x.message:x))}};let h=i&&setTimeout(()=>{h=null,u(new ke(`timeout ${i} of ms exceeded`,ke.ETIMEDOUT))},i);const f=()=>{s&&(h&&clearTimeout(h),h=null,s.forEach(b=>{b.unsubscribe?b.unsubscribe(u):b.removeEventListener("abort",u)}),s=null)};s.forEach(b=>b.addEventListener("abort",u));const{signal:g}=o;return g.unsubscribe=()=>M.asap(f),g}},gm=function*(s,i){let a=s.byteLength;if(a<i){yield s;return}let o=0,c;for(;o<a;)c=o+i,yield s.slice(o,c),o=c},xm=async function*(s,i){for await(const a of vm(s))yield*gm(a,i)},vm=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const i=s.getReader();try{for(;;){const{done:a,value:o}=await i.read();if(a)break;yield o}}finally{await i.cancel()}},Bo=(s,i,a,o)=>{const c=xm(s,i);let u=0,h,f=g=>{h||(h=!0,o&&o(g))};return new ReadableStream({async pull(g){try{const{done:b,value:x}=await c.next();if(b){f(),g.close();return}let _=x.byteLength;if(a){let S=u+=_;a(S)}g.enqueue(new Uint8Array(x))}catch(b){throw f(b),b}},cancel(g){return f(g),c.return()}},{highWaterMark:2})},da=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dl=da&&typeof ReadableStream=="function",ym=da&&(typeof TextEncoder=="function"?(s=>i=>s.encode(i))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),Bl=(s,...i)=>{try{return!!s(...i)}catch{return!1}},bm=Dl&&Bl(()=>{let s=!1;const i=new Request(wt.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!i}),zo=64*1024,Qa=Dl&&Bl(()=>M.isReadableStream(new Response("").body)),Vi={stream:Qa&&(s=>s.body)};da&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(i=>{!Vi[i]&&(Vi[i]=M.isFunction(s[i])?a=>a[i]():(a,o)=>{throw new ke(`Response type '${i}' is not supported`,ke.ERR_NOT_SUPPORT,o)})})})(new Response);const wm=async s=>{if(s==null)return 0;if(M.isBlob(s))return s.size;if(M.isSpecCompliantForm(s))return(await new Request(wt.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(M.isArrayBufferView(s)||M.isArrayBuffer(s))return s.byteLength;if(M.isURLSearchParams(s)&&(s=s+""),M.isString(s))return(await ym(s)).byteLength},jm=async(s,i)=>{const a=M.toFiniteNumber(s.getContentLength());return a??wm(i)},_m=da&&(async s=>{let{url:i,method:a,data:o,signal:c,cancelToken:u,timeout:h,onDownloadProgress:f,onUploadProgress:g,responseType:b,headers:x,withCredentials:_="same-origin",fetchOptions:S}=Il(s);b=b?(b+"").toLowerCase():"text";let y=pm([c,u&&u.toAbortSignal()],h),j;const N=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let v;try{if(g&&bm&&a!=="get"&&a!=="head"&&(v=await jm(x,o))!==0){let A=new Request(i,{method:"POST",body:o,duplex:"half"}),H;if(M.isFormData(o)&&(H=A.headers.get("content-type"))&&x.setContentType(H),A.body){const[K,I]=Mo(v,Wi(Io(g)));o=Bo(A.body,zo,K,I)}}M.isString(_)||(_=_?"include":"omit");const P="credentials"in Request.prototype;j=new Request(i,{...S,signal:y,method:a.toUpperCase(),headers:x.normalize().toJSON(),body:o,duplex:"half",credentials:P?_:void 0});let E=await fetch(j,S);const z=Qa&&(b==="stream"||b==="response");if(Qa&&(f||z&&N)){const A={};["status","statusText","headers"].forEach($=>{A[$]=E[$]});const H=M.toFiniteNumber(E.headers.get("content-length")),[K,I]=f&&Mo(H,Wi(Io(f),!0))||[];E=new Response(Bo(E.body,zo,K,()=>{I&&I(),N&&N()}),A)}b=b||"text";let F=await Vi[M.findKey(Vi,b)||"text"](E,s);return!z&&N&&N(),await new Promise((A,H)=>{Ol(A,H,{data:F,headers:It.from(E.headers),status:E.status,statusText:E.statusText,config:s,request:j})})}catch(P){throw N&&N(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,s,j),{cause:P.cause||P}):ke.from(P,P&&P.code,s,j)}}),er={http:zh,xhr:fm,fetch:_m};M.forEach(er,(s,i)=>{if(s){try{Object.defineProperty(s,"name",{value:i})}catch{}Object.defineProperty(s,"adapterName",{value:i})}});const Ro=s=>`- ${s}`,Nm=s=>M.isFunction(s)||s===null||s===!1,zl={getAdapter:s=>{s=M.isArray(s)?s:[s];const{length:i}=s;let a,o;const c={};for(let u=0;u<i;u++){a=s[u];let h;if(o=a,!Nm(a)&&(o=er[(h=String(a)).toLowerCase()],o===void 0))throw new ke(`Unknown adapter '${h}'`);if(o)break;c[h||"#"+u]=o}if(!o){const u=Object.entries(c).map(([f,g])=>`adapter ${f} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=i?u.length>1?`since :
`+u.map(Ro).join(`
`):" "+Ro(u[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o},adapters:er};function Ra(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new $n(null,s)}function Fo(s){return Ra(s),s.headers=It.from(s.headers),s.data=za.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),zl.getAdapter(s.adapter||xi.adapter)(s).then(function(o){return Ra(s),o.data=za.call(s,s.transformResponse,o),o.headers=It.from(o.headers),o},function(o){return El(o)||(Ra(s),o&&o.response&&(o.response.data=za.call(s,s.transformResponse,o.response),o.response.headers=It.from(o.response.headers))),Promise.reject(o)})}const Rl="1.10.0",ua={};["object","boolean","number","function","string","symbol"].forEach((s,i)=>{ua[s]=function(o){return typeof o===s||"a"+(i<1?"n ":" ")+s}});const $o={};ua.transitional=function(i,a,o){function c(u,h){return"[Axios v"+Rl+"] Transitional option '"+u+"'"+h+(o?". "+o:"")}return(u,h,f)=>{if(i===!1)throw new ke(c(h," has been removed"+(a?" in "+a:"")),ke.ERR_DEPRECATED);return a&&!$o[h]&&($o[h]=!0,console.warn(c(h," has been deprecated since v"+a+" and will be removed in the near future"))),i?i(u,h,f):!0}};ua.spelling=function(i){return(a,o)=>(console.warn(`${o} is likely a misspelling of ${i}`),!0)};function Sm(s,i,a){if(typeof s!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const o=Object.keys(s);let c=o.length;for(;c-- >0;){const u=o[c],h=i[u];if(h){const f=s[u],g=f===void 0||h(f,u,s);if(g!==!0)throw new ke("option "+u+" must be "+g,ke.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ke("Unknown option "+u,ke.ERR_BAD_OPTION)}}const Ui={assertOptions:Sm,validators:ua},rs=Ui.validators;let Qs=class{constructor(i){this.defaults=i||{},this.interceptors={request:new Eo,response:new Eo}}async request(i,a){try{return await this._request(i,a)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(i,a){typeof i=="string"?(a=a||{},a.url=i):a=i||{},a=tn(this.defaults,a);const{transitional:o,paramsSerializer:c,headers:u}=a;o!==void 0&&Ui.assertOptions(o,{silentJSONParsing:rs.transitional(rs.boolean),forcedJSONParsing:rs.transitional(rs.boolean),clarifyTimeoutError:rs.transitional(rs.boolean)},!1),c!=null&&(M.isFunction(c)?a.paramsSerializer={serialize:c}:Ui.assertOptions(c,{encode:rs.function,serialize:rs.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ui.assertOptions(a,{baseUrl:rs.spelling("baseURL"),withXsrfToken:rs.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let h=u&&M.merge(u.common,u[a.method]);u&&M.forEach(["delete","get","head","post","put","patch","common"],j=>{delete u[j]}),a.headers=It.concat(h,u);const f=[];let g=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(g=g&&N.synchronous,f.unshift(N.fulfilled,N.rejected))});const b=[];this.interceptors.response.forEach(function(N){b.push(N.fulfilled,N.rejected)});let x,_=0,S;if(!g){const j=[Fo.bind(this),void 0];for(j.unshift.apply(j,f),j.push.apply(j,b),S=j.length,x=Promise.resolve(a);_<S;)x=x.then(j[_++],j[_++]);return x}S=f.length;let y=a;for(_=0;_<S;){const j=f[_++],N=f[_++];try{y=j(y)}catch(v){N.call(this,v);break}}try{x=Fo.call(this,y)}catch(j){return Promise.reject(j)}for(_=0,S=b.length;_<S;)x=x.then(b[_++],b[_++]);return x}getUri(i){i=tn(this.defaults,i);const a=Ml(i.baseURL,i.url,i.allowAbsoluteUrls);return Ll(a,i.params,i.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(i){Qs.prototype[i]=function(a,o){return this.request(tn(o||{},{method:i,url:a,data:(o||{}).data}))}});M.forEach(["post","put","patch"],function(i){function a(o){return function(u,h,f){return this.request(tn(f||{},{method:i,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:h}))}}Qs.prototype[i]=a(),Qs.prototype[i+"Form"]=a(!0)});let km=class Fl{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(u){a=u});const o=this;this.promise.then(c=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](c);o._listeners=null}),this.promise.then=c=>{let u;const h=new Promise(f=>{o.subscribe(f),u=f}).then(c);return h.cancel=function(){o.unsubscribe(u)},h},i(function(u,h,f){o.reason||(o.reason=new $n(u,h,f),a(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const a=this._listeners.indexOf(i);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const i=new AbortController,a=o=>{i.abort(o)};return this.subscribe(a),i.signal.unsubscribe=()=>this.unsubscribe(a),i.signal}static source(){let i;return{token:new Fl(function(c){i=c}),cancel:i}}};function Cm(s){return function(a){return s.apply(null,a)}}function Pm(s){return M.isObject(s)&&s.isAxiosError===!0}const tr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tr).forEach(([s,i])=>{tr[i]=s});function $l(s){const i=new Qs(s),a=xl(Qs.prototype.request,i);return M.extend(a,Qs.prototype,i,{allOwnKeys:!0}),M.extend(a,i,null,{allOwnKeys:!0}),a.create=function(c){return $l(tn(s,c))},a}const tt=$l(xi);tt.Axios=Qs;tt.CanceledError=$n;tt.CancelToken=km;tt.isCancel=El;tt.VERSION=Rl;tt.toFormData=ca;tt.AxiosError=ke;tt.Cancel=tt.CanceledError;tt.all=function(i){return Promise.all(i)};tt.spread=Cm;tt.isAxiosError=Pm;tt.mergeConfig=tn;tt.AxiosHeaders=It;tt.formToJSON=s=>Tl(M.isHTMLForm(s)?new FormData(s):s);tt.getAdapter=zl.getAdapter;tt.HttpStatusCode=tr;tt.default=tt;const{Axios:Mx,AxiosError:Ix,CanceledError:Dx,isCancel:Bx,CancelToken:zx,VERSION:Rx,all:Fx,Cancel:$x,isAxiosError:Zx,spread:Hx,toFormData:Ux,AxiosHeaders:qx,HttpStatusCode:Wx,formToJSON:Vx,getAdapter:Gx,mergeConfig:Jx}=tt,je=tt.create({baseURL:"http://localhost:8080",withCredentials:!0});function Lm({selectedDate:s,selectedTimeSlot:i,onDateChange:a,onTimeSlotSelect:o}){const[c,u]=p.useState([]),[h,f]=p.useState(!1),[g,b]=p.useState(null);p.useEffect(()=>{var y;const S=JSON.parse(localStorage.getItem("cart")||"[]");if(S.length>0){const j=S[0],N=(j==null?void 0:j.washermanId)||((y=j==null?void 0:j.washerman)==null?void 0:y._id);typeof N=="string"&&N.length===24?(b(N),s&&(async()=>{f(!0);try{const z=((await je.get("/api/show/available-slots",{params:{washermanId:N,date:s,_t:Date.now()}})).data.enabledSlots||[]).map(F=>{const A=parseInt(F.range.split(":")[0],10);let H="Morning";A>=12&&A<17?H="Afternoon":(A>=17||A<5)&&(H="Evening");const K=F.maxBookings-F.booked;return{_id:F.range,time:F.range,period:H,available:K>0,maxOrders:F.maxBookings,booked:F.booked,spotsLeft:K}});u(z)}catch(P){console.error("Error fetching time slots:",P),u([])}finally{f(!1)}})()):console.warn("Invalid washerman ID in cart:",N)}},[s]),p.useEffect(()=>{g&&s&&(async()=>{f(!0);try{const N=((await je.get("/api/show/available-slots",{params:{washermanId:g,date:s,_t:Date.now()}})).data.enabledSlots||[]).map(v=>{const P=parseInt(v.range.split(":")[0],10);let E="Morning";P>=12&&P<17?E="Afternoon":(P>=17||P<5)&&(E="Evening");const z=v.maxBookings-v.booked;return{_id:v.range,time:v.range,period:E,available:z>0,maxOrders:v.maxBookings,booked:v.booked,spotsLeft:z}});u(N)}catch(y){console.error("Error fetching time slots:",y),u([])}finally{f(!1)}})()},[]),p.useEffect(()=>{const S=async()=>{if(!(!g||!s)){f(!0);try{const v=((await je.get("/api/show/available-slots",{params:{washermanId:g,date:s,_t:Date.now()}})).data.enabledSlots||[]).map(P=>{const E=parseInt(P.range.split(":")[0],10);let z="Morning";E>=12&&E<17?z="Afternoon":(E>=17||E<5)&&(z="Evening");const F=P.maxBookings-P.booked;return{_id:P.range,time:P.range,period:z,available:F>0,maxOrders:P.maxBookings,booked:P.booked,spotsLeft:F}});u(v)}catch(j){console.error("Error fetching time slots:",j),u([])}finally{f(!1)}}};S();const y=setInterval(S,3e4);return()=>clearInterval(y)},[s,g]);const x=c.reduce((S,y)=>(S[y.period]||(S[y.period]=[]),S[y.period].push(y),S),{}),_=S=>{const y=i&&i._id===S._id,j=S.booked>=S.maxOrders;return y?"bg-blue-600 text-white border-blue-600":j?"bg-red-500 text-white border-red-500 cursor-not-allowed":"bg-green-100 text-green-800 border-green-300 hover:bg-green-200"};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rn,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Select Date and Time"})]}),e.jsx("button",{onClick:()=>{f(!0),(async()=>{if(!(!g||!s))try{const N=((await je.get("/api/show/available-slots",{params:{washermanId:g,date:s,_t:Date.now()}})).data.enabledSlots||[]).map(v=>{const P=parseInt(v.range.split(":")[0],10);let E="Morning";P>=12&&P<17?E="Afternoon":(P>=17||P<5)&&(E="Evening");const z=v.maxBookings-v.booked;return{_id:v.range,time:v.range,period:E,available:z>0,maxOrders:v.maxBookings,booked:v.booked,spotsLeft:z}});u(N)}catch(y){console.error("Error refreshing time slots:",y)}finally{f(!1)}})()},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"🔄 Refresh"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),e.jsx("input",{type:"date",value:s,onChange:S=>a(S.target.value),min:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),h?e.jsx("p",{className:"text-center text-gray-500",children:"Loading slots..."}):e.jsx("div",{className:"space-y-6",children:Object.entries(x).map(([S,y])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 mb-3",children:S}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map(j=>e.jsx("button",{onClick:()=>j.available&&o(j),disabled:!j.available,className:`p-3 md:p-4 rounded-lg border-2 transition-all duration-200 ${_(j)}${i&&i._id===j._id?" ring-2 ring-blue-400":""}`,children:e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("div",{className:"font-semibold text-sm md:text-base",children:j.time||"No Time"}),e.jsxs("div",{className:"text-xs text-gray-700",children:[j.booked,"/",j.maxOrders," Orders"]})]})},j._id))})]},S))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm md:text-base",children:"Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs md:text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{children:"Full"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded"}),e.jsx("span",{children:"Selected"})]})]})]})]})}function Am({cartItems:s,selectedDate:i,selectedTimeSlot:a,onCompleteOrder:o,onRemoveFromCart:c,onUpdateQuantity:u}){const h=y=>{var N;return(N=y==null?void 0:y.service)!=null&&N.options?y.selectedOptions.reduce((v,P)=>{const E=y.service.options.find(z=>z.id===P);return v+((E==null?void 0:E.price)||0)},0)*y.quantity:0},f=s.reduce((y,j)=>y+h(j),0),g=s.reduce((y,j)=>y+j.quantity,0);p.useEffect(()=>{var y,j;if(a&&localStorage.setItem("selectedTimeSlot",JSON.stringify(a)),i&&localStorage.setItem("selectedDate",i),s.length>0){const N=s.map(v=>{var A,H,K;const P=((A=v==null?void 0:v.service)==null?void 0:A.washerman)||(v==null?void 0:v.washerman),E=typeof P=="object"&&((H=P==null?void 0:P._id)==null?void 0:H.length)===24?P._id:typeof(v==null?void 0:v.washermanId)=="string"?v.washermanId:"684fdb3e2ef2b4179b022277",z=typeof P=="object"&&(P!=null&&P.name)?P.name:typeof P=="string"?P:"",F=((K=v==null?void 0:v.service)==null?void 0:K.name)||(v==null?void 0:v.name)||"";return{washermanId:E,washerman:z,serviceId:v.serviceId,productId:v.serviceId,service:v.service,name:F,quantity:v.quantity,selectedOptions:v.selectedOptions||[]}});localStorage.setItem("cart",JSON.stringify(N)),localStorage.setItem("quantity",((j=(y=s[0])==null?void 0:y.quantity)==null?void 0:j.toString())||"1")}else localStorage.removeItem("cart")},[s,i,a]);const b=y=>{var j,N,v;return(N=(j=y==null?void 0:y.service)==null?void 0:j.washerman)!=null&&N.name?y.service.washerman.name:typeof(y==null?void 0:y.washerman)=="string"?y.washerman:typeof(y==null?void 0:y.washerman)=="object"&&((v=y.washerman)!=null&&v.name)?y.washerman.name:""},x=y=>({shirt:"Shirt",pants:"Pants",suits:"Suits",bedding:"Bedding"})[y]||y,_=(y,j)=>{const N=y.quantity+j;u&&N>=1&&u(y.serviceId,y.selectedOptions,N)},S=y=>{c&&c(y.serviceId,y.selectedOptions)};return s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),e.jsx("p",{className:"text-gray-600",children:"No items in your cart"})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 sticky top-20",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(dl,{className:"w-5 h-5 mr-2 text-blue-600"}),"Order Summary"]}),e.jsx("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:s.map(y=>{var j,N;return e.jsx("div",{className:"border border-gray-100 rounded-lg p-3",children:e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm md:text-base",children:((j=y==null?void 0:y.service)==null?void 0:j.name)||y.name}),e.jsx("p",{className:"text-xs md:text-sm text-blue-600 font-medium",children:x(((N=y==null?void 0:y.service)==null?void 0:N.category)||"")}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Dhobi : ",b(y)]})]}),e.jsx("button",{onClick:()=>S(y),className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"Remove from cart",children:e.jsx(es,{className:"w-4 h-4"})})]}),y.selectedOptions.length>0&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 mt-1",children:["Service:"," ",y.selectedOptions.map(v=>{var E,z;const P=(z=(E=y==null?void 0:y.service)==null?void 0:E.options)==null?void 0:z.find(F=>F.id===v);return(P==null?void 0:P.name)||v}).join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>_(y,-1),disabled:y.quantity<=1,className:"p-1 rounded-full border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:e.jsx(cl,{className:"w-3 h-3"})}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:y.quantity}),e.jsx("button",{onClick:()=>_(y,1),className:"p-1 rounded-full border border-gray-300 hover:bg-gray-50 transition-colors",children:e.jsx(Ms,{className:"w-3 h-3"})})]}),e.jsxs("span",{className:"font-semibold text-gray-900 text-sm md:text-base",children:["₹",h(y)]})]})]})})},`${y.serviceId}-${y.selectedOptions.join("-")}`)})}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm md:text-base",children:[e.jsxs("span",{className:"text-gray-600",children:["Items (",g,")"]}),e.jsxs("span",{className:"font-medium",children:["₹",f]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-blue-600",children:["₹",f]})]})]}),i&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-sm text-blue-800",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:new Date(i).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a&&e.jsxs("div",{className:"flex items-center text-sm text-blue-800 mt-1",children:[e.jsx(hr,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:a.time})]})]}),e.jsxs("button",{onClick:o,disabled:!a,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center text-sm md:text-base",children:[e.jsx(ou,{className:"w-5 h-5 mr-2"}),a?"Go for Payment":"Please Select a Time Slot"]})]})}function Tm({categories:s,selectedCategory:i,onCategoryChange:a}){return e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:s.map(o=>e.jsx("button",{onClick:()=>a(o.id),className:`px-3 md:px-4 py-1.5 md:py-2 rounded-full whitespace-nowrap font-medium transition-colors text-sm md:text-base ${i===o.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o.name},o.id))})}function Em(){const[s,i]=p.useState([]),a=p.useCallback((g,b,x)=>{var j;const S=x.reduce((N,v)=>{var E;const P=(E=g.options)==null?void 0:E.find(z=>z._id===v);return N+((P==null?void 0:P.price)||0)},0),y={serviceId:g._id,service:g,quantity:b,selectedOptions:x,totalPrice:S*b,price:S,washermanId:((j=g.washerman)==null?void 0:j._id)||"",washerman:g.washerman,name:g.name};i(N=>{const v=N.findIndex(P=>P.serviceId===g._id&&JSON.stringify(P.selectedOptions.sort())===JSON.stringify(x.sort()));if(v>=0){const P=[...N];return P[v]={...P[v],quantity:P[v].quantity+b,totalPrice:P[v].totalPrice+totalPrice},P}else return[...N,y]})},[]),o=p.useCallback((g,b)=>{i(x=>x.filter(_=>!(_.serviceId===g&&JSON.stringify(_.selectedOptions.sort())===JSON.stringify(b.sort()))))},[]),c=p.useCallback((g,b,x)=>{if(x<=0){o(g,b);return}i(_=>_.map(S=>{if(S.serviceId===g&&JSON.stringify(S.selectedOptions.sort())===JSON.stringify(b.sort())){const y=S.totalPrice/S.quantity;return{...S,quantity:x,totalPrice:y*x}}return S}))},[o]),u=p.useCallback(()=>{i([])},[]),h=p.useCallback(()=>s.reduce((g,b)=>g+b.quantity,0),[s]),f=p.useCallback(()=>s.reduce((g,b)=>g+b.totalPrice,0),[s]);return{cartItems:s,addToCart:a,removeFromCart:o,updateQuantity:c,clearCart:u,getTotalItems:h,getTotalAmount:f}}const Om=[{id:"morning-1",time:"09:00 - 10:00",period:"Morning",total:10},{id:"morning-2",time:"10:00 - 11:00",period:"Morning",total:10},{id:"morning-3",time:"11:00 - 12:00",period:"Morning",total:10},{id:"afternoon-1",time:"13:00 - 14:00",period:"Afternoon",total:10},{id:"afternoon-2",time:"14:00 - 15:00",period:"Afternoon",total:10},{id:"afternoon-3",time:"15:00 - 16:00",period:"Afternoon",total:10},{id:"evening-1",time:"16:00 - 17:00",period:"Evening",total:10},{id:"evening-2",time:"17:00 - 18:00",period:"Evening",total:10}];function Ri(s){const i=new Date(s),a=Math.floor((i.getTime()-new Date(i.getFullYear(),0,0).getTime())/(1e3*60*60*24)),o=i.getDay();return Om.map((c,u)=>{const h=a*1e3+o*100+u;let f;o===0||o===6?f=Math.max(0,Math.min(10,[8,6,4,3,2,5,7,9][u]+Math.floor(Math.sin(h)*3))):f=Math.max(0,Math.min(10,[5,7,9,8,6,4,3,2][u]+Math.floor(Math.sin(h)*4)));const g=Math.floor(Math.sin(h*.1)*2);return f=Math.max(0,Math.min(10,f+g)),{...c,available:f,isAvailable:f>0}})}const Zl=()=>e.jsx("footer",{className:"bg-slate-800 text-white pt-16 pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(fi,{className:"h-6 w-6 text-blue-400"}),e.jsx("span",{className:"ml-2 text-xl font-bold",children:"DhobiXpress"})]}),e.jsx("p",{className:"text-slate-300 mb-6 pr-4",children:"Making laundry simple and convenient for busy people with our revolutionary laundry service."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-slate-300 hover:text-blue-400 transition-colors",children:e.jsx(lu,{className:"h-5 w-5"})}),e.jsx("a",{href:"#",className:"text-slate-300 hover:text-blue-400 transition-colors",children:e.jsx(du,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/",className:"text-slate-300 hover:text-blue-400 transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"/about",className:"text-slate-300 hover:text-blue-400 transition-colors",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",className:"text-slate-300 hover:text-blue-400 transition-colors",children:"Contact"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Our Services"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/services/wash-fold",className:"text-slate-300 hover:text-blue-400 transition-colors",children:"Wash & Fold"})}),e.jsx("li",{children:e.jsx("a",{href:"/services/dry-cleaning",className:"text-slate-300 hover:text-blue-400 transition-colors",children:"Dry Cleaning"})}),e.jsx("li",{children:e.jsx("a",{href:"/services/ironing",className:"text-slate-300 hover:text-blue-400 transition-colors",children:"Ironing Services"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact Us"}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex",children:[e.jsx(ul,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-slate-300",children:"7909045381"})]}),e.jsxs("li",{className:"flex",children:[e.jsx(ur,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-slate-300",children:"rohitkumar60704@gmail.com"})]}),e.jsxs("li",{className:"flex",children:[e.jsx(Mn,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-slate-300",children:"Fortune Tower ,Bhubaneswar"})]})]})]})]}),e.jsx("div",{className:"border-t border-slate-700 mt-12 pt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-slate-400 text-sm mb-4 md:mb-0",children:["© ",new Date().getFullYear()," DhobiXpress. All rights reserved."]}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsx("a",{href:"/terms",className:"text-slate-400 text-sm hover:text-blue-400 transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"/privacy",className:"text-slate-400 text-sm hover:text-blue-400 transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"/faq",className:"text-slate-400 text-sm hover:text-blue-400 transition-colors",children:"FAQ"})]})]})})]})}),Mm=[{question:"How does the pickup and delivery process work?",answer:"It's simple! Schedule a pickup through our app or website, and we'll come to your location at the chosen time. We'll collect your laundry in our FoldMate bags and deliver it back to you, clean and folded, at your requested delivery time."},{question:"What is the turnaround time for standard service?",answer:"Our standard service has a 48-hour turnaround time."},{question:"How are delicate garments and special care items handled?",answer:"We have specialized processes for delicate items. You can add special care instructions to your order."},{question:"Do you offer dry cleaning services?",answer:"Yes, we offer professional dry cleaning services for garments that require it. depending your location this option will avialable or not."},{question:"What detergents and products do you use?",answer:"We use eco-friendly detergents that are effective yet gentle on the environment. ."}],Hl=()=>{const s=p.useRef(null),[i,a]=p.useState(null);p.useEffect(()=>{const c=new IntersectionObserver(([u])=>{u.isIntersecting&&(u.target.classList.add("opacity-100","translate-y-0"),c.unobserve(u.target))},{threshold:.1});return s.current&&c.observe(s.current),()=>{s.current&&c.unobserve(s.current)}},[]);const o=c=>{a(i===c?null:c)};return e.jsx("section",{ref:s,className:"py-20 bg-white opacity-0 -translate-y-6 transition-all duration-700 ease-out",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-4",children:"Frequently Asked Questions"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto mb-6"}),e.jsx("p",{className:"text-lg text-slate-600 max-w-3xl mx-auto",children:"Have questions about our services? Find answers to commonly asked questions below."})]}),e.jsx("div",{className:"max-w-3xl mx-auto",children:Mm.map((c,u)=>e.jsxs("div",{className:"mb-4 border-b border-slate-200 pb-4 last:border-b-0",children:[e.jsxs("button",{onClick:()=>o(u),className:"flex justify-between items-center w-full text-left py-3 focus:outline-none",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:c.question}),i===u?e.jsx(dr,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}):e.jsx(cr,{className:"h-5 w-5 text-blue-600 flex-shrink-0"})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${i===u?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("p",{className:"text-slate-600 pt-2 pb-4",children:c.answer})})]},u))}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("p",{className:"text-lg text-slate-600 mb-6",children:"Didn't find the answer you're looking for?"}),e.jsx("a",{href:"/contact",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-full font-medium transition-colors inline-block",children:"Contact Us"})]})]})})},Im=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),lt=(s,i={})=>fetch(`http://localhost:8080${s}`,{credentials:"include",...i}),Dm=()=>{const s=p.useRef(null),[i,a]=p.useState(""),[o,c]=p.useState(""),[u,h]=p.useState(""),[f,g]=p.useState("");p.useEffect(()=>{var x;(x=s.current)==null||x.focus()},[]);const b=async x=>{x.preventDefault();try{(await(await lt("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:o,message:u})})).json()).success?(g("✅ Message sent successfully!"),a(""),c(""),h("")):g("❌ Failed to send message.")}catch(_){console.error(_),g("❌ Server error.")}};return e.jsxs(e.Fragment,{children:[e.jsx(di,{searchQuery:"",onSearchChange:()=>{},onCartClick:()=>{},onContactClick:()=>{}}),e.jsx("section",{className:"w-full flex justify-center bg-gray-50 py-16",children:e.jsx("div",{className:"max-w-3xl w-full px-6",children:e.jsxs("form",{onSubmit:b,className:"bg-white p-10 rounded-xl shadow-lg space-y-8",children:[e.jsx("h2",{className:"text-3xl font-serif font-semibold text-gray-800 mb-6 text-center",children:"Get in Touch"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block mb-2 font-medium text-gray-700",children:"Name"}),e.jsx("input",{id:"name",ref:s,type:"text",value:i,onChange:x=>a(x.target.value),className:"w-full border border-gray-300 rounded-md px-4 py-3",placeholder:"Your Name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:o,onChange:x=>c(x.target.value),className:"w-full border border-gray-300 rounded-md px-4 py-3",placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block mb-2 font-medium text-gray-700",children:"Message"}),e.jsx("textarea",{id:"message",value:u,onChange:x=>h(x.target.value),className:"w-full border border-gray-300 rounded-md px-4 py-3",placeholder:"Your message...",rows:6,required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-semibold py-3 rounded-md hover:bg-blue-700 transition",children:"Send Message"}),f&&e.jsx("p",{className:"text-center text-green-600",children:f})]})})}),e.jsx(Hl,{}),e.jsx(Zl,{})]})},Bm=p.lazy(()=>hi(()=>import("./HeroSection-voGqaZLM.js"),__vite__mapDeps([0,1]))),zm=p.lazy(()=>hi(()=>import("./MissionSection-oZU1c61q.js"),__vite__mapDeps([2,1]))),Rm=p.lazy(()=>hi(()=>import("./ServicesSection-B7qEDQws.js"),__vite__mapDeps([3,1]))),Fm=p.lazy(()=>hi(()=>Promise.resolve().then(()=>Im),void 0)),$m=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-blue-50",children:[e.jsx(di,{}),e.jsxs(p.Suspense,{fallback:e.jsx("div",{className:"min-h-[300px]"}),children:[e.jsx(Bm,{}),e.jsx(zm,{}),e.jsx(Rm,{}),e.jsx(Fm,{})]}),e.jsx(Zl,{})]});function Zm(s){return new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}function Hm(s){switch(s){case"Completed":return"bg-green-100 text-green-700";case"In Progress":return"bg-yellow-100 text-yellow-700";case"Pending":return"bg-blue-100 text-blue-700";case"Cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}}function Um({item:s}){return e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsxs("span",{children:[s.name," x",s.quantity]}),e.jsxs("span",{children:["₹",s.price*s.quantity]})]})}const qm=({order:s})=>{var F;if(!s)return e.jsx("div",{children:"Order not found."});const i=A=>{if(!A)return"Address not available";if(typeof A=="string")return A;if(A.fullAddress)return A.fullAddress;if(A.houseNo||A.street||A.city||A.state||A.pincode){const H=[A.houseNo,A.street,A.landmark,A.city,A.state,A.pincode].filter(Boolean);return H.length>0?H.join(", "):"Address not available"}if(A.street||A.city||A.state||A.zip){const H=[A.street,A.city,A.state,A.zip].filter(Boolean);return H.length>0?H.join(", "):"Address not available"}return"Address not available"},{_id:a,productId:o,date:c,slot:u,quantity:h,totalAmount:f,status:g,paymentStatus:b,paymentMethod:x,washerman:_,guest:S,createdAt:y}=s,j=Zm(c),N=f||0,v=(o==null?void 0:o.image)||"",P=(o==null?void 0:o.category)||(o==null?void 0:o.name)||"Service",E=(_==null?void 0:_.name)||"Unknown",z=(_==null?void 0:_.contact)||"Not available";return _!=null&&_._id,e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-1/3 p-4 flex items-center justify-center bg-gray-50",children:v?e.jsx("img",{src:v,alt:`Order ${a}`,className:"w-full h-48 object-contain rounded-md",onError:A=>{const H=A.target;H.src="https://images.pexels.com/photos/5217766/pexels-photo-5217766.jpeg"}}):e.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx(dl,{size:64,className:"text-gray-400"})})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:["Order #",a]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:P}),e.jsxs("p",{className:"text-sm text-gray-600  mb-1",children:["Service:",s.selectedOptions&&s.selectedOptions.length>0?" "+s.selectedOptions.map(A=>A.name).join(", "):" N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" pick up:",j||"Invalid Date"," | Slot: ",(u==null?void 0:u.range)||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Quantity: ",h]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:["Payment: ₹",N," via ",x||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:["Payment Status: ",b]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Dhobi : ",E]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Contact: ",z]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created At: ",new Date(y).toLocaleString()]}),s.deliveryAddress?e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Delivery Address:"}),e.jsx("p",{children:i(s.deliveryAddress)}),s.deliveryInstructions&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Instructions:"})," ",s.deliveryInstructions]})]}):e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Customer Address: ",i((F=s.guest)==null?void 0:F.address)]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${Hm(g)} mt-2 sm:mt-0`,children:g})]}),s.items&&s.items.length>0&&e.jsxs("div",{className:"border-t border-gray-100 pt-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-1",children:s.items.map((A,H)=>e.jsx(Um,{item:A},H))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["₹",N]})]})]})]})})},Wm=()=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm animate-pulse",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-1/3 p-4 flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-md"})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-24 mt-2 sm:mt-0"})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4 mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-3"}),e.jsx("div",{className:"space-y-3",children:[1,2].map(s=>e.jsxs("div",{className:"flex justify-between py-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/6"})]},s))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/6"})]})]})]})}),Vm=()=>{const[s,i]=p.useState([]),[a,o]=p.useState(!0),[c,u]=p.useState("");return p.useEffect(()=>{(async()=>{var f;o(!0);try{const g=localStorage.getItem("token"),b=await je.get("/api/booking",{headers:{Authorization:`Bearer ${g}`},withCredentials:!0});console.log("Fetched orders:",b.data),i(b.data)}catch(g){console.error("Error fetching orders:",((f=g==null?void 0:g.response)==null?void 0:f.data)||g.message)}finally{o(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(di,{searchQuery:c,onSearchChange:u}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(No,{className:"h-6 w-6 text-indigo-600 mr-2"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order History"})]}),e.jsx("p",{className:"text-gray-600",children:"View and track all your previous orders"})]}),e.jsx("div",{className:"space-y-6",children:a?e.jsx(e.Fragment,{children:[1,2,3].map(h=>e.jsx(Wm,{},h))}):s.length>0?s.map(h=>e.jsx(qm,{order:h},h._id)):e.jsxs("div",{className:"bg-white rounded-xl p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(No,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No orders found"}),e.jsx("p",{className:"text-gray-500",children:"You haven't placed any orders yet."})]})})]})]})};/*!
* sweetalert2 v11.22.4
* Released under the MIT License.
*/function Ul(s,i,a){if(typeof s=="function"?s===i:s.has(i))return arguments.length<3?i:a;throw new TypeError("Private element is not present on this object")}function Gm(s,i){if(i.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zo(s,i){return s.get(Ul(s,i))}function Jm(s,i,a){Gm(s,i),i.set(s,a)}function Ym(s,i,a){return s.set(Ul(s,i),a),a}const Km=100,ue={},Xm=()=>{ue.previousActiveElement instanceof HTMLElement?(ue.previousActiveElement.focus(),ue.previousActiveElement=null):document.body&&document.body.focus()},Qm=s=>new Promise(i=>{if(!s)return i();const a=window.scrollX,o=window.scrollY;ue.restoreFocusTimeout=setTimeout(()=>{Xm(),i()},Km),window.scrollTo(a,o)}),ql="swal2-",ef=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],D=ef.reduce((s,i)=>(s[i]=ql+i,s),{}),tf=["success","warning","info","question","error"],Gi=tf.reduce((s,i)=>(s[i]=ql+i,s),{}),Wl="SweetAlert2:",xr=s=>s.charAt(0).toUpperCase()+s.slice(1),kt=s=>{console.warn(`${Wl} ${typeof s=="object"?s.join(" "):s}`)},nn=s=>{console.error(`${Wl} ${s}`)},Ho=[],sf=s=>{Ho.includes(s)||(Ho.push(s),kt(s))},Vl=(s,i=null)=>{sf(`"${s}" is deprecated and will be removed in the next major release.${i?` Use "${i}" instead.`:""}`)},ha=s=>typeof s=="function"?s():s,vr=s=>s&&typeof s.toPromise=="function",vi=s=>vr(s)?s.toPromise():Promise.resolve(s),yr=s=>s&&Promise.resolve(s)===s,Ct=()=>document.body.querySelector(`.${D.container}`),yi=s=>{const i=Ct();return i?i.querySelector(s):null},Zt=s=>yi(`.${s}`),ze=()=>Zt(D.popup),Zn=()=>Zt(D.icon),nf=()=>Zt(D["icon-content"]),Gl=()=>Zt(D.title),br=()=>Zt(D["html-container"]),Jl=()=>Zt(D.image),wr=()=>Zt(D["progress-steps"]),ma=()=>Zt(D["validation-message"]),ls=()=>yi(`.${D.actions} .${D.confirm}`),Hn=()=>yi(`.${D.actions} .${D.cancel}`),an=()=>yi(`.${D.actions} .${D.deny}`),af=()=>Zt(D["input-label"]),Un=()=>yi(`.${D.loader}`),bi=()=>Zt(D.actions),Yl=()=>Zt(D.footer),fa=()=>Zt(D["timer-progress-bar"]),jr=()=>Zt(D.close),rf=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,_r=()=>{const s=ze();if(!s)return[];const i=s.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),a=Array.from(i).sort((u,h)=>{const f=parseInt(u.getAttribute("tabindex")||"0"),g=parseInt(h.getAttribute("tabindex")||"0");return f>g?1:f<g?-1:0}),o=s.querySelectorAll(rf),c=Array.from(o).filter(u=>u.getAttribute("tabindex")!=="-1");return[...new Set(a.concat(c))].filter(u=>Dt(u))},Nr=()=>ys(document.body,D.shown)&&!ys(document.body,D["toast-shown"])&&!ys(document.body,D["no-backdrop"]),pa=()=>{const s=ze();return s?ys(s,D.toast):!1},of=()=>{const s=ze();return s?s.hasAttribute("data-loading"):!1},Ht=(s,i)=>{if(s.textContent="",i){const o=new DOMParser().parseFromString(i,"text/html"),c=o.querySelector("head");c&&Array.from(c.childNodes).forEach(h=>{s.appendChild(h)});const u=o.querySelector("body");u&&Array.from(u.childNodes).forEach(h=>{h instanceof HTMLVideoElement||h instanceof HTMLAudioElement?s.appendChild(h.cloneNode(!0)):s.appendChild(h)})}},ys=(s,i)=>{if(!i)return!1;const a=i.split(/\s+/);for(let o=0;o<a.length;o++)if(!s.classList.contains(a[o]))return!1;return!0},lf=(s,i)=>{Array.from(s.classList).forEach(a=>{!Object.values(D).includes(a)&&!Object.values(Gi).includes(a)&&!Object.values(i.showClass||{}).includes(a)&&s.classList.remove(a)})},$t=(s,i,a)=>{if(lf(s,i),!i.customClass)return;const o=i.customClass[a];if(o){if(typeof o!="string"&&!o.forEach){kt(`Invalid type of customClass.${a}! Expected string or iterable object, got "${typeof o}"`);return}Re(s,o)}},ga=(s,i)=>{if(!i)return null;switch(i){case"select":case"textarea":case"file":return s.querySelector(`.${D.popup} > .${D[i]}`);case"checkbox":return s.querySelector(`.${D.popup} > .${D.checkbox} input`);case"radio":return s.querySelector(`.${D.popup} > .${D.radio} input:checked`)||s.querySelector(`.${D.popup} > .${D.radio} input:first-child`);case"range":return s.querySelector(`.${D.popup} > .${D.range} input`);default:return s.querySelector(`.${D.popup} > .${D.input}`)}},Kl=s=>{if(s.focus(),s.type!=="file"){const i=s.value;s.value="",s.value=i}},Xl=(s,i,a)=>{!s||!i||(typeof i=="string"&&(i=i.split(/\s+/).filter(Boolean)),i.forEach(o=>{Array.isArray(s)?s.forEach(c=>{a?c.classList.add(o):c.classList.remove(o)}):a?s.classList.add(o):s.classList.remove(o)}))},Re=(s,i)=>{Xl(s,i,!0)},Wt=(s,i)=>{Xl(s,i,!1)},Is=(s,i)=>{const a=Array.from(s.children);for(let o=0;o<a.length;o++){const c=a[o];if(c instanceof HTMLElement&&ys(c,i))return c}},en=(s,i,a)=>{a===`${parseInt(a)}`&&(a=parseInt(a)),a||parseInt(a)===0?s.style.setProperty(i,typeof a=="number"?`${a}px`:a):s.style.removeProperty(i)},xt=(s,i="flex")=>{s&&(s.style.display=i)},jt=s=>{s&&(s.style.display="none")},Sr=(s,i="block")=>{s&&new MutationObserver(()=>{wi(s,s.innerHTML,i)}).observe(s,{childList:!0,subtree:!0})},Uo=(s,i,a,o)=>{const c=s.querySelector(i);c&&c.style.setProperty(a,o)},wi=(s,i,a="flex")=>{i?xt(s,a):jt(s)},Dt=s=>!!(s&&(s.offsetWidth||s.offsetHeight||s.getClientRects().length)),cf=()=>!Dt(ls())&&!Dt(an())&&!Dt(Hn()),sr=s=>s.scrollHeight>s.clientHeight,df=(s,i)=>{let a=s;for(;a&&a!==i;){if(sr(a))return!0;a=a.parentElement}return!1},Ql=s=>{const i=window.getComputedStyle(s),a=parseFloat(i.getPropertyValue("animation-duration")||"0"),o=parseFloat(i.getPropertyValue("transition-duration")||"0");return a>0||o>0},kr=(s,i=!1)=>{const a=fa();a&&Dt(a)&&(i&&(a.style.transition="none",a.style.width="100%"),setTimeout(()=>{a.style.transition=`width ${s/1e3}s linear`,a.style.width="0%"},10))},uf=()=>{const s=fa();if(!s)return;const i=parseInt(window.getComputedStyle(s).width);s.style.removeProperty("transition"),s.style.width="100%";const a=parseInt(window.getComputedStyle(s).width),o=i/a*100;s.style.width=`${o}%`},hf=()=>typeof window>"u"||typeof document>"u",mf=`
 <div aria-labelledby="${D.title}" aria-describedby="${D["html-container"]}" class="${D.popup}" tabindex="-1">
   <button type="button" class="${D.close}"></button>
   <ul class="${D["progress-steps"]}"></ul>
   <div class="${D.icon}"></div>
   <img class="${D.image}" />
   <h2 class="${D.title}" id="${D.title}"></h2>
   <div class="${D["html-container"]}" id="${D["html-container"]}"></div>
   <input class="${D.input}" id="${D.input}" />
   <input type="file" class="${D.file}" />
   <div class="${D.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${D.select}" id="${D.select}"></select>
   <div class="${D.radio}"></div>
   <label class="${D.checkbox}">
     <input type="checkbox" id="${D.checkbox}" />
     <span class="${D.label}"></span>
   </label>
   <textarea class="${D.textarea}" id="${D.textarea}"></textarea>
   <div class="${D["validation-message"]}" id="${D["validation-message"]}"></div>
   <div class="${D.actions}">
     <div class="${D.loader}"></div>
     <button type="button" class="${D.confirm}"></button>
     <button type="button" class="${D.deny}"></button>
     <button type="button" class="${D.cancel}"></button>
   </div>
   <div class="${D.footer}"></div>
   <div class="${D["timer-progress-bar-container"]}">
     <div class="${D["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),ff=()=>{const s=Ct();return s?(s.remove(),Wt([document.documentElement,document.body],[D["no-backdrop"],D["toast-shown"],D["has-column"]]),!0):!1},Ks=()=>{ue.currentInstance.resetValidationMessage()},pf=()=>{const s=ze(),i=Is(s,D.input),a=Is(s,D.file),o=s.querySelector(`.${D.range} input`),c=s.querySelector(`.${D.range} output`),u=Is(s,D.select),h=s.querySelector(`.${D.checkbox} input`),f=Is(s,D.textarea);i.oninput=Ks,a.onchange=Ks,u.onchange=Ks,h.onchange=Ks,f.oninput=Ks,o.oninput=()=>{Ks(),c.value=o.value},o.onchange=()=>{Ks(),c.value=o.value}},gf=s=>typeof s=="string"?document.querySelector(s):s,xf=s=>{const i=ze();i.setAttribute("role",s.toast?"alert":"dialog"),i.setAttribute("aria-live",s.toast?"polite":"assertive"),s.toast||i.setAttribute("aria-modal","true")},vf=s=>{window.getComputedStyle(s).direction==="rtl"&&Re(Ct(),D.rtl)},yf=s=>{const i=ff();if(hf()){nn("SweetAlert2 requires document to initialize");return}const a=document.createElement("div");a.className=D.container,i&&Re(a,D["no-transition"]),Ht(a,mf),a.dataset.swal2Theme=s.theme;const o=gf(s.target);o.appendChild(a),s.topLayer&&(a.setAttribute("popover",""),a.showPopover()),xf(s),vf(o),pf()},Cr=(s,i)=>{s instanceof HTMLElement?i.appendChild(s):typeof s=="object"?bf(s,i):s&&Ht(i,s)},bf=(s,i)=>{s.jquery?wf(i,s):Ht(i,s.toString())},wf=(s,i)=>{if(s.textContent="",0 in i)for(let a=0;a in i;a++)s.appendChild(i[a].cloneNode(!0));else s.appendChild(i.cloneNode(!0))},jf=(s,i)=>{const a=bi(),o=Un();!a||!o||(!i.showConfirmButton&&!i.showDenyButton&&!i.showCancelButton?jt(a):xt(a),$t(a,i,"actions"),_f(a,o,i),Ht(o,i.loaderHtml||""),$t(o,i,"loader"))};function _f(s,i,a){const o=ls(),c=an(),u=Hn();!o||!c||!u||($a(o,"confirm",a),$a(c,"deny",a),$a(u,"cancel",a),Nf(o,c,u,a),a.reverseButtons&&(a.toast?(s.insertBefore(u,o),s.insertBefore(c,o)):(s.insertBefore(u,i),s.insertBefore(c,i),s.insertBefore(o,i))))}function Nf(s,i,a,o){if(!o.buttonsStyling){Wt([s,i,a],D.styled);return}Re([s,i,a],D.styled),o.confirmButtonColor&&s.style.setProperty("--swal2-confirm-button-background-color",o.confirmButtonColor),o.denyButtonColor&&i.style.setProperty("--swal2-deny-button-background-color",o.denyButtonColor),o.cancelButtonColor&&a.style.setProperty("--swal2-cancel-button-background-color",o.cancelButtonColor),Fa(s),Fa(i),Fa(a)}function Fa(s){const i=window.getComputedStyle(s);if(i.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const a=i.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");s.style.setProperty("--swal2-action-button-focus-box-shadow",i.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${a}`))}function $a(s,i,a){const o=xr(i);wi(s,a[`show${o}Button`],"inline-block"),Ht(s,a[`${i}ButtonText`]||""),s.setAttribute("aria-label",a[`${i}ButtonAriaLabel`]||""),s.className=D[i],$t(s,a,`${i}Button`)}const Sf=(s,i)=>{const a=jr();a&&(Ht(a,i.closeButtonHtml||""),$t(a,i,"closeButton"),wi(a,i.showCloseButton),a.setAttribute("aria-label",i.closeButtonAriaLabel||""))},kf=(s,i)=>{const a=Ct();a&&(Cf(a,i.backdrop),Pf(a,i.position),Lf(a,i.grow),$t(a,i,"container"))};function Cf(s,i){typeof i=="string"?s.style.background=i:i||Re([document.documentElement,document.body],D["no-backdrop"])}function Pf(s,i){i&&(i in D?Re(s,D[i]):(kt('The "position" parameter is not valid, defaulting to "center"'),Re(s,D.center)))}function Lf(s,i){i&&Re(s,D[`grow-${i}`])}var Ve={innerParams:new WeakMap,domCache:new WeakMap};const Af=["input","file","range","select","radio","checkbox","textarea"],Tf=(s,i)=>{const a=ze();if(!a)return;const o=Ve.innerParams.get(s),c=!o||i.input!==o.input;Af.forEach(u=>{const h=Is(a,D[u]);h&&(Mf(u,i.inputAttributes),h.className=D[u],c&&jt(h))}),i.input&&(c&&Ef(i),If(i))},Ef=s=>{if(!s.input)return;if(!ot[s.input]){nn(`Unexpected type of input! Expected ${Object.keys(ot).join(" | ")}, got "${s.input}"`);return}const i=ec(s.input);if(!i)return;const a=ot[s.input](i,s);xt(i),s.inputAutoFocus&&setTimeout(()=>{Kl(a)})},Of=s=>{for(let i=0;i<s.attributes.length;i++){const a=s.attributes[i].name;["id","type","value","style"].includes(a)||s.removeAttribute(a)}},Mf=(s,i)=>{const a=ze();if(!a)return;const o=ga(a,s);if(o){Of(o);for(const c in i)o.setAttribute(c,i[c])}},If=s=>{if(!s.input)return;const i=ec(s.input);i&&$t(i,s,"input")},Pr=(s,i)=>{!s.placeholder&&i.inputPlaceholder&&(s.placeholder=i.inputPlaceholder)},ji=(s,i,a)=>{if(a.inputLabel){const o=document.createElement("label"),c=D["input-label"];o.setAttribute("for",s.id),o.className=c,typeof a.customClass=="object"&&Re(o,a.customClass.inputLabel),o.innerText=a.inputLabel,i.insertAdjacentElement("beforebegin",o)}},ec=s=>{const i=ze();if(i)return Is(i,D[s]||D.input)},Ji=(s,i)=>{["string","number"].includes(typeof i)?s.value=`${i}`:yr(i)||kt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof i}"`)},ot={};ot.text=ot.email=ot.password=ot.number=ot.tel=ot.url=ot.search=ot.date=ot["datetime-local"]=ot.time=ot.week=ot.month=(s,i)=>(Ji(s,i.inputValue),ji(s,s,i),Pr(s,i),s.type=i.input,s);ot.file=(s,i)=>(ji(s,s,i),Pr(s,i),s);ot.range=(s,i)=>{const a=s.querySelector("input"),o=s.querySelector("output");return Ji(a,i.inputValue),a.type=i.input,Ji(o,i.inputValue),ji(a,s,i),s};ot.select=(s,i)=>{if(s.textContent="",i.inputPlaceholder){const a=document.createElement("option");Ht(a,i.inputPlaceholder),a.value="",a.disabled=!0,a.selected=!0,s.appendChild(a)}return ji(s,s,i),s};ot.radio=s=>(s.textContent="",s);ot.checkbox=(s,i)=>{const a=ga(ze(),"checkbox");a.value="1",a.checked=!!i.inputValue;const o=s.querySelector("span");return Ht(o,i.inputPlaceholder||i.inputLabel),a};ot.textarea=(s,i)=>{Ji(s,i.inputValue),Pr(s,i),ji(s,s,i);const a=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const o=parseInt(window.getComputedStyle(ze()).width),c=()=>{if(!document.body.contains(s))return;const u=s.offsetWidth+a(s);u>o?ze().style.width=`${u}px`:en(ze(),"width",i.width)};new MutationObserver(c).observe(s,{attributes:!0,attributeFilter:["style"]})}}),s};const Df=(s,i)=>{const a=br();a&&(Sr(a),$t(a,i,"htmlContainer"),i.html?(Cr(i.html,a),xt(a,"block")):i.text?(a.textContent=i.text,xt(a,"block")):jt(a),Tf(s,i))},Bf=(s,i)=>{const a=Yl();a&&(Sr(a),wi(a,i.footer,"block"),i.footer&&Cr(i.footer,a),$t(a,i,"footer"))},zf=(s,i)=>{const a=Ve.innerParams.get(s),o=Zn();if(!o)return;if(a&&i.icon===a.icon){Wo(o,i),qo(o,i);return}if(!i.icon&&!i.iconHtml){jt(o);return}if(i.icon&&Object.keys(Gi).indexOf(i.icon)===-1){nn(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${i.icon}"`),jt(o);return}xt(o),Wo(o,i),qo(o,i),Re(o,i.showClass&&i.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",tc)},qo=(s,i)=>{for(const[a,o]of Object.entries(Gi))i.icon!==a&&Wt(s,o);Re(s,i.icon&&Gi[i.icon]),$f(s,i),tc(),$t(s,i,"icon")},tc=()=>{const s=ze();if(!s)return;const i=window.getComputedStyle(s).getPropertyValue("background-color"),a=s.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<a.length;o++)a[o].style.backgroundColor=i},Rf=s=>`
  ${s.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${s.animation?'<div class="swal2-success-fix"></div>':""}
  ${s.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Ff=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Wo=(s,i)=>{if(!i.icon&&!i.iconHtml)return;let a=s.innerHTML,o="";i.iconHtml?o=Vo(i.iconHtml):i.icon==="success"?(o=Rf(i),a=a.replace(/ style=".*?"/g,"")):i.icon==="error"?o=Ff:i.icon&&(o=Vo({question:"?",warning:"!",info:"i"}[i.icon])),a.trim()!==o.trim()&&Ht(s,o)},$f=(s,i)=>{if(i.iconColor){s.style.color=i.iconColor,s.style.borderColor=i.iconColor;for(const a of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Uo(s,a,"background-color",i.iconColor);Uo(s,".swal2-success-ring","border-color",i.iconColor)}},Vo=s=>`<div class="${D["icon-content"]}">${s}</div>`,Zf=(s,i)=>{const a=Jl();if(a){if(!i.imageUrl){jt(a);return}xt(a,""),a.setAttribute("src",i.imageUrl),a.setAttribute("alt",i.imageAlt||""),en(a,"width",i.imageWidth),en(a,"height",i.imageHeight),a.className=D.image,$t(a,i,"image")}};let Lr=!1,sc=0,nc=0,ic=0,ac=0;const Hf=s=>{s.addEventListener("mousedown",Yi),document.body.addEventListener("mousemove",Ki),s.addEventListener("mouseup",Xi),s.addEventListener("touchstart",Yi),document.body.addEventListener("touchmove",Ki),s.addEventListener("touchend",Xi)},Uf=s=>{s.removeEventListener("mousedown",Yi),document.body.removeEventListener("mousemove",Ki),s.removeEventListener("mouseup",Xi),s.removeEventListener("touchstart",Yi),document.body.removeEventListener("touchmove",Ki),s.removeEventListener("touchend",Xi)},Yi=s=>{const i=ze();if(s.target===i||Zn().contains(s.target)){Lr=!0;const a=rc(s);sc=a.clientX,nc=a.clientY,ic=parseInt(i.style.insetInlineStart)||0,ac=parseInt(i.style.insetBlockStart)||0,Re(i,"swal2-dragging")}},Ki=s=>{const i=ze();if(Lr){let{clientX:a,clientY:o}=rc(s);i.style.insetInlineStart=`${ic+(a-sc)}px`,i.style.insetBlockStart=`${ac+(o-nc)}px`}},Xi=()=>{const s=ze();Lr=!1,Wt(s,"swal2-dragging")},rc=s=>{let i=0,a=0;return s.type.startsWith("mouse")?(i=s.clientX,a=s.clientY):s.type.startsWith("touch")&&(i=s.touches[0].clientX,a=s.touches[0].clientY),{clientX:i,clientY:a}},qf=(s,i)=>{const a=Ct(),o=ze();if(!(!a||!o)){if(i.toast){en(a,"width",i.width),o.style.width="100%";const c=Un();c&&o.insertBefore(c,Zn())}else en(o,"width",i.width);en(o,"padding",i.padding),i.color&&(o.style.color=i.color),i.background&&(o.style.background=i.background),jt(ma()),Wf(o,i),i.draggable&&!i.toast?(Re(o,D.draggable),Hf(o)):(Wt(o,D.draggable),Uf(o))}},Wf=(s,i)=>{const a=i.showClass||{};s.className=`${D.popup} ${Dt(s)?a.popup:""}`,i.toast?(Re([document.documentElement,document.body],D["toast-shown"]),Re(s,D.toast)):Re(s,D.modal),$t(s,i,"popup"),typeof i.customClass=="string"&&Re(s,i.customClass),i.icon&&Re(s,D[`icon-${i.icon}`])},Vf=(s,i)=>{const a=wr();if(!a)return;const{progressSteps:o,currentProgressStep:c}=i;if(!o||o.length===0||c===void 0){jt(a);return}xt(a),a.textContent="",c>=o.length&&kt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((u,h)=>{const f=Gf(u);if(a.appendChild(f),h===c&&Re(f,D["active-progress-step"]),h!==o.length-1){const g=Jf(i);a.appendChild(g)}})},Gf=s=>{const i=document.createElement("li");return Re(i,D["progress-step"]),Ht(i,s),i},Jf=s=>{const i=document.createElement("li");return Re(i,D["progress-step-line"]),s.progressStepsDistance&&en(i,"width",s.progressStepsDistance),i},Yf=(s,i)=>{const a=Gl();a&&(Sr(a),wi(a,i.title||i.titleText,"block"),i.title&&Cr(i.title,a),i.titleText&&(a.innerText=i.titleText),$t(a,i,"title"))},oc=(s,i)=>{qf(s,i),kf(s,i),Vf(s,i),zf(s,i),Zf(s,i),Yf(s,i),Sf(s,i),Df(s,i),jf(s,i),Bf(s,i);const a=ze();typeof i.didRender=="function"&&a&&i.didRender(a),ue.eventEmitter.emit("didRender",a)},Kf=()=>Dt(ze()),lc=()=>{var s;return(s=ls())===null||s===void 0?void 0:s.click()},Xf=()=>{var s;return(s=an())===null||s===void 0?void 0:s.click()},Qf=()=>{var s;return(s=Hn())===null||s===void 0?void 0:s.click()},qn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),cc=s=>{s.keydownTarget&&s.keydownHandlerAdded&&(s.keydownTarget.removeEventListener("keydown",s.keydownHandler,{capture:s.keydownListenerCapture}),s.keydownHandlerAdded=!1)},ep=(s,i,a)=>{cc(s),i.toast||(s.keydownHandler=o=>sp(i,o,a),s.keydownTarget=i.keydownListenerCapture?window:ze(),s.keydownListenerCapture=i.keydownListenerCapture,s.keydownTarget.addEventListener("keydown",s.keydownHandler,{capture:s.keydownListenerCapture}),s.keydownHandlerAdded=!0)},nr=(s,i)=>{var a;const o=_r();if(o.length){s=s+i,s===-2&&(s=o.length-1),s===o.length?s=0:s===-1&&(s=o.length-1),o[s].focus();return}(a=ze())===null||a===void 0||a.focus()},dc=["ArrowRight","ArrowDown"],tp=["ArrowLeft","ArrowUp"],sp=(s,i,a)=>{s&&(i.isComposing||i.keyCode===229||(s.stopKeydownPropagation&&i.stopPropagation(),i.key==="Enter"?np(i,s):i.key==="Tab"?ip(i):[...dc,...tp].includes(i.key)?ap(i.key):i.key==="Escape"&&rp(i,s,a)))},np=(s,i)=>{if(!ha(i.allowEnterKey))return;const a=ga(ze(),i.input);if(s.target&&a&&s.target instanceof HTMLElement&&s.target.outerHTML===a.outerHTML){if(["textarea","file"].includes(i.input))return;lc(),s.preventDefault()}},ip=s=>{const i=s.target,a=_r();let o=-1;for(let c=0;c<a.length;c++)if(i===a[c]){o=c;break}s.shiftKey?nr(o,-1):nr(o,1),s.stopPropagation(),s.preventDefault()},ap=s=>{const i=bi(),a=ls(),o=an(),c=Hn();if(!i||!a||!o||!c)return;const u=[a,o,c];if(document.activeElement instanceof HTMLElement&&!u.includes(document.activeElement))return;const h=dc.includes(s)?"nextElementSibling":"previousElementSibling";let f=document.activeElement;if(f){for(let g=0;g<i.children.length;g++){if(f=f[h],!f)return;if(f instanceof HTMLButtonElement&&Dt(f))break}f instanceof HTMLButtonElement&&f.focus()}},rp=(s,i,a)=>{s.preventDefault(),ha(i.allowEscapeKey)&&a(qn.esc)};var In={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const op=()=>{const s=Ct();Array.from(document.body.children).forEach(a=>{a.contains(s)||(a.hasAttribute("aria-hidden")&&a.setAttribute("data-previous-aria-hidden",a.getAttribute("aria-hidden")||""),a.setAttribute("aria-hidden","true"))})},uc=()=>{Array.from(document.body.children).forEach(i=>{i.hasAttribute("data-previous-aria-hidden")?(i.setAttribute("aria-hidden",i.getAttribute("data-previous-aria-hidden")||""),i.removeAttribute("data-previous-aria-hidden")):i.removeAttribute("aria-hidden")})},hc=typeof window<"u"&&!!window.GestureEvent,lp=()=>{if(hc&&!ys(document.body,D.iosfix)){const s=document.body.scrollTop;document.body.style.top=`${s*-1}px`,Re(document.body,D.iosfix),cp()}},cp=()=>{const s=Ct();if(!s)return;let i;s.ontouchstart=a=>{i=dp(a)},s.ontouchmove=a=>{i&&(a.preventDefault(),a.stopPropagation())}},dp=s=>{const i=s.target,a=Ct(),o=br();return!a||!o||up(s)||hp(s)?!1:i===a||!sr(a)&&i instanceof HTMLElement&&!df(i,o)&&i.tagName!=="INPUT"&&i.tagName!=="TEXTAREA"&&!(sr(o)&&o.contains(i))},up=s=>s.touches&&s.touches.length&&s.touches[0].touchType==="stylus",hp=s=>s.touches&&s.touches.length>1,mp=()=>{if(ys(document.body,D.iosfix)){const s=parseInt(document.body.style.top,10);Wt(document.body,D.iosfix),document.body.style.top="",document.body.scrollTop=s*-1}},fp=()=>{const s=document.createElement("div");s.className=D["scrollbar-measure"],document.body.appendChild(s);const i=s.getBoundingClientRect().width-s.clientWidth;return document.body.removeChild(s),i};let Tn=null;const pp=s=>{Tn===null&&(document.body.scrollHeight>window.innerHeight||s==="scroll")&&(Tn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Tn+fp()}px`)},gp=()=>{Tn!==null&&(document.body.style.paddingRight=`${Tn}px`,Tn=null)};function mc(s,i,a,o){pa()?Go(s,o):(Qm(a).then(()=>Go(s,o)),cc(ue)),hc?(i.setAttribute("style","display:none !important"),i.removeAttribute("class"),i.innerHTML=""):i.remove(),Nr()&&(gp(),mp(),uc()),xp()}function xp(){Wt([document.documentElement,document.body],[D.shown,D["height-auto"],D["no-backdrop"],D["toast-shown"]])}function Ds(s){s=yp(s);const i=In.swalPromiseResolve.get(this),a=vp(this);this.isAwaitingPromise?s.isDismissed||(_i(this),i(s)):a&&i(s)}const vp=s=>{const i=ze();if(!i)return!1;const a=Ve.innerParams.get(s);if(!a||ys(i,a.hideClass.popup))return!1;Wt(i,a.showClass.popup),Re(i,a.hideClass.popup);const o=Ct();return Wt(o,a.showClass.backdrop),Re(o,a.hideClass.backdrop),bp(s,i,a),!0};function fc(s){const i=In.swalPromiseReject.get(this);_i(this),i&&i(s)}const _i=s=>{s.isAwaitingPromise&&(delete s.isAwaitingPromise,Ve.innerParams.get(s)||s._destroy())},yp=s=>typeof s>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},s),bp=(s,i,a)=>{var o;const c=Ct(),u=Ql(i);typeof a.willClose=="function"&&a.willClose(i),(o=ue.eventEmitter)===null||o===void 0||o.emit("willClose",i),u?wp(s,i,c,a.returnFocus,a.didClose):mc(s,c,a.returnFocus,a.didClose)},wp=(s,i,a,o,c)=>{ue.swalCloseEventFinishedCallback=mc.bind(null,s,a,o,c);const u=function(h){if(h.target===i){var f;(f=ue.swalCloseEventFinishedCallback)===null||f===void 0||f.call(ue),delete ue.swalCloseEventFinishedCallback,i.removeEventListener("animationend",u),i.removeEventListener("transitionend",u)}};i.addEventListener("animationend",u),i.addEventListener("transitionend",u)},Go=(s,i)=>{setTimeout(()=>{var a;typeof i=="function"&&i.bind(s.params)(),(a=ue.eventEmitter)===null||a===void 0||a.emit("didClose"),s._destroy&&s._destroy()})},Dn=s=>{let i=ze();if(i||new qe,i=ze(),!i)return;const a=Un();pa()?jt(Zn()):jp(i,s),xt(a),i.setAttribute("data-loading","true"),i.setAttribute("aria-busy","true"),i.focus()},jp=(s,i)=>{const a=bi(),o=Un();!a||!o||(!i&&Dt(ls())&&(i=ls()),xt(a),i&&(jt(i),o.setAttribute("data-button-to-replace",i.className),a.insertBefore(o,i)),Re([s,a],D.loading))},_p=(s,i)=>{i.input==="select"||i.input==="radio"?Pp(s,i):["text","email","number","tel","textarea"].some(a=>a===i.input)&&(vr(i.inputValue)||yr(i.inputValue))&&(Dn(ls()),Lp(s,i))},Np=(s,i)=>{const a=s.getInput();if(!a)return null;switch(i.input){case"checkbox":return Sp(a);case"radio":return kp(a);case"file":return Cp(a);default:return i.inputAutoTrim?a.value.trim():a.value}},Sp=s=>s.checked?1:0,kp=s=>s.checked?s.value:null,Cp=s=>s.files&&s.files.length?s.getAttribute("multiple")!==null?s.files:s.files[0]:null,Pp=(s,i)=>{const a=ze();if(!a)return;const o=c=>{i.input==="select"?Ap(a,Qi(c),i):i.input==="radio"&&Tp(a,Qi(c),i)};vr(i.inputOptions)||yr(i.inputOptions)?(Dn(ls()),vi(i.inputOptions).then(c=>{s.hideLoading(),o(c)})):typeof i.inputOptions=="object"?o(i.inputOptions):nn(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof i.inputOptions}`)},Lp=(s,i)=>{const a=s.getInput();a&&(jt(a),vi(i.inputValue).then(o=>{a.value=i.input==="number"?`${parseFloat(o)||0}`:`${o}`,xt(a),a.focus(),s.hideLoading()}).catch(o=>{nn(`Error in inputValue promise: ${o}`),a.value="",xt(a),a.focus(),s.hideLoading()}))};function Ap(s,i,a){const o=Is(s,D.select);if(!o)return;const c=(u,h,f)=>{const g=document.createElement("option");g.value=f,Ht(g,h),g.selected=pc(f,a.inputValue),u.appendChild(g)};i.forEach(u=>{const h=u[0],f=u[1];if(Array.isArray(f)){const g=document.createElement("optgroup");g.label=h,g.disabled=!1,o.appendChild(g),f.forEach(b=>c(g,b[1],b[0]))}else c(o,f,h)}),o.focus()}function Tp(s,i,a){const o=Is(s,D.radio);if(!o)return;i.forEach(u=>{const h=u[0],f=u[1],g=document.createElement("input"),b=document.createElement("label");g.type="radio",g.name=D.radio,g.value=h,pc(h,a.inputValue)&&(g.checked=!0);const x=document.createElement("span");Ht(x,f),x.className=D.label,b.appendChild(g),b.appendChild(x),o.appendChild(b)});const c=o.querySelectorAll("input");c.length&&c[0].focus()}const Qi=s=>{const i=[];return s instanceof Map?s.forEach((a,o)=>{let c=a;typeof c=="object"&&(c=Qi(c)),i.push([o,c])}):Object.keys(s).forEach(a=>{let o=s[a];typeof o=="object"&&(o=Qi(o)),i.push([a,o])}),i},pc=(s,i)=>!!i&&i.toString()===s.toString(),Ep=s=>{const i=Ve.innerParams.get(s);s.disableButtons(),i.input?gc(s,"confirm"):Tr(s,!0)},Op=s=>{const i=Ve.innerParams.get(s);s.disableButtons(),i.returnInputValueOnDeny?gc(s,"deny"):Ar(s,!1)},Mp=(s,i)=>{s.disableButtons(),i(qn.cancel)},gc=(s,i)=>{const a=Ve.innerParams.get(s);if(!a.input){nn(`The "input" parameter is needed to be set when using returnInputValueOn${xr(i)}`);return}const o=s.getInput(),c=Np(s,a);a.inputValidator?Ip(s,c,i):o&&!o.checkValidity()?(s.enableButtons(),s.showValidationMessage(a.validationMessage||o.validationMessage)):i==="deny"?Ar(s,c):Tr(s,c)},Ip=(s,i,a)=>{const o=Ve.innerParams.get(s);s.disableInput(),Promise.resolve().then(()=>vi(o.inputValidator(i,o.validationMessage))).then(u=>{s.enableButtons(),s.enableInput(),u?s.showValidationMessage(u):a==="deny"?Ar(s,i):Tr(s,i)})},Ar=(s,i)=>{const a=Ve.innerParams.get(s||void 0);a.showLoaderOnDeny&&Dn(an()),a.preDeny?(s.isAwaitingPromise=!0,Promise.resolve().then(()=>vi(a.preDeny(i,a.validationMessage))).then(c=>{c===!1?(s.hideLoading(),_i(s)):s.close({isDenied:!0,value:typeof c>"u"?i:c})}).catch(c=>xc(s||void 0,c))):s.close({isDenied:!0,value:i})},Jo=(s,i)=>{s.close({isConfirmed:!0,value:i})},xc=(s,i)=>{s.rejectPromise(i)},Tr=(s,i)=>{const a=Ve.innerParams.get(s||void 0);a.showLoaderOnConfirm&&Dn(),a.preConfirm?(s.resetValidationMessage(),s.isAwaitingPromise=!0,Promise.resolve().then(()=>vi(a.preConfirm(i,a.validationMessage))).then(c=>{Dt(ma())||c===!1?(s.hideLoading(),_i(s)):Jo(s,typeof c>"u"?i:c)}).catch(c=>xc(s||void 0,c))):Jo(s,i)};function ea(){const s=Ve.innerParams.get(this);if(!s)return;const i=Ve.domCache.get(this);jt(i.loader),pa()?s.icon&&xt(Zn()):Dp(i),Wt([i.popup,i.actions],D.loading),i.popup.removeAttribute("aria-busy"),i.popup.removeAttribute("data-loading"),i.confirmButton.disabled=!1,i.denyButton.disabled=!1,i.cancelButton.disabled=!1}const Dp=s=>{const i=s.popup.getElementsByClassName(s.loader.getAttribute("data-button-to-replace"));i.length?xt(i[0],"inline-block"):cf()&&jt(s.actions)};function vc(){const s=Ve.innerParams.get(this),i=Ve.domCache.get(this);return i?ga(i.popup,s.input):null}function yc(s,i,a){const o=Ve.domCache.get(s);i.forEach(c=>{o[c].disabled=a})}function bc(s,i){const a=ze();if(!(!a||!s))if(s.type==="radio"){const o=a.querySelectorAll(`[name="${D.radio}"]`);for(let c=0;c<o.length;c++)o[c].disabled=i}else s.disabled=i}function wc(){yc(this,["confirmButton","denyButton","cancelButton"],!1)}function jc(){yc(this,["confirmButton","denyButton","cancelButton"],!0)}function _c(){bc(this.getInput(),!1)}function Nc(){bc(this.getInput(),!0)}function Sc(s){const i=Ve.domCache.get(this),a=Ve.innerParams.get(this);Ht(i.validationMessage,s),i.validationMessage.className=D["validation-message"],a.customClass&&a.customClass.validationMessage&&Re(i.validationMessage,a.customClass.validationMessage),xt(i.validationMessage);const o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",D["validation-message"]),Kl(o),Re(o,D.inputerror))}function kc(){const s=Ve.domCache.get(this);s.validationMessage&&jt(s.validationMessage);const i=this.getInput();i&&(i.removeAttribute("aria-invalid"),i.removeAttribute("aria-describedby"),Wt(i,D.inputerror))}const En={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Bp=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],zp={allowEnterKey:void 0},Rp=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Cc=s=>Object.prototype.hasOwnProperty.call(En,s),Pc=s=>Bp.indexOf(s)!==-1,Lc=s=>zp[s],Fp=s=>{Cc(s)||kt(`Unknown parameter "${s}"`)},$p=s=>{Rp.includes(s)&&kt(`The parameter "${s}" is incompatible with toasts`)},Zp=s=>{const i=Lc(s);i&&Vl(s,i)},Ac=s=>{s.backdrop===!1&&s.allowOutsideClick&&kt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),s.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(s.theme)&&kt(`Invalid theme "${s.theme}"`);for(const i in s)Fp(i),s.toast&&$p(i),Zp(i)};function Tc(s){const i=Ct(),a=ze(),o=Ve.innerParams.get(this);if(!a||ys(a,o.hideClass.popup)){kt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const c=Hp(s),u=Object.assign({},o,c);Ac(u),i.dataset.swal2Theme=u.theme,oc(this,u),Ve.innerParams.set(this,u),Object.defineProperties(this,{params:{value:Object.assign({},this.params,s),writable:!1,enumerable:!0}})}const Hp=s=>{const i={};return Object.keys(s).forEach(a=>{Pc(a)?i[a]=s[a]:kt(`Invalid parameter to update: ${a}`)}),i};function Ec(){const s=Ve.domCache.get(this),i=Ve.innerParams.get(this);if(!i){Oc(this);return}s.popup&&ue.swalCloseEventFinishedCallback&&(ue.swalCloseEventFinishedCallback(),delete ue.swalCloseEventFinishedCallback),typeof i.didDestroy=="function"&&i.didDestroy(),ue.eventEmitter.emit("didDestroy"),Up(this)}const Up=s=>{Oc(s),delete s.params,delete ue.keydownHandler,delete ue.keydownTarget,delete ue.currentInstance},Oc=s=>{s.isAwaitingPromise?(Za(Ve,s),s.isAwaitingPromise=!0):(Za(In,s),Za(Ve,s),delete s.isAwaitingPromise,delete s.disableButtons,delete s.enableButtons,delete s.getInput,delete s.disableInput,delete s.enableInput,delete s.hideLoading,delete s.disableLoading,delete s.showValidationMessage,delete s.resetValidationMessage,delete s.close,delete s.closePopup,delete s.closeModal,delete s.closeToast,delete s.rejectPromise,delete s.update,delete s._destroy)},Za=(s,i)=>{for(const a in s)s[a].delete(i)};var qp=Object.freeze({__proto__:null,_destroy:Ec,close:Ds,closeModal:Ds,closePopup:Ds,closeToast:Ds,disableButtons:jc,disableInput:Nc,disableLoading:ea,enableButtons:wc,enableInput:_c,getInput:vc,handleAwaitingPromise:_i,hideLoading:ea,rejectPromise:fc,resetValidationMessage:kc,showValidationMessage:Sc,update:Tc});const Wp=(s,i,a)=>{s.toast?Vp(s,i,a):(Jp(i),Yp(i),Kp(s,i,a))},Vp=(s,i,a)=>{i.popup.onclick=()=>{s&&(Gp(s)||s.timer||s.input)||a(qn.close)}},Gp=s=>!!(s.showConfirmButton||s.showDenyButton||s.showCancelButton||s.showCloseButton);let ta=!1;const Jp=s=>{s.popup.onmousedown=()=>{s.container.onmouseup=function(i){s.container.onmouseup=()=>{},i.target===s.container&&(ta=!0)}}},Yp=s=>{s.container.onmousedown=i=>{i.target===s.container&&i.preventDefault(),s.popup.onmouseup=function(a){s.popup.onmouseup=()=>{},(a.target===s.popup||a.target instanceof HTMLElement&&s.popup.contains(a.target))&&(ta=!0)}}},Kp=(s,i,a)=>{i.container.onclick=o=>{if(ta){ta=!1;return}o.target===i.container&&ha(s.allowOutsideClick)&&a(qn.backdrop)}},Xp=s=>typeof s=="object"&&s.jquery,Yo=s=>s instanceof Element||Xp(s),Qp=s=>{const i={};return typeof s[0]=="object"&&!Yo(s[0])?Object.assign(i,s[0]):["title","html","icon"].forEach((a,o)=>{const c=s[o];typeof c=="string"||Yo(c)?i[a]=c:c!==void 0&&nn(`Unexpected type of ${a}! Expected "string" or "Element", got ${typeof c}`)}),i};function eg(...s){return new this(...s)}function tg(s){class i extends this{_main(o,c){return super._main(o,Object.assign({},s,c))}}return i}const sg=()=>ue.timeout&&ue.timeout.getTimerLeft(),Mc=()=>{if(ue.timeout)return uf(),ue.timeout.stop()},Ic=()=>{if(ue.timeout){const s=ue.timeout.start();return kr(s),s}},ng=()=>{const s=ue.timeout;return s&&(s.running?Mc():Ic())},ig=s=>{if(ue.timeout){const i=ue.timeout.increase(s);return kr(i,!0),i}},ag=()=>!!(ue.timeout&&ue.timeout.isRunning());let Ko=!1;const ir={};function rg(s="data-swal-template"){ir[s]=this,Ko||(document.body.addEventListener("click",og),Ko=!0)}const og=s=>{for(let i=s.target;i&&i!==document;i=i.parentNode)for(const a in ir){const o=i.getAttribute(a);if(o){ir[a].fire({template:o});return}}};class lg{constructor(){this.events={}}_getHandlersByEventName(i){return typeof this.events[i]>"u"&&(this.events[i]=[]),this.events[i]}on(i,a){const o=this._getHandlersByEventName(i);o.includes(a)||o.push(a)}once(i,a){const o=(...c)=>{this.removeListener(i,o),a.apply(this,c)};this.on(i,o)}emit(i,...a){this._getHandlersByEventName(i).forEach(o=>{try{o.apply(this,a)}catch(c){console.error(c)}})}removeListener(i,a){const o=this._getHandlersByEventName(i),c=o.indexOf(a);c>-1&&o.splice(c,1)}removeAllListeners(i){this.events[i]!==void 0&&(this.events[i].length=0)}reset(){this.events={}}}ue.eventEmitter=new lg;const cg=(s,i)=>{ue.eventEmitter.on(s,i)},dg=(s,i)=>{ue.eventEmitter.once(s,i)},ug=(s,i)=>{if(!s){ue.eventEmitter.reset();return}i?ue.eventEmitter.removeListener(s,i):ue.eventEmitter.removeAllListeners(s)};var hg=Object.freeze({__proto__:null,argsToParams:Qp,bindClickHandler:rg,clickCancel:Qf,clickConfirm:lc,clickDeny:Xf,enableLoading:Dn,fire:eg,getActions:bi,getCancelButton:Hn,getCloseButton:jr,getConfirmButton:ls,getContainer:Ct,getDenyButton:an,getFocusableElements:_r,getFooter:Yl,getHtmlContainer:br,getIcon:Zn,getIconContent:nf,getImage:Jl,getInputLabel:af,getLoader:Un,getPopup:ze,getProgressSteps:wr,getTimerLeft:sg,getTimerProgressBar:fa,getTitle:Gl,getValidationMessage:ma,increaseTimer:ig,isDeprecatedParameter:Lc,isLoading:of,isTimerRunning:ag,isUpdatableParameter:Pc,isValidParameter:Cc,isVisible:Kf,mixin:tg,off:ug,on:cg,once:dg,resumeTimer:Ic,showLoading:Dn,stopTimer:Mc,toggleTimer:ng});class mg{constructor(i,a){this.callback=i,this.remaining=a,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(i){const a=this.running;return a&&this.stop(),this.remaining+=i,a&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Dc=["swal-title","swal-html","swal-footer"],fg=s=>{const i=typeof s.template=="string"?document.querySelector(s.template):s.template;if(!i)return{};const a=i.content;return jg(a),Object.assign(pg(a),gg(a),xg(a),vg(a),yg(a),bg(a),wg(a,Dc))},pg=s=>{const i={};return Array.from(s.querySelectorAll("swal-param")).forEach(o=>{sn(o,["name","value"]);const c=o.getAttribute("name"),u=o.getAttribute("value");!c||!u||(typeof En[c]=="boolean"?i[c]=u!=="false":typeof En[c]=="object"?i[c]=JSON.parse(u):i[c]=u)}),i},gg=s=>{const i={};return Array.from(s.querySelectorAll("swal-function-param")).forEach(o=>{const c=o.getAttribute("name"),u=o.getAttribute("value");!c||!u||(i[c]=new Function(`return ${u}`)())}),i},xg=s=>{const i={};return Array.from(s.querySelectorAll("swal-button")).forEach(o=>{sn(o,["type","color","aria-label"]);const c=o.getAttribute("type");!c||!["confirm","cancel","deny"].includes(c)||(i[`${c}ButtonText`]=o.innerHTML,i[`show${xr(c)}Button`]=!0,o.hasAttribute("color")&&(i[`${c}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(i[`${c}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),i},vg=s=>{const i={},a=s.querySelector("swal-image");return a&&(sn(a,["src","width","height","alt"]),a.hasAttribute("src")&&(i.imageUrl=a.getAttribute("src")||void 0),a.hasAttribute("width")&&(i.imageWidth=a.getAttribute("width")||void 0),a.hasAttribute("height")&&(i.imageHeight=a.getAttribute("height")||void 0),a.hasAttribute("alt")&&(i.imageAlt=a.getAttribute("alt")||void 0)),i},yg=s=>{const i={},a=s.querySelector("swal-icon");return a&&(sn(a,["type","color"]),a.hasAttribute("type")&&(i.icon=a.getAttribute("type")),a.hasAttribute("color")&&(i.iconColor=a.getAttribute("color")),i.iconHtml=a.innerHTML),i},bg=s=>{const i={},a=s.querySelector("swal-input");a&&(sn(a,["type","label","placeholder","value"]),i.input=a.getAttribute("type")||"text",a.hasAttribute("label")&&(i.inputLabel=a.getAttribute("label")),a.hasAttribute("placeholder")&&(i.inputPlaceholder=a.getAttribute("placeholder")),a.hasAttribute("value")&&(i.inputValue=a.getAttribute("value")));const o=Array.from(s.querySelectorAll("swal-input-option"));return o.length&&(i.inputOptions={},o.forEach(c=>{sn(c,["value"]);const u=c.getAttribute("value");if(!u)return;const h=c.innerHTML;i.inputOptions[u]=h})),i},wg=(s,i)=>{const a={};for(const o in i){const c=i[o],u=s.querySelector(c);u&&(sn(u,[]),a[c.replace(/^swal-/,"")]=u.innerHTML.trim())}return a},jg=s=>{const i=Dc.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(s.children).forEach(a=>{const o=a.tagName.toLowerCase();i.includes(o)||kt(`Unrecognized element <${o}>`)})},sn=(s,i)=>{Array.from(s.attributes).forEach(a=>{i.indexOf(a.name)===-1&&kt([`Unrecognized attribute "${a.name}" on <${s.tagName.toLowerCase()}>.`,`${i.length?`Allowed attributes are: ${i.join(", ")}`:"To set the value, use HTML within the element."}`])})},Bc=10,_g=s=>{const i=Ct(),a=ze();typeof s.willOpen=="function"&&s.willOpen(a),ue.eventEmitter.emit("willOpen",a);const c=window.getComputedStyle(document.body).overflowY;kg(i,a,s),setTimeout(()=>{Ng(i,a)},Bc),Nr()&&(Sg(i,s.scrollbarPadding,c),op()),!pa()&&!ue.previousActiveElement&&(ue.previousActiveElement=document.activeElement),typeof s.didOpen=="function"&&setTimeout(()=>s.didOpen(a)),ue.eventEmitter.emit("didOpen",a),Wt(i,D["no-transition"])},sa=s=>{const i=ze();if(s.target!==i)return;const a=Ct();i.removeEventListener("animationend",sa),i.removeEventListener("transitionend",sa),a.style.overflowY="auto"},Ng=(s,i)=>{Ql(i)?(s.style.overflowY="hidden",i.addEventListener("animationend",sa),i.addEventListener("transitionend",sa)):s.style.overflowY="auto"},Sg=(s,i,a)=>{lp(),i&&a!=="hidden"&&pp(a),setTimeout(()=>{s.scrollTop=0})},kg=(s,i,a)=>{Re(s,a.showClass.backdrop),a.animation?(i.style.setProperty("opacity","0","important"),xt(i,"grid"),setTimeout(()=>{Re(i,a.showClass.popup),i.style.removeProperty("opacity")},Bc)):xt(i,"grid"),Re([document.documentElement,document.body],D.shown),a.heightAuto&&a.backdrop&&!a.toast&&Re([document.documentElement,document.body],D["height-auto"])};var Xo={email:(s,i)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(s)?Promise.resolve():Promise.resolve(i||"Invalid email address"),url:(s,i)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(s)?Promise.resolve():Promise.resolve(i||"Invalid URL")};function Cg(s){s.inputValidator||(s.input==="email"&&(s.inputValidator=Xo.email),s.input==="url"&&(s.inputValidator=Xo.url))}function Pg(s){(!s.target||typeof s.target=="string"&&!document.querySelector(s.target)||typeof s.target!="string"&&!s.target.appendChild)&&(kt('Target parameter is not valid, defaulting to "body"'),s.target="body")}function Lg(s){Cg(s),s.showLoaderOnConfirm&&!s.preConfirm&&kt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Pg(s),typeof s.title=="string"&&(s.title=s.title.split(`
`).join("<br />")),yf(s)}let os;var Fi=new WeakMap;class ct{constructor(...i){if(Jm(this,Fi,void 0),typeof window>"u")return;os=this;const a=Object.freeze(this.constructor.argsToParams(i));this.params=a,this.isAwaitingPromise=!1,Ym(Fi,this,this._main(os.params))}_main(i,a={}){if(Ac(Object.assign({},a,i)),ue.currentInstance){const u=In.swalPromiseResolve.get(ue.currentInstance),{isAwaitingPromise:h}=ue.currentInstance;ue.currentInstance._destroy(),h||u({isDismissed:!0}),Nr()&&uc()}ue.currentInstance=os;const o=Tg(i,a);Lg(o),Object.freeze(o),ue.timeout&&(ue.timeout.stop(),delete ue.timeout),clearTimeout(ue.restoreFocusTimeout);const c=Eg(os);return oc(os,o),Ve.innerParams.set(os,o),Ag(os,c,o)}then(i){return Zo(Fi,this).then(i)}finally(i){return Zo(Fi,this).finally(i)}}const Ag=(s,i,a)=>new Promise((o,c)=>{const u=h=>{s.close({isDismissed:!0,dismiss:h})};In.swalPromiseResolve.set(s,o),In.swalPromiseReject.set(s,c),i.confirmButton.onclick=()=>{Ep(s)},i.denyButton.onclick=()=>{Op(s)},i.cancelButton.onclick=()=>{Mp(s,u)},i.closeButton.onclick=()=>{u(qn.close)},Wp(a,i,u),ep(ue,a,u),_p(s,a),_g(a),Og(ue,a,u),Mg(i,a),setTimeout(()=>{i.container.scrollTop=0})}),Tg=(s,i)=>{const a=fg(s),o=Object.assign({},En,i,a,s);return o.showClass=Object.assign({},En.showClass,o.showClass),o.hideClass=Object.assign({},En.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},Eg=s=>{const i={popup:ze(),container:Ct(),actions:bi(),confirmButton:ls(),denyButton:an(),cancelButton:Hn(),loader:Un(),closeButton:jr(),validationMessage:ma(),progressSteps:wr()};return Ve.domCache.set(s,i),i},Og=(s,i,a)=>{const o=fa();jt(o),i.timer&&(s.timeout=new mg(()=>{a("timer"),delete s.timeout},i.timer),i.timerProgressBar&&(xt(o),$t(o,i,"timerProgressBar"),setTimeout(()=>{s.timeout&&s.timeout.running&&kr(i.timer)})))},Mg=(s,i)=>{if(!i.toast){if(!ha(i.allowEnterKey)){Vl("allowEnterKey"),Bg();return}Ig(s)||Dg(s,i)||nr(-1,1)}},Ig=s=>{const i=Array.from(s.popup.querySelectorAll("[autofocus]"));for(const a of i)if(a instanceof HTMLElement&&Dt(a))return a.focus(),!0;return!1},Dg=(s,i)=>i.focusDeny&&Dt(s.denyButton)?(s.denyButton.focus(),!0):i.focusCancel&&Dt(s.cancelButton)?(s.cancelButton.focus(),!0):i.focusConfirm&&Dt(s.confirmButton)?(s.confirmButton.focus(),!0):!1,Bg=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};ct.prototype.disableButtons=jc;ct.prototype.enableButtons=wc;ct.prototype.getInput=vc;ct.prototype.disableInput=Nc;ct.prototype.enableInput=_c;ct.prototype.hideLoading=ea;ct.prototype.disableLoading=ea;ct.prototype.showValidationMessage=Sc;ct.prototype.resetValidationMessage=kc;ct.prototype.close=Ds;ct.prototype.closePopup=Ds;ct.prototype.closeModal=Ds;ct.prototype.closeToast=Ds;ct.prototype.rejectPromise=fc;ct.prototype.update=Tc;ct.prototype._destroy=Ec;Object.assign(ct,hg);Object.keys(qp).forEach(s=>{ct[s]=function(...i){return os&&os[s]?os[s](...i):null}});ct.DismissReason=qn;ct.version="11.22.4";const qe=ct;qe.default=qe;typeof document<"u"&&function(s,i){var a=s.createElement("style");if(s.getElementsByTagName("head")[0].appendChild(a),a.styleSheet)a.styleSheet.disabled||(a.styleSheet.cssText=i);else try{a.innerHTML=i}catch{a.innerText=i}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function zc({isOpen:s,onClose:i,onSave:a,initialAddress:o={}}){const[c,u]=p.useState({houseNo:"",street:"",landmark:"",city:"Jatani",state:"Odisha",pincode:"752054",fullAddress:"",...o}),[h,f]=p.useState(!1),[g,b]=p.useState({});p.useEffect(()=>{if(s){const y=[c.houseNo,c.street,c.landmark,c.city,c.state,c.pincode].filter(Boolean).join(", ");u(j=>({...j,fullAddress:y}))}},[c.houseNo,c.street,c.landmark,c.city,c.state,c.pincode,s]);const x=()=>{const y={};return c.houseNo.trim()||(y.houseNo="House/Flat/Block No. is required"),c.street.trim()||(y.street="Street/Area is required"),c.city.trim()||(y.city="City is required"),c.state.trim()||(y.state="State is required"),(!c.pincode.trim()||c.pincode.length!==6)&&(y.pincode="Valid 6-digit pincode is required"),b(y),Object.keys(y).length===0},_=async()=>{if(x()){f(!0);try{navigator.geolocation?navigator.geolocation.getCurrentPosition(y=>{const j={lat:y.coords.latitude,lng:y.coords.longitude},N={...c,coordinates:j};a(N)},()=>{a(c)}):a(c)}catch(y){console.error("Error saving address:",y),a(c)}finally{f(!1)}}},S=(y,j)=>{u(N=>({...N,[y]:j})),g[y]&&b(N=>({...N,[y]:""}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Mn,{className:"w-5 h-5 mr-2 text-blue-600"}),"Add Delivery Address"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Complete address is required for delivery"})]}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"House/Flat/Block No. *"}),e.jsx("input",{type:"text",value:c.houseNo,onChange:y=>S("houseNo",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.houseNo?"border-red-500":"border-gray-300"}`,placeholder:"Enter house/flat number"}),g.houseNo&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.houseNo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street / Area *"}),e.jsx("input",{type:"text",value:c.street,onChange:y=>S("street",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.street?"border-red-500":"border-gray-300"}`,placeholder:"Enter street name or area"}),g.street&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.street})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Landmark (optional)"}),e.jsx("input",{type:"text",value:c.landmark,onChange:y=>S("landmark",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Near hospital, school, etc."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),e.jsx("input",{type:"text",value:c.city,onChange:y=>S("city",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.city?"border-red-500":"border-gray-300"}`}),g.city&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("input",{type:"text",value:c.state,onChange:y=>S("state",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.state?"border-red-500":"border-gray-300"}`}),g.state&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),e.jsx("input",{type:"text",value:c.pincode,onChange:y=>S("pincode",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.pincode?"border-red-500":"border-gray-300"}`,maxLength:6,placeholder:"6 digits"}),g.pincode&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.pincode})]})]}),c.fullAddress&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Address Preview"}),e.jsx("p",{className:"text-sm text-gray-600",children:c.fullAddress})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsxs("button",{onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center",children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs("button",{onClick:_,disabled:h,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors flex items-center justify-center",children:[h?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(mi,{className:"w-4 h-4 mr-2"}),"Save and Continue"]})]})]})}):null}function zg(){const s=il(),i=ws(),[a,o]=p.useState(!1),[c,u]=p.useState(0),[h,f]=p.useState([]),[g,b]=p.useState(!1),[x,_]=p.useState(null),[S,y]=p.useState(""),j=s.state||{};let N=j.selectedDate||localStorage.getItem("selectedDate"),v=j.selectedTimeSlot||JSON.parse(localStorage.getItem("selectedTimeSlot")||"{}");console.log("📦 Final pickupTimeSlot:",v),p.useEffect(()=>{try{const F=JSON.parse(localStorage.getItem("cart")||"[]"),A=localStorage.getItem("selectedDate"),H=JSON.parse(localStorage.getItem("selectedTimeSlot")||"null"),K=JSON.parse(localStorage.getItem("deliveryAddress")||"null");if(f(F),N||(N=A),v||(v=H),K&&_(K),!F.length||!N||!v)throw new Error("Missing booking info");const I=F.reduce(($,W)=>{var te;const J=((te=W.service)==null?void 0:te.options)||[],U=W.selectedOptions.reduce((oe,le)=>{const ee=J.find(he=>he.id===le);return oe+((ee==null?void 0:ee.price)||0)},0);return $+U*W.quantity},0);u(I)}catch{qe.fire("Error","Invalid or missing cart data","error").then(()=>i("/mainapp"))}},[i]);const P=F=>{_(F),b(!1),localStorage.setItem("deliveryAddress",JSON.stringify(F))},E=()=>{b(!1)},z=async()=>{var A,H,K,I,$,W;if(!N||!v||h.length===0){qe.fire("Error","Incomplete booking data.","error");return}if(!x){b(!0);return}const F={label:((H=(A=v==null?void 0:v.period)==null?void 0:A.toLowerCase)==null?void 0:H.call(A))||"",range:((I=(K=v==null?void 0:v.time)==null?void 0:K.trim)==null?void 0:I.call(K))||""};console.log("✅ Sending formatted slot:",F),o(!0);try{const J=localStorage.getItem("token");await je.post("/api/booking/create-multi",{items:h.map(U=>{var te;return{productId:((te=U.service)==null?void 0:te._id)||U.productId,quantity:U.quantity,selectedOptions:U.selectedOptions||[]}}),pickupDate:N,pickupTimeSlot:F,totalAmount:c,paymentMethod:"cash",deliveryAddress:x,deliveryInstructions:S},{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}}),qe.fire("Order Placed","Cash on Delivery confirmed!","success"),localStorage.removeItem("cart"),localStorage.removeItem("selectedDate"),localStorage.removeItem("selectedTimeSlot"),localStorage.removeItem("quantity"),setTimeout(()=>i("/"),1e3)}catch(J){qe.fire("Error",((W=($=J.response)==null?void 0:$.data)==null?void 0:W.message)||"Something went wrong","error")}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>i(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(al,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Payment"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review your order and proceed"})]})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 border-t pt-3",children:[h.map((F,A)=>{var H;return e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsxs("span",{children:[F.name||((H=F.service)==null?void 0:H.name)," x ",F.quantity]}),e.jsxs("span",{children:["₹",F.selectedOptions.reduce((K,I)=>{var W,J;const $=(J=(W=F==null?void 0:F.service)==null?void 0:W.options)==null?void 0:J.find(U=>U.id===I);return K+(($==null?void 0:$.price)||0)},0)*F.quantity]})]},A)}),e.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900 pt-2 border-t",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["₹",c.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Mn,{className:"w-5 h-5 mr-2 text-blue-600"}),"Delivery Address"]}),!x&&e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Required"})]}),x?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-700 font-medium mb-1",children:"Delivery Address:"}),e.jsx("p",{className:"text-sm text-gray-600",children:x.fullAddress}),S&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-medium mb-1",children:"Delivery Instructions:"}),e.jsx("p",{className:"text-sm text-gray-600",children:S})]})]}),e.jsx("button",{onClick:()=>b(!0),className:"text-blue-600 text-sm font-medium hover:text-blue-700 ml-4",children:"Edit"})]})}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Address Required"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Please add your delivery address to continue"})]}),e.jsx("button",{onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700",children:"Add Address"})]})})]}),x&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delivery Instructions (Optional)"}),e.jsx("textarea",{value:S,onChange:F=>y(F.target.value),placeholder:"Any special instructions for delivery (e.g., call before delivery, leave at gate, etc.)",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),e.jsx("div",{className:"space-y-4 mb-8",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border-2 border-green-500 bg-green-50",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-500",children:e.jsx(pu,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Cash on Delivery"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay with cash upon delivery"})]})]}),e.jsx(au,{className:"w-5 h-5 text-green-600"})]})})})}),e.jsx("button",{onClick:z,disabled:a,className:`w-full py-4 px-6 rounded-2xl font-semibold text-white ${a?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-lime-500 hover:from-green-700 hover:to-lime-600"}`,children:a?"Processing...":"Place Order"})]}),e.jsx(zc,{isOpen:g,onClose:E,onSave:P,initialAddress:x||void 0})]})}const Rg=()=>{const[s,i]=p.useState(""),[a,o]=p.useState(""),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[g,b]=p.useState("customer"),x=ws(),_=async S=>{if(S.preventDefault(),!s||!a||!g){qe.fire({icon:"warning",title:"Missing Information",text:"Please fill in all fields",confirmButtonColor:"#3B82F6"});return}if(!s.includes("@")){qe.fire({icon:"error",title:"Invalid Email",text:"Please enter a valid email address",confirmButtonColor:"#3B82F6"});return}f(!0);try{const y=await lt("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:a,role:g})}),j=await y.json();if(f(!1),y.ok){if(qe.fire({icon:"success",title:"Welcome Back!",text:j.message||"You have successfully signed in",confirmButtonColor:"#3B82F6",timer:1e3,timerProgressBar:!0}),j.token)if(localStorage.setItem("token",j.token),j.userId)localStorage.setItem("userId",j.userId);else{const N=JSON.parse(atob(j.token.split(".")[1]));N.userId&&localStorage.setItem("userId",N.userId),N.role&&localStorage.setItem("role",N.role)}g==="customer"?x("/mainapp"):g==="washerman"?x("/LaundrymanDashboard"):g==="admin"&&x("/AdminDashboard")}else qe.fire({icon:"error",title:"Sign In Failed",text:j.message||"Invalid email or password",confirmButtonColor:"#3B82F6"})}catch(y){f(!1),qe.fire({icon:"error",title:"Server Error",text:"Something went wrong. Please try again later.",confirmButtonColor:"#3B82F6"}),console.error("SignIn error:",y)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center relative bg-white px-4 py-10 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/20 via-purple-400/20 to-pink-400/20"}),e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-200/30 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-purple-200/30 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-pink-200/30 rounded-full blur-3xl animate-pulse delay-500"})]}),e.jsx("div",{className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(fi,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent mb-2",children:"DhobiXpress"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Please sign in to your account"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Continue with email"})})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:s,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50/50",placeholder:"Enter your email"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"password",type:c?"text":"password",value:a,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50/50",placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:c?e.jsx(rl,{className:"w-5 h-5"}):e.jsx(ol,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"role",className:"text-sm font-medium text-gray-700",children:"Select Role"}),e.jsxs("select",{id:"role",value:g,onChange:S=>b(S.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"washerman",children:"Dhobi"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",onClick:async()=>{const{value:S}=await qe.fire({title:"Forgot Password",input:"email",inputLabel:"Enter your registered email address",inputPlaceholder:"you@example.com",confirmButtonText:"Send Reset Link",confirmButtonColor:"#3B82F6",showCancelButton:!0,cancelButtonColor:"#d33",inputValidator:y=>{if(y){if(!y.includes("@"))return"Invalid email format"}else return"Email is required"}});if(S)try{const y=await lt("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:S})}),j=await y.json();y.ok?qe.fire({icon:"success",title:"Email Sent!",text:"A password reset link has been sent to your email.",confirmButtonColor:"#3B82F6"}):qe.fire({icon:"error",title:"Failed to Send",text:j.message||"Email not found or server error.",confirmButtonColor:"#3B82F6"})}catch{qe.fire({icon:"error",title:"Server Error",text:"Something went wrong. Please try again later.",confirmButtonColor:"#3B82F6"})}},className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-70 disabled:cursor-not-allowed shadow-lg",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing In..."]}):"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx(Qt,{to:"/signup",className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Sign up here"})]})})]})})]})},Fg=()=>{const[s,i]=p.useState({fullName:"",email:"",password:"",contact:"",confirmPassword:"",role:"customer"}),[a,o]=p.useState(!1),[c,u]=p.useState(!1),[h,f]=p.useState(!1),g=ws(),b=S=>{const{name:y,value:j}=S.target;i(N=>({...N,[y]:j}))},x=()=>{const{fullName:S,email:y,password:j,confirmPassword:N,contact:v}=s;return!S||!y||!j||!N||!v?(qe.fire({icon:"warning",title:"Missing Information",text:"Please fill in all fields",confirmButtonColor:"#3B82F6"}),!1):y.includes("@")?j.length<6?(qe.fire({icon:"error",title:"Password Too Short",text:"Password must be at least 6 characters long",confirmButtonColor:"#3B82F6"}),!1):j!==N?(qe.fire({icon:"error",title:"Passwords Don't Match",text:"Please make sure both passwords match",confirmButtonColor:"#3B82F6"}),!1):!0:(qe.fire({icon:"error",title:"Invalid Email",text:"Please enter a valid email address",confirmButtonColor:"#3B82F6"}),!1)},_=async S=>{if(S.preventDefault(),!!x()){f(!0);try{const y=await lt("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.fullName,email:s.email,password:s.password,role:s.role,contact:s.contact})}),j=await y.json();if(!y.ok)throw new Error(j.message||"Signup failed");qe.fire({icon:"success",title:"Account Created!",text:j.message||"Signup successful.",confirmButtonColor:"#3B82F6",timer:1500,timerProgressBar:!0}),g("/signin")}catch(y){qe.fire({icon:"error",title:"Signup Error",text:y.message||"Unexpected error. Please try again.",confirmButtonColor:"#3B82F6"})}finally{f(!1)}}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center relative bg-white px-4 py-10 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400/20 via-pink-400/20 to-blue-400/20"}),e.jsx("div",{className:"absolute top-32 right-20 w-28 h-28 bg-purple-200/30 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-32 left-16 w-36 h-36 bg-pink-200/30 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/3 right-10 w-20 h-20 bg-blue-200/30 rounded-full blur-3xl animate-pulse delay-700"})]}),e.jsx("div",{className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(fi,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent mb-2",children:"Join DhobiXpress"}),e.jsx("p",{className:"text-gray-600",children:"Create your account and get started!"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-5",children:[e.jsx(ri,{id:"fullName",label:"Full Name",icon:e.jsx(hr,{}),placeholder:"Enter your full name",name:"fullName",value:s.fullName,onChange:b}),e.jsx(ri,{id:"email",label:"Email Address",icon:e.jsx(ur,{}),placeholder:"Enter your email",type:"email",name:"email",value:s.email,onChange:b}),e.jsx(ri,{id:"contact",label:"Contact Number",icon:e.jsx(ul,{}),placeholder:"Enter your contact number",type:"tel",name:"contact",value:s.contact,onChange:b}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"role",className:"text-sm font-medium text-gray-700",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:s.role,onChange:b,className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"washerman",children:"Washerman"})]})]}),e.jsx(ri,{id:"password",label:"Password",icon:e.jsx(Wa,{}),placeholder:"Create a password",type:a?"text":"password",name:"password",value:s.password,onChange:b,toggleVisibility:()=>o(!a),visible:a}),e.jsx(ri,{id:"confirmPassword",label:"Confirm Password",icon:e.jsx(Wa,{}),placeholder:"Confirm your password",type:c?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:b,toggleVisibility:()=>u(!c),visible:c}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 rounded-xl transition duration-200 transform hover:scale-[1.02] disabled:opacity-70 disabled:cursor-not-allowed shadow-lg",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating Account..."]}):"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx(Qt,{to:"/signin",className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Sign in here"})]})})]})})]})},ri=({id:s,label:i,icon:a,placeholder:o,type:c="text",name:u,value:h,onChange:f,toggleVisibility:g,visible:b})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700",children:i}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:a}),e.jsx("input",{id:s,name:u,type:c,value:h,onChange:f,placeholder:o,className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50/50 transition-all"}),g&&e.jsx("button",{type:"button",onClick:g,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?e.jsx(rl,{className:"w-5 h-5"}):e.jsx(ol,{className:"w-5 h-5"})})]})]});function Rc(s,i){const a=p.useRef(i);p.useEffect(function(){i!==a.current&&s.attributionControl!=null&&(a.current!=null&&s.attributionControl.removeAttribution(a.current),i!=null&&s.attributionControl.addAttribution(i)),a.current=i},[s,i])}function $g(s,i,a){i.center!==a.center&&s.setLatLng(i.center),i.radius!=null&&i.radius!==a.radius&&s.setRadius(i.radius)}const Zg=1;function Hg(s){return Object.freeze({__version:Zg,map:s})}function Fc(s,i){return Object.freeze({...s,...i})}const $c=p.createContext(null),Zc=$c.Provider;function xa(){const s=p.useContext($c);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function Hc(s){function i(a,o){const{instance:c,context:u}=s(a).current;return p.useImperativeHandle(o,()=>c),a.children==null?null:qi.createElement(Zc,{value:u},a.children)}return p.forwardRef(i)}function Ug(s){function i(a,o){const[c,u]=p.useState(!1),{instance:h}=s(a,u).current;p.useImperativeHandle(o,()=>h),p.useEffect(function(){c&&h.update()},[h,c,a.children]);const f=h._contentNode;return f?Zd.createPortal(a.children,f):null}return p.forwardRef(i)}function qg(s){function i(a,o){const{instance:c}=s(a).current;return p.useImperativeHandle(o,()=>c),null}return p.forwardRef(i)}function Er(s,i){const a=p.useRef();p.useEffect(function(){return i!=null&&s.instance.on(i),a.current=i,function(){a.current!=null&&s.instance.off(a.current),a.current=null}},[s,i])}function va(s,i){const a=s.pane??i.pane;return a?{...s,pane:a}:s}function Wg(s,i){return function(o,c){const u=xa(),h=s(va(o,u),u);return Rc(u.map,o.attribution),Er(h.current,o.eventHandlers),i(h.current,u,o,c),h}}var li={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Vg=li.exports,Qo;function Gg(){return Qo||(Qo=1,function(s,i){(function(a,o){o(i)})(Vg,function(a){var o="1.9.4";function c(t){var n,r,l,d;for(r=1,l=arguments.length;r<l;r++){d=arguments[r];for(n in d)t[n]=d[n]}return t}var u=Object.create||function(){function t(){}return function(n){return t.prototype=n,new t}}();function h(t,n){var r=Array.prototype.slice;if(t.bind)return t.bind.apply(t,r.call(arguments,1));var l=r.call(arguments,2);return function(){return t.apply(n,l.length?l.concat(r.call(arguments)):arguments)}}var f=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function b(t,n,r){var l,d,m,w;return w=function(){l=!1,d&&(m.apply(r,d),d=!1)},m=function(){l?d=arguments:(t.apply(r,arguments),setTimeout(w,n),l=!0)},m}function x(t,n,r){var l=n[1],d=n[0],m=l-d;return t===l&&r?t:((t-d)%m+m)%m+d}function _(){return!1}function S(t,n){if(n===!1)return t;var r=Math.pow(10,n===void 0?6:n);return Math.round(t*r)/r}function y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function j(t){return y(t).split(/\s+/)}function N(t,n){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var r in n)t.options[r]=n[r];return t.options}function v(t,n,r){var l=[];for(var d in t)l.push(encodeURIComponent(r?d.toUpperCase():d)+"="+encodeURIComponent(t[d]));return(!n||n.indexOf("?")===-1?"?":"&")+l.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function E(t,n){return t.replace(P,function(r,l){var d=n[l];if(d===void 0)throw new Error("No value provided for variable "+r);return typeof d=="function"&&(d=d(n)),d})}var z=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function F(t,n){for(var r=0;r<t.length;r++)if(t[r]===n)return r;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var K=0;function I(t){var n=+new Date,r=Math.max(0,16-(n-K));return K=n+r,window.setTimeout(t,r)}var $=window.requestAnimationFrame||H("RequestAnimationFrame")||I,W=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function J(t,n,r){if(r&&$===I)t.call(n);else return $.call(window,h(t,n))}function U(t){t&&W.call(window,t)}var te={__proto__:null,extend:c,create:u,bind:h,get lastId(){return f},stamp:g,throttle:b,wrapNum:x,falseFn:_,formatNum:S,trim:y,splitWords:j,setOptions:N,getParamString:v,template:E,isArray:z,indexOf:F,emptyImageUrl:A,requestFn:$,cancelFn:W,requestAnimFrame:J,cancelAnimFrame:U};function oe(){}oe.extend=function(t){var n=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,l=u(r);l.constructor=n,n.prototype=l;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(n[d]=this[d]);return t.statics&&c(n,t.statics),t.includes&&(le(t.includes),c.apply(null,[l].concat(t.includes))),c(l,t),delete l.statics,delete l.includes,l.options&&(l.options=r.options?u(r.options):{},c(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,w=l._initHooks.length;m<w;m++)l._initHooks[m].call(this)}},n},oe.include=function(t){var n=this.prototype.options;return c(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},oe.mergeOptions=function(t){return c(this.prototype.options,t),this},oe.addInitHook=function(t){var n=Array.prototype.slice.call(arguments,1),r=typeof t=="function"?t:function(){this[t].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function le(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=z(t)?t:[t];for(var n=0;n<t.length;n++)t[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(t,n,r){if(typeof t=="object")for(var l in t)this._on(l,t[l],n);else{t=j(t);for(var d=0,m=t.length;d<m;d++)this._on(t[d],n,r)}return this},off:function(t,n,r){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],n);else{t=j(t);for(var d=arguments.length===1,m=0,w=t.length;m<w;m++)d?this._off(t[m]):this._off(t[m],n,r)}return this},_on:function(t,n,r,l){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}if(this._listens(t,n,r)===!1){r===this&&(r=void 0);var d={fn:n,ctx:r};l&&(d.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(d)}},_off:function(t,n,r){var l,d,m;if(this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(d=0,m=l.length;d<m;d++)l[d].fn=_;delete this._events[t];return}if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}var w=this._listens(t,n,r);if(w!==!1){var C=l[w];this._firingCount&&(C.fn=_,this._events[t]=l=l.slice()),l.splice(w,1)}}},fire:function(t,n,r){if(!this.listens(t,r))return this;var l=c({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var d=this._events[t];if(d){this._firingCount=this._firingCount+1||1;for(var m=0,w=d.length;m<w;m++){var C=d[m],T=C.fn;C.once&&this.off(t,T,C.ctx),T.call(C.ctx||this,l)}this._firingCount--}}return r&&this._propagateEvent(l),this},listens:function(t,n,r,l){typeof t!="string"&&console.warn('"string" type argument expected');var d=n;typeof n!="function"&&(l=!!n,d=void 0,r=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,d,r)!==!1)return!0;if(l){for(var w in this._eventParents)if(this._eventParents[w].listens(t,n,r,l))return!0}return!1},_listens:function(t,n,r){if(!this._events)return!1;var l=this._events[t]||[];if(!n)return!!l.length;r===this&&(r=void 0);for(var d=0,m=l.length;d<m;d++)if(l[d].fn===n&&l[d].ctx===r)return d;return!1},once:function(t,n,r){if(typeof t=="object")for(var l in t)this._on(l,t[l],n,!0);else{t=j(t);for(var d=0,m=t.length;d<m;d++)this._on(t[d],n,r,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var he=oe.extend(ee);function X(t,n,r){this.x=r?Math.round(t):t,this.y=r?Math.round(n):n}var st=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(t){return this.clone()._add(ae(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(ae(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new X(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new X(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=st(this.x),this.y=st(this.y),this},distanceTo:function(t){t=ae(t);var n=t.x-this.x,r=t.y-this.y;return Math.sqrt(n*n+r*r)},equals:function(t){return t=ae(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=ae(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function ae(t,n,r){return t instanceof X?t:z(t)?new X(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new X(t.x,t.y):new X(t,n,r)}function fe(t,n){if(t)for(var r=n?[t,n]:t,l=0,d=r.length;l<d;l++)this.extend(r[l])}fe.prototype={extend:function(t){var n,r;if(!t)return this;if(t instanceof X||typeof t[0]=="number"||"x"in t)n=r=ae(t);else if(t=be(t),n=t.min,r=t.max,!n||!r)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=r.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(t){return ae((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return ae(this.min.x,this.max.y)},getTopRight:function(){return ae(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,r;return typeof t[0]=="number"||t instanceof X?t=ae(t):t=be(t),t instanceof fe?(n=t.min,r=t.max):n=r=t,n.x>=this.min.x&&r.x<=this.max.x&&n.y>=this.min.y&&r.y<=this.max.y},intersects:function(t){t=be(t);var n=this.min,r=this.max,l=t.min,d=t.max,m=d.x>=n.x&&l.x<=r.x,w=d.y>=n.y&&l.y<=r.y;return m&&w},overlaps:function(t){t=be(t);var n=this.min,r=this.max,l=t.min,d=t.max,m=d.x>n.x&&l.x<r.x,w=d.y>n.y&&l.y<r.y;return m&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var n=this.min,r=this.max,l=Math.abs(n.x-r.x)*t,d=Math.abs(n.y-r.y)*t;return be(ae(n.x-l,n.y-d),ae(r.x+l,r.y+d))},equals:function(t){return t?(t=be(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function be(t,n){return!t||t instanceof fe?t:new fe(t,n)}function Pe(t,n){if(t)for(var r=n?[t,n]:t,l=0,d=r.length;l<d;l++)this.extend(r[l])}Pe.prototype={extend:function(t){var n=this._southWest,r=this._northEast,l,d;if(t instanceof ce)l=t,d=t;else if(t instanceof Pe){if(l=t._southWest,d=t._northEast,!l||!d)return this}else return t?this.extend(B(t)||Le(t)):this;return!n&&!r?(this._southWest=new ce(l.lat,l.lng),this._northEast=new ce(d.lat,d.lng)):(n.lat=Math.min(l.lat,n.lat),n.lng=Math.min(l.lng,n.lng),r.lat=Math.max(d.lat,r.lat),r.lng=Math.max(d.lng,r.lng)),this},pad:function(t){var n=this._southWest,r=this._northEast,l=Math.abs(n.lat-r.lat)*t,d=Math.abs(n.lng-r.lng)*t;return new Pe(new ce(n.lat-l,n.lng-d),new ce(r.lat+l,r.lng+d))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ce||"lat"in t?t=B(t):t=Le(t);var n=this._southWest,r=this._northEast,l,d;return t instanceof Pe?(l=t.getSouthWest(),d=t.getNorthEast()):l=d=t,l.lat>=n.lat&&d.lat<=r.lat&&l.lng>=n.lng&&d.lng<=r.lng},intersects:function(t){t=Le(t);var n=this._southWest,r=this._northEast,l=t.getSouthWest(),d=t.getNorthEast(),m=d.lat>=n.lat&&l.lat<=r.lat,w=d.lng>=n.lng&&l.lng<=r.lng;return m&&w},overlaps:function(t){t=Le(t);var n=this._southWest,r=this._northEast,l=t.getSouthWest(),d=t.getNorthEast(),m=d.lat>n.lat&&l.lat<r.lat,w=d.lng>n.lng&&l.lng<r.lng;return m&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,n){return t?(t=Le(t),this._southWest.equals(t.getSouthWest(),n)&&this._northEast.equals(t.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(t,n){return t instanceof Pe?t:new Pe(t,n)}function ce(t,n,r){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n,r!==void 0&&(this.alt=+r)}ce.prototype={equals:function(t,n){if(!t)return!1;t=B(t);var r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(n===void 0?1e-9:n)},toString:function(t){return"LatLng("+S(this.lat,t)+", "+S(this.lng,t)+")"},distanceTo:function(t){return me.distance(this,B(t))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return Le([this.lat-n,this.lng-r],[this.lat+n,this.lng+r])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function B(t,n,r){return t instanceof ce?t:z(t)&&typeof t[0]!="object"?t.length===3?new ce(t[0],t[1],t[2]):t.length===2?new ce(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ce(t.lat,"lng"in t?t.lng:t.lon,t.alt):n===void 0?null:new ce(t,n,r)}var Y={latLngToPoint:function(t,n){var r=this.projection.project(t),l=this.scale(n);return this.transformation._transform(r,l)},pointToLatLng:function(t,n){var r=this.scale(n),l=this.transformation.untransform(t,r);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var n=this.projection.bounds,r=this.scale(t),l=this.transformation.transform(n.min,r),d=this.transformation.transform(n.max,r);return new fe(l,d)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new ce(r,n,l)},wrapLatLngBounds:function(t){var n=t.getCenter(),r=this.wrapLatLng(n),l=n.lat-r.lat,d=n.lng-r.lng;if(l===0&&d===0)return t;var m=t.getSouthWest(),w=t.getNorthEast(),C=new ce(m.lat-l,m.lng-d),T=new ce(w.lat-l,w.lng-d);return new Pe(C,T)}},me=c({},Y,{wrapLng:[-180,180],R:6371e3,distance:function(t,n){var r=Math.PI/180,l=t.lat*r,d=n.lat*r,m=Math.sin((n.lat-t.lat)*r/2),w=Math.sin((n.lng-t.lng)*r/2),C=m*m+Math.cos(l)*Math.cos(d)*w*w,T=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*T}}),Oe=6378137,de={R:Oe,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,r=this.MAX_LATITUDE,l=Math.max(Math.min(r,t.lat),-r),d=Math.sin(l*n);return new X(this.R*t.lng*n,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(t){var n=180/Math.PI;return new ce((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*n,t.x*n/this.R)},bounds:function(){var t=Oe*Math.PI;return new fe([-t,-t],[t,t])}()};function we(t,n,r,l){if(z(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=n,this._c=r,this._d=l}we.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new X((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}};function mt(t,n,r,l){return new we(t,n,r,l)}var Z=c({},me,{code:"EPSG:3857",projection:de,transformation:function(){var t=.5/(Math.PI*de.R);return mt(t,.5,-t,.5)}()}),q=c({},Z,{code:"EPSG:900913"});function re(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function pe(t,n){var r="",l,d,m,w,C,T;for(l=0,m=t.length;l<m;l++){for(C=t[l],d=0,w=C.length;d<w;d++)T=C[d],r+=(d?"L":"M")+T.x+" "+T.y;r+=n?ie.svg?"z":"x":""}return r||"M0 0"}var Ae=document.documentElement.style,Ce="ActiveXObject"in window,Fe=Ce&&!document.addEventListener,Pt="msLaunchUri"in navigator&&!("documentMode"in document),vt=_t("webkit"),et=_t("android"),cs=_t("android 2")||_t("android 3"),Lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ft=et&&_t("Google")&&Lt<537&&!("AudioNode"in window),R=!!window.opera,G=!Pt&&_t("chrome"),ne=_t("gecko")&&!vt&&!R&&!Ce,xe=!G&&_t("safari"),Ie=_t("phantom"),De="OTransition"in Ae,ve=navigator.platform.indexOf("Win")===0,yt=Ce&&"transition"in Ae,nt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!cs,pt="MozPerspective"in Ae,ss=!window.L_DISABLE_3D&&(yt||nt||pt)&&!De&&!Ie,Ge=typeof orientation<"u"||_t("mobile"),ds=Ge&&vt,us=Ge&&nt,js=!window.PointerEvent&&window.MSPointerEvent,Je=!!(window.PointerEvent||js),_s="ontouchstart"in window||!!window.TouchEvent,Ns=!window.L_NO_TOUCH&&(_s||Je),rn=Ge&&R,Vn=Ge&&ne,on=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ni=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,n),window.removeEventListener("testPassiveEventSupport",_,n)}catch{}return t}(),Gn=function(){return!!document.createElement("canvas").getContext}(),Vt=!!(document.createElementNS&&re("svg").createSVGRect),ln=!!Vt&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),cn=!Vt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch{return!1}}(),hs=navigator.platform.indexOf("Mac")===0,Ss=navigator.platform.indexOf("Linux")===0;function _t(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ie={ie:Ce,ielt9:Fe,edge:Pt,webkit:vt,android:et,android23:cs,androidStock:ft,opera:R,chrome:G,gecko:ne,safari:xe,phantom:Ie,opera12:De,win:ve,ie3d:yt,webkit3d:nt,gecko3d:pt,any3d:ss,mobile:Ge,mobileWebkit:ds,mobileWebkit3d:us,msPointer:js,pointer:Je,touch:Ns,touchNative:_s,mobileOpera:rn,mobileGecko:Vn,retina:on,passiveEvents:Ni,canvas:Gn,svg:Vt,vml:cn,inlineSvg:ln,mac:hs,linux:Ss},dn=ie.msPointer?"MSPointerDown":"pointerdown",ms=ie.msPointer?"MSPointerMove":"pointermove",ks=ie.msPointer?"MSPointerUp":"pointerup",Rs=ie.msPointer?"MSPointerCancel":"pointercancel",At={touchstart:dn,touchmove:ms,touchend:ks,touchcancel:Rs},Fs={touchstart:Ze,touchmove:se,touchend:se,touchcancel:se},Gt={},Bt=!1;function $s(t,n,r){return n==="touchstart"&&k(),Fs[n]?(r=Fs[n].bind(this,r),t.addEventListener(At[n],r,!1),r):(console.warn("wrong event specified:",n),_)}function un(t,n,r){if(!At[n]){console.warn("wrong event specified:",n);return}t.removeEventListener(At[n],r,!1)}function Cs(t){Gt[t.pointerId]=t}function hn(t){Gt[t.pointerId]&&(Gt[t.pointerId]=t)}function Zs(t){delete Gt[t.pointerId]}function k(){Bt||(document.addEventListener(dn,Cs,!0),document.addEventListener(ms,hn,!0),document.addEventListener(ks,Zs,!0),document.addEventListener(Rs,Zs,!0),Bt=!0)}function se(t,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var r in Gt)n.touches.push(Gt[r]);n.changedTouches=[n],t(n)}}function Ze(t,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&Qe(n),se(t,n)}function it(t){var n={},r,l;for(l in t)r=t[l],n[l]=r&&r.bind?r.bind(t):r;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var Ue=200;function bt(t,n){t.addEventListener("dblclick",n);var r=0,l;function d(m){if(m.detail!==1){l=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var w=Nt(m);if(!(w.some(function(T){return T instanceof HTMLLabelElement&&T.attributes.for})&&!w.some(function(T){return T instanceof HTMLInputElement||T instanceof HTMLSelectElement}))){var C=Date.now();C-r<=Ue?(l++,l===2&&n(it(m))):l=1,r=C}}}return t.addEventListener("click",d),{dblclick:n,simDblclick:d}}function Tt(t,n){t.removeEventListener("dblclick",n.dblclick),t.removeEventListener("click",n.simDblclick)}var He=gn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ns=gn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Hs=ns==="webkitTransition"||ns==="OTransition"?ns+"End":"transitionend";function Us(t){return typeof t=="string"?document.getElementById(t):t}function Jt(t,n){var r=t.style[n]||t.currentStyle&&t.currentStyle[n];if((!r||r==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);r=l?l[n]:null}return r==="auto"?null:r}function Ee(t,n,r){var l=document.createElement(t);return l.className=n||"",r&&r.appendChild(l),l}function Ye(t){var n=t.parentNode;n&&n.removeChild(t)}function mn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function We(t){var n=t.parentNode;n&&n.lastChild!==t&&n.appendChild(t)}function qs(t){var n=t.parentNode;n&&n.firstChild!==t&&n.insertBefore(t,n.firstChild)}function Jn(t,n){if(t.classList!==void 0)return t.classList.contains(n);var r=pn(t);return r.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(r)}function Se(t,n){if(t.classList!==void 0)for(var r=j(n),l=0,d=r.length;l<d;l++)t.classList.add(r[l]);else if(!Jn(t,n)){var m=pn(t);fn(t,(m?m+" ":"")+n)}}function Xe(t,n){t.classList!==void 0?t.classList.remove(n):fn(t,y((" "+pn(t)+" ").replace(" "+n+" "," ")))}function fn(t,n){t.className.baseVal===void 0?t.className=n:t.className.baseVal=n}function pn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Et(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&wa(t,n)}function wa(t,n){var r=!1,l="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(l)}catch{if(n===1)return}n=Math.round(n*100),r?(r.Enabled=n!==100,r.Opacity=n):t.style.filter+=" progid:"+l+"(opacity="+n+")"}function gn(t){for(var n=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in n)return t[r];return!1}function Ps(t,n,r){var l=n||new X(0,0);t.style[He]=(ie.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(r?" scale("+r+")":"")}function rt(t,n){t._leaflet_pos=n,ie.any3d?Ps(t,n):(t.style.left=n.x+"px",t.style.top=n.y+"px")}function zt(t){return t._leaflet_pos||new X(0,0)}var Ws,Vs,xn;if("onselectstart"in document)Ws=function(){_e(window,"selectstart",Qe)},Vs=function(){$e(window,"selectstart",Qe)};else{var Ls=gn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ws=function(){if(Ls){var t=document.documentElement.style;xn=t[Ls],t[Ls]="none"}},Vs=function(){Ls&&(document.documentElement.style[Ls]=xn,xn=void 0)}}function vn(){_e(window,"dragstart",Qe)}function yn(){$e(window,"dragstart",Qe)}var Gs,bn;function wn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Js(),Gs=t,bn=t.style.outlineStyle,t.style.outlineStyle="none",_e(window,"keydown",Js))}function Js(){Gs&&(Gs.style.outlineStyle=bn,Gs=void 0,bn=void 0,$e(window,"keydown",Js))}function Yn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function jn(t){var n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}var Si={__proto__:null,TRANSFORM:He,TRANSITION:ns,TRANSITION_END:Hs,get:Us,getStyle:Jt,create:Ee,remove:Ye,empty:mn,toFront:We,toBack:qs,hasClass:Jn,addClass:Se,removeClass:Xe,setClass:fn,getClass:pn,setOpacity:Et,testProp:gn,setTransform:Ps,setPosition:rt,getPosition:zt,get disableTextSelection(){return Ws},get enableTextSelection(){return Vs},disableImageDrag:vn,enableImageDrag:yn,preventOutline:wn,restoreOutline:Js,getSizedParentNode:Yn,getScale:jn};function _e(t,n,r,l){if(n&&typeof n=="object")for(var d in n)O(t,d,n[d],r);else{n=j(n);for(var m=0,w=n.length;m<w;m++)O(t,n[m],r,l)}return this}var Rt="_leaflet_events";function $e(t,n,r,l){if(arguments.length===1)Kn(t),delete t[Rt];else if(n&&typeof n=="object")for(var d in n)Ne(t,d,n[d],r);else if(n=j(n),arguments.length===2)Kn(t,function(C){return F(n,C)!==-1});else for(var m=0,w=n.length;m<w;m++)Ne(t,n[m],r,l);return this}function Kn(t,n){for(var r in t[Rt]){var l=r.split(/\d/)[0];(!n||n(l))&&Ne(t,l,null,null,r)}}var _n={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function O(t,n,r,l){var d=n+g(r)+(l?"_"+g(l):"");if(t[Rt]&&t[Rt][d])return this;var m=function(C){return r.call(l||t,C||window.event)},w=m;!ie.touchNative&&ie.pointer&&n.indexOf("touch")===0?m=$s(t,n,m):ie.touch&&n==="dblclick"?m=bt(t,m):"addEventListener"in t?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?t.addEventListener(_n[n]||n,m,ie.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(m=function(C){C=C||window.event,ja(t,C)&&w(C)},t.addEventListener(_n[n],m,!1)):t.addEventListener(n,w,!1):t.attachEvent("on"+n,m),t[Rt]=t[Rt]||{},t[Rt][d]=m}function Ne(t,n,r,l,d){d=d||n+g(r)+(l?"_"+g(l):"");var m=t[Rt]&&t[Rt][d];if(!m)return this;!ie.touchNative&&ie.pointer&&n.indexOf("touch")===0?un(t,n,m):ie.touch&&n==="dblclick"?Tt(t,m):"removeEventListener"in t?t.removeEventListener(_n[n]||n,m,!1):t.detachEvent("on"+n,m),t[Rt][d]=null}function Be(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ke(t){return O(t,"wheel",Be),this}function at(t){return _e(t,"mousedown touchstart dblclick contextmenu",Be),t._leaflet_disable_click=!0,this}function Qe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Yt(t){return Qe(t),Be(t),this}function Nt(t){if(t.composedPath)return t.composedPath();for(var n=[],r=t.target;r;)n.push(r),r=r.parentNode;return n}function Ft(t,n){if(!n)return new X(t.clientX,t.clientY);var r=jn(n),l=r.boundingClientRect;return new X((t.clientX-l.left)/r.x-n.clientLeft,(t.clientY-l.top)/r.y-n.clientTop)}var Ir=ie.linux&&ie.chrome?window.devicePixelRatio:ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Dr(t){return ie.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Ir:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function ja(t,n){var r=n.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t}var Gc={__proto__:null,on:_e,off:$e,stopPropagation:Be,disableScrollPropagation:Ke,disableClickPropagation:at,preventDefault:Qe,stop:Yt,getPropagationPath:Nt,getMousePosition:Ft,getWheelDelta:Dr,isExternalTarget:ja,addListener:_e,removeListener:$e},Br=he.extend({run:function(t,n,r,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=zt(t),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=J(this._animate,this),this._step()},_step:function(t){var n=+new Date-this._startTime,r=this._duration*1e3;n<r?this._runFrame(this._easeOut(n/r),t):(this._runFrame(1),this._complete())},_runFrame:function(t,n){var r=this._startPos.add(this._offset.multiplyBy(t));n&&r._round(),rt(this._el,r),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Me=he.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,n){n=N(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(B(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ns&&ie.any3d&&!ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,Hs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){if(n=n===void 0?this._zoom:this._limitZoom(n),t=this._limitCenter(B(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=c({animate:r.animate},r.zoom),r.pan=c({animate:r.animate,duration:r.duration},r.pan));var l=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n,r.pan&&r.pan.noMoveStart),this},setZoom:function(t,n){return this._loaded?this.setView(this.getCenter(),t,{zoom:n}):(this._zoom=t,this)},zoomIn:function(t,n){return t=t||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,n)},zoomOut:function(t,n){return t=t||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,n)},setZoomAround:function(t,n,r){var l=this.getZoomScale(n),d=this.getSize().divideBy(2),m=t instanceof X?t:this.latLngToContainerPoint(t),w=m.subtract(d).multiplyBy(1-1/l),C=this.containerPointToLatLng(d.add(w));return this.setView(C,n,{zoom:r})},_getBoundsCenterZoom:function(t,n){n=n||{},t=t.getBounds?t.getBounds():Le(t);var r=ae(n.paddingTopLeft||n.padding||[0,0]),l=ae(n.paddingBottomRight||n.padding||[0,0]),d=this.getBoundsZoom(t,!1,r.add(l));if(d=typeof n.maxZoom=="number"?Math.min(n.maxZoom,d):d,d===1/0)return{center:t.getCenter(),zoom:d};var m=l.subtract(r).divideBy(2),w=this.project(t.getSouthWest(),d),C=this.project(t.getNorthEast(),d),T=this.unproject(w.add(C).divideBy(2).add(m),d);return{center:T,zoom:d}},fitBounds:function(t,n){if(t=Le(t),!t.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(t,n);return this.setView(r.center,r.zoom,n)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,n){return this.setView(t,this._zoom,{pan:n})},panBy:function(t,n){if(t=ae(t).round(),n=n||{},!t.x&&!t.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Br,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,r,n.duration||.25,n.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,n,r){if(r=r||{},r.animate===!1||!ie.any3d)return this.setView(t,n,r);this._stop();var l=this.project(this.getCenter()),d=this.project(t),m=this.getSize(),w=this._zoom;t=B(t),n=n===void 0?w:n;var C=Math.max(m.x,m.y),T=C*this.getZoomScale(w,n),V=d.distanceTo(l)||1,Q=1.42,ge=Q*Q;function Te(dt){var Bi=dt?-1:1,Dd=dt?T:C,Bd=T*T-C*C+Bi*ge*ge*V*V,zd=2*Dd*ge*V,Oa=Bd/zd,vo=Math.sqrt(Oa*Oa+1)-Oa,Rd=vo<1e-9?-18:Math.log(vo);return Rd}function St(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function gt(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function qt(dt){return St(dt)/gt(dt)}var Ot=Te(0);function Ln(dt){return C*(gt(Ot)/gt(Ot+Q*dt))}function Ed(dt){return C*(gt(Ot)*qt(Ot+Q*dt)-St(Ot))/ge}function Od(dt){return 1-Math.pow(1-dt,1.5)}var Md=Date.now(),go=(Te(1)-Ot)/Q,Id=r.duration?1e3*r.duration:1e3*go*.8;function xo(){var dt=(Date.now()-Md)/Id,Bi=Od(dt)*go;dt<=1?(this._flyToFrame=J(xo,this),this._move(this.unproject(l.add(d.subtract(l).multiplyBy(Ed(Bi)/V)),w),this.getScaleZoom(C/Ln(Bi),w),{flyTo:!0})):this._move(t,n)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),xo.call(this),this},flyToBounds:function(t,n){var r=this._getBoundsCenterZoom(t,n);return this.flyTo(r.center,r.zoom,n)},setMaxBounds:function(t){return t=Le(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var n=this.options.minZoom;return this.options.minZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var n=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,n){this._enforcingBounds=!0;var r=this.getCenter(),l=this._limitCenter(r,this._zoom,Le(t));return r.equals(l)||this.panTo(l,n),this._enforcingBounds=!1,this},panInside:function(t,n){n=n||{};var r=ae(n.paddingTopLeft||n.padding||[0,0]),l=ae(n.paddingBottomRight||n.padding||[0,0]),d=this.project(this.getCenter()),m=this.project(t),w=this.getPixelBounds(),C=be([w.min.add(r),w.max.subtract(l)]),T=C.getSize();if(!C.contains(m)){this._enforcingBounds=!0;var V=m.subtract(C.getCenter()),Q=C.extend(m).getSize().subtract(T);d.x+=V.x<0?-Q.x:Q.x,d.y+=V.y<0?-Q.y:Q.y,this.panTo(this.unproject(d),n),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),l=n.divideBy(2).round(),d=r.divideBy(2).round(),m=l.subtract(d);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=h(this._handleGeolocationResponse,this),r=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var n=t.code,r=t.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var n=t.coords.latitude,r=t.coords.longitude,l=new ce(n,r),d=l.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var w=this.getBoundsZoom(d);this.setView(l,m.maxZoom?Math.min(w,m.maxZoom):w)}var C={latlng:l,bounds:d,timestamp:t.timestamp};for(var T in t.coords)typeof t.coords[T]=="number"&&(C[T]=t.coords[T]);this.fire("locationfound",C)}},addHandler:function(t,n){if(!n)return this;var r=this[t]=new n(this);return this._handlers.push(r),this.options[t]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ye(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ye(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,n){var r="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=Ee("div",r,n||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),n=this.unproject(t.getBottomLeft()),r=this.unproject(t.getTopRight());return new Pe(n,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,n,r){t=Le(t),r=ae(r||[0,0]);var l=this.getZoom()||0,d=this.getMinZoom(),m=this.getMaxZoom(),w=t.getNorthWest(),C=t.getSouthEast(),T=this.getSize().subtract(r),V=be(this.project(C,l),this.project(w,l)).getSize(),Q=ie.any3d?this.options.zoomSnap:1,ge=T.x/V.x,Te=T.y/V.y,St=n?Math.max(ge,Te):Math.min(ge,Te);return l=this.getScaleZoom(St,l),Q&&(l=Math.round(l/(Q/100))*(Q/100),l=n?Math.ceil(l/Q)*Q:Math.floor(l/Q)*Q),Math.max(d,Math.min(m,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,n){var r=this._getTopLeftPoint(t,n);return new fe(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,n){var r=this.options.crs;return n=n===void 0?this._zoom:n,r.scale(t)/r.scale(n)},getScaleZoom:function(t,n){var r=this.options.crs;n=n===void 0?this._zoom:n;var l=r.zoom(t*r.scale(n));return isNaN(l)?1/0:l},project:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(B(t),n)},unproject:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(ae(t),n)},layerPointToLatLng:function(t){var n=ae(t).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(t){var n=this.project(B(t))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Le(t))},distance:function(t,n){return this.options.crs.distance(B(t),B(n))},containerPointToLayerPoint:function(t){return ae(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return ae(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var n=this.containerPointToLayerPoint(ae(t));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Ft(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var n=this._container=Us(t);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(n,"scroll",this._onScroll,this),this._containerId=g(n)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ie.any3d,Se(t,"leaflet-container"+(ie.touch?" leaflet-touch":"")+(ie.retina?" leaflet-retina":"")+(ie.ielt9?" leaflet-oldie":"")+(ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=Jt(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&n!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rt(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(t.markerPane,"leaflet-zoom-hide"),Se(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,n,r){rt(this._mapPane,new X(0,0));var l=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var d=this._zoom!==n;this._moveStart(d,r)._move(t,n)._moveEnd(d),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(t,n){return t&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(t,n,r,l){n===void 0&&(n=this._zoom);var d=this._zoom!==n;return this._zoom=n,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?r&&r.pinch&&this.fire("zoom",r):((d||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){rt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var n=t?$e:_e;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),ie.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=J(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,n){for(var r=[],l,d=n==="mouseout"||n==="mouseover",m=t.target||t.srcElement,w=!1;m;){if(l=this._targets[g(m)],l&&(n==="click"||n==="preclick")&&this._draggableMoved(l)){w=!0;break}if(l&&l.listens(n,!0)&&(d&&!ja(m,t)||(r.push(l),d))||m===this._container)break;m=m.parentNode}return!r.length&&!w&&!d&&this.listens(n,!0)&&(r=[this]),r},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var n=t.target||t.srcElement;if(!(!this._loaded||n._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(n))){var r=t.type;r==="mousedown"&&wn(n),this._fireDOMEvent(t,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if(t.type==="click"){var l=c({},t);l.type="preclick",this._fireDOMEvent(l,l.type,r)}var d=this._findEventTargets(t,n);if(r){for(var m=[],w=0;w<r.length;w++)r[w].listens(n,!0)&&m.push(r[w]);d=m.concat(d)}if(d.length){n==="contextmenu"&&Qe(t);var C=d[0],T={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var V=C.getLatLng&&(!C._radius||C._radius<=10);T.containerPoint=V?this.latLngToContainerPoint(C.getLatLng()):this.mouseEventToContainerPoint(t),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=V?C.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(w=0;w<d.length;w++)if(d[w].fire(n,T,!0),T.originalEvent._stopped||d[w].options.bubblingMouseEvents===!1&&F(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,n=this._handlers.length;t<n;t++)this._handlers[t].disable()},whenReady:function(t,n){return this._loaded?t.call(n||this,{target:this}):this.on("load",t,n),this},_getMapPanePos:function(){return zt(this._mapPane)||new X(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,n){var r=t&&n!==void 0?this._getNewPixelOrigin(t,n):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,n){var r=this.getSize()._divideBy(2);return this.project(t,n)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,n,r){var l=this._getNewPixelOrigin(r,n);return this.project(t,n)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,n,r){var l=this._getNewPixelOrigin(r,n);return be([this.project(t.getSouthWest(),n)._subtract(l),this.project(t.getNorthWest(),n)._subtract(l),this.project(t.getSouthEast(),n)._subtract(l),this.project(t.getNorthEast(),n)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,n,r){if(!r)return t;var l=this.project(t,n),d=this.getSize().divideBy(2),m=new fe(l.subtract(d),l.add(d)),w=this._getBoundsOffset(m,r,n);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?t:this.unproject(l.add(w),n)},_limitOffset:function(t,n){if(!n)return t;var r=this.getPixelBounds(),l=new fe(r.min.add(t),r.max.add(t));return t.add(this._getBoundsOffset(l,n))},_getBoundsOffset:function(t,n,r){var l=be(this.project(n.getNorthEast(),r),this.project(n.getSouthWest(),r)),d=l.min.subtract(t.min),m=l.max.subtract(t.max),w=this._rebound(d.x,-m.x),C=this._rebound(d.y,-m.y);return new X(w,C)},_rebound:function(t,n){return t+n>0?Math.round(t-n)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(n))},_limitZoom:function(t){var n=this.getMinZoom(),r=this.getMaxZoom(),l=ie.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(n,Math.min(r,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,n){var r=this._getCenterOffset(t)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,n),!0)},_createAnimProxy:function(){var t=this._proxy=Ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(n){var r=He,l=this._proxy.style[r];Ps(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),l===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ye(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),n=this.getZoom();Ps(this._proxy,this.project(t,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,n,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(n),d=this._getCenterOffset(t)._divideBy(1-1/l);return r.animate!==!0&&!this.getSize().contains(d)?!1:(J(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(t,n,!0)},this),!0)},_animateZoom:function(t,n,r,l){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:n,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Jc(t,n){return new Me(t,n)}var Kt=oe.extend({options:{position:"topright"},initialize:function(t){N(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var n=this._map;return n&&n.removeControl(this),this.options.position=t,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var n=this._container=this.onAdd(t),r=this.getPosition(),l=t._controlCorners[r];return Se(n,"leaflet-control"),r.indexOf("bottom")!==-1?l.insertBefore(n,l.firstChild):l.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ye(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xn=function(t){return new Kt(t)};Me.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=Ee("div",n+"control-container",this._container);function l(d,m){var w=n+d+" "+n+m;t[d+m]=Ee("div",w,r)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ye(this._controlCorners[t]);Ye(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zr=Kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,n,r,l){return r<l?-1:l<r?1:0}},initialize:function(t,n,r){N(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in n)this._addLayer(n[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Kt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,n){return this._addLayer(t,n),this._map?this._update():this},addOverlay:function(t,n){return this._addLayer(t,n,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var n=this._getLayer(g(t));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=Ee("div",t),r=this.options.collapsed;n.setAttribute("aria-haspopup",!0),at(n),Ke(n);var l=this._section=Ee("section",t+"-list");r&&(this._map.on("click",this.collapse,this),_e(n,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var d=this._layersLink=Ee("a",t+"-toggle",n);d.href="#",d.title="Layers",d.setAttribute("role","button"),_e(d,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){Qe(m),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=Ee("div",t+"-base",l),this._separator=Ee("div",t+"-separator",l),this._overlaysList=Ee("div",t+"-overlays",l),n.appendChild(l)},_getLayer:function(t){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&g(this._layers[n].layer)===t)return this._layers[n]},_addLayer:function(t,n,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:n,overlay:r}),this.options.sortLayers&&this._layers.sort(h(function(l,d){return this.options.sortFunction(l.layer,d.layer,l.name,d.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mn(this._baseLayersList),mn(this._overlaysList),this._layerControlInputs=[];var t,n,r,l,d=0;for(r=0;r<this._layers.length;r++)l=this._layers[r],this._addItem(l),n=n||l.overlay,t=t||!l.overlay,d+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&d>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var n=this._getLayer(g(t.target)),r=n.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;r&&this._map.fire(r,n)},_createRadioElement:function(t,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(n?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=r,l.firstChild},_addItem:function(t){var n=document.createElement("label"),r=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=r):l=this._createRadioElement("leaflet-base-layers_"+g(this),r),this._layerControlInputs.push(l),l.layerId=g(t.layer),_e(l,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+t.name;var m=document.createElement("span");n.appendChild(m),m.appendChild(l),m.appendChild(d);var w=t.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,n,r,l=[],d=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)n=t[m],r=this._getLayer(n.layerId).layer,n.checked?l.push(r):n.checked||d.push(r);for(m=0;m<d.length;m++)this._map.hasLayer(d[m])&&this._map.removeLayer(d[m]);for(m=0;m<l.length;m++)this._map.hasLayer(l[m])||this._map.addLayer(l[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,n,r,l=this._map.getZoom(),d=t.length-1;d>=0;d--)n=t[d],r=this._getLayer(n.layerId).layer,n.disabled=r.options.minZoom!==void 0&&l<r.options.minZoom||r.options.maxZoom!==void 0&&l>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,_e(t,"click",Qe),this.expand();var n=this;setTimeout(function(){$e(t,"click",Qe),n._preventClick=!1})}}),Yc=function(t,n,r){return new zr(t,n,r)},_a=Kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var n="leaflet-control-zoom",r=Ee("div",n+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,n+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,n+"-out",r,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,n,r,l,d){var m=Ee("a",r,l);return m.innerHTML=t,m.href="#",m.title=n,m.setAttribute("role","button"),m.setAttribute("aria-label",n),at(m),_e(m,"click",Yt),_e(m,"click",d,this),_e(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,n="leaflet-disabled";Xe(this._zoomInButton,n),Xe(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Se(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Se(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});Me.mergeOptions({zoomControl:!0}),Me.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _a,this.addControl(this.zoomControl))});var Kc=function(t){return new _a(t)},Rr=Kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var n="leaflet-control-scale",r=Ee("div",n),l=this.options;return this._addScales(l,n+"-line",r),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),r},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,n,r){t.metric&&(this._mScale=Ee("div",n,r)),t.imperial&&(this._iScale=Ee("div",n,r))},_update:function(){var t=this._map,n=t.getSize().y/2,r=t.distance(t.containerPointToLatLng([0,n]),t.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(r)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var n=this._getRoundNum(t),r=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,r,n/t)},_updateImperial:function(t){var n=t*3.2808399,r,l,d;n>5280?(r=n/5280,l=this._getRoundNum(r),this._updateScale(this._iScale,l+" mi",l/r)):(d=this._getRoundNum(n),this._updateScale(this._iScale,d+" ft",d/n))},_updateScale:function(t,n,r){t.style.width=Math.round(this.options.maxWidth*r)+"px",t.innerHTML=n},_getRoundNum:function(t){var n=Math.pow(10,(Math.floor(t)+"").length-1),r=t/n;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,n*r}}),Xc=function(t){return new Rr(t)},Qc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Na=Kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ie.inlineSvg?Qc+" ":"")+"Leaflet</a>"},initialize:function(t){N(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ee("div","leaflet-control-attribution"),at(this._container);for(var n in t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var n in this._attributions)this._attributions[n]&&t.push(n);var r=[];this.options.prefix&&r.push(this.options.prefix),t.length&&r.push(t.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});Me.mergeOptions({attributionControl:!0}),Me.addInitHook(function(){this.options.attributionControl&&new Na().addTo(this)});var ed=function(t){return new Na(t)};Kt.Layers=zr,Kt.Zoom=_a,Kt.Scale=Rr,Kt.Attribution=Na,Xn.layers=Yc,Xn.zoom=Kc,Xn.scale=Xc,Xn.attribution=ed;var is=oe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});is.addTo=function(t,n){return t.addHandler(n,this),this};var td={Events:ee},Fr=ie.touch?"touchstart mousedown":"mousedown",As=he.extend({options:{clickTolerance:3},initialize:function(t,n,r,l){N(this,l),this._element=t,this._dragStartTarget=n||t,this._preventOutline=r},enable:function(){this._enabled||(_e(this._dragStartTarget,Fr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(As._dragging===this&&this.finishDrag(!0),$e(this._dragStartTarget,Fr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Jn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){As._dragging===this&&this.finishDrag();return}if(!(As._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(As._dragging=this,this._preventOutline&&wn(this._element),vn(),Ws(),!this._moving)){this.fire("down");var n=t.touches?t.touches[0]:t,r=Yn(this._element);this._startPoint=new X(n.clientX,n.clientY),this._startPos=zt(this._element),this._parentScale=jn(r);var l=t.type==="mousedown";_e(document,l?"mousemove":"touchmove",this._onMove,this),_e(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var n=t.touches&&t.touches.length===1?t.touches[0]:t,r=new X(n.clientX,n.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Qe(t),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),rt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$e(document,"mousemove touchmove",this._onMove,this),$e(document,"mouseup touchend touchcancel",this._onUp,this),yn(),Vs();var n=this._moved&&this._moving;this._moving=!1,As._dragging=!1,n&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function $r(t,n,r){var l,d=[1,4,2,8],m,w,C,T,V,Q,ge,Te;for(m=0,Q=t.length;m<Q;m++)t[m]._code=Ys(t[m],n);for(C=0;C<4;C++){for(ge=d[C],l=[],m=0,Q=t.length,w=Q-1;m<Q;w=m++)T=t[m],V=t[w],T._code&ge?V._code&ge||(Te=ki(V,T,ge,n,r),Te._code=Ys(Te,n),l.push(Te)):(V._code&ge&&(Te=ki(V,T,ge,n,r),Te._code=Ys(Te,n),l.push(Te)),l.push(T));t=l}return t}function Zr(t,n){var r,l,d,m,w,C,T,V,Q;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ge=B([0,0]),Te=Le(t),St=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());St<1700&&(ge=Sa(t));var gt=t.length,qt=[];for(r=0;r<gt;r++){var Ot=B(t[r]);qt.push(n.project(B([Ot.lat-ge.lat,Ot.lng-ge.lng])))}for(C=T=V=0,r=0,l=gt-1;r<gt;l=r++)d=qt[r],m=qt[l],w=d.y*m.x-m.y*d.x,T+=(d.x+m.x)*w,V+=(d.y+m.y)*w,C+=w*3;C===0?Q=qt[0]:Q=[T/C,V/C];var Ln=n.unproject(ae(Q));return B([Ln.lat+ge.lat,Ln.lng+ge.lng])}function Sa(t){for(var n=0,r=0,l=0,d=0;d<t.length;d++){var m=B(t[d]);n+=m.lat,r+=m.lng,l++}return B([n/l,r/l])}var sd={__proto__:null,clipPolygon:$r,polygonCenter:Zr,centroid:Sa};function Hr(t,n){if(!n||!t.length)return t.slice();var r=n*n;return t=ad(t,r),t=id(t,r),t}function Ur(t,n,r){return Math.sqrt(Qn(t,n,r,!0))}function nd(t,n,r){return Qn(t,n,r)}function id(t,n){var r=t.length,l=typeof Uint8Array<"u"?Uint8Array:Array,d=new l(r);d[0]=d[r-1]=1,ka(t,d,n,0,r-1);var m,w=[];for(m=0;m<r;m++)d[m]&&w.push(t[m]);return w}function ka(t,n,r,l,d){var m=0,w,C,T;for(C=l+1;C<=d-1;C++)T=Qn(t[C],t[l],t[d],!0),T>m&&(w=C,m=T);m>r&&(n[w]=1,ka(t,n,r,l,w),ka(t,n,r,w,d))}function ad(t,n){for(var r=[t[0]],l=1,d=0,m=t.length;l<m;l++)rd(t[l],t[d])>n&&(r.push(t[l]),d=l);return d<m-1&&r.push(t[m-1]),r}var qr;function Wr(t,n,r,l,d){var m=l?qr:Ys(t,r),w=Ys(n,r),C,T,V;for(qr=w;;){if(!(m|w))return[t,n];if(m&w)return!1;C=m||w,T=ki(t,n,C,r,d),V=Ys(T,r),C===m?(t=T,m=V):(n=T,w=V)}}function ki(t,n,r,l,d){var m=n.x-t.x,w=n.y-t.y,C=l.min,T=l.max,V,Q;return r&8?(V=t.x+m*(T.y-t.y)/w,Q=T.y):r&4?(V=t.x+m*(C.y-t.y)/w,Q=C.y):r&2?(V=T.x,Q=t.y+w*(T.x-t.x)/m):r&1&&(V=C.x,Q=t.y+w*(C.x-t.x)/m),new X(V,Q,d)}function Ys(t,n){var r=0;return t.x<n.min.x?r|=1:t.x>n.max.x&&(r|=2),t.y<n.min.y?r|=4:t.y>n.max.y&&(r|=8),r}function rd(t,n){var r=n.x-t.x,l=n.y-t.y;return r*r+l*l}function Qn(t,n,r,l){var d=n.x,m=n.y,w=r.x-d,C=r.y-m,T=w*w+C*C,V;return T>0&&(V=((t.x-d)*w+(t.y-m)*C)/T,V>1?(d=r.x,m=r.y):V>0&&(d+=w*V,m+=C*V)),w=t.x-d,C=t.y-m,l?w*w+C*C:new X(d,m)}function Ut(t){return!z(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Vr(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(t)}function Gr(t,n){var r,l,d,m,w,C,T,V;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Q=B([0,0]),ge=Le(t),Te=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());Te<1700&&(Q=Sa(t));var St=t.length,gt=[];for(r=0;r<St;r++){var qt=B(t[r]);gt.push(n.project(B([qt.lat-Q.lat,qt.lng-Q.lng])))}for(r=0,l=0;r<St-1;r++)l+=gt[r].distanceTo(gt[r+1])/2;if(l===0)V=gt[0];else for(r=0,m=0;r<St-1;r++)if(w=gt[r],C=gt[r+1],d=w.distanceTo(C),m+=d,m>l){T=(m-l)/d,V=[C.x-T*(C.x-w.x),C.y-T*(C.y-w.y)];break}var Ot=n.unproject(ae(V));return B([Ot.lat+Q.lat,Ot.lng+Q.lng])}var od={__proto__:null,simplify:Hr,pointToSegmentDistance:Ur,closestPointOnSegment:nd,clipSegment:Wr,_getEdgeIntersection:ki,_getBitCode:Ys,_sqClosestPointOnSegment:Qn,isFlat:Ut,_flat:Vr,polylineCenter:Gr},Ca={project:function(t){return new X(t.lng,t.lat)},unproject:function(t){return new ce(t.y,t.x)},bounds:new fe([-180,-90],[180,90])},Pa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var n=Math.PI/180,r=this.R,l=t.lat*n,d=this.R_MINOR/r,m=Math.sqrt(1-d*d),w=m*Math.sin(l),C=Math.tan(Math.PI/4-l/2)/Math.pow((1-w)/(1+w),m/2);return l=-r*Math.log(Math.max(C,1e-10)),new X(t.lng*n*r,l)},unproject:function(t){for(var n=180/Math.PI,r=this.R,l=this.R_MINOR/r,d=Math.sqrt(1-l*l),m=Math.exp(-t.y/r),w=Math.PI/2-2*Math.atan(m),C=0,T=.1,V;C<15&&Math.abs(T)>1e-7;C++)V=d*Math.sin(w),V=Math.pow((1-V)/(1+V),d/2),T=Math.PI/2-2*Math.atan(m*V)-w,w+=T;return new ce(w*n,t.x*n/r)}},ld={__proto__:null,LonLat:Ca,Mercator:Pa,SphericalMercator:de},cd=c({},me,{code:"EPSG:3395",projection:Pa,transformation:function(){var t=.5/(Math.PI*Pa.R);return mt(t,.5,-t,.5)}()}),Jr=c({},me,{code:"EPSG:4326",projection:Ca,transformation:mt(1/180,1,-1/180,.5)}),dd=c({},Y,{projection:Ca,transformation:mt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,n){var r=n.lng-t.lng,l=n.lat-t.lat;return Math.sqrt(r*r+l*l)},infinite:!0});Y.Earth=me,Y.EPSG3395=cd,Y.EPSG3857=Z,Y.EPSG900913=q,Y.EPSG4326=Jr,Y.Simple=dd;var Xt=he.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var n=t.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var r=this.getEvents();n.on(r,this),this.once("remove",function(){n.off(r,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});Me.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var n=g(t);return this._layers[n]?this:(this._layers[n]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var n=g(t);return this._layers[n]?(this._loaded&&t.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},_addLayers:function(t){t=t?z(t)?t:[t]:[];for(var n=0,r=t.length;n<r;n++)this.addLayer(t[n])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var n=g(t);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,n=-1/0,r=this._getZoomSpan();for(var l in this._zoomBoundLayers){var d=this._zoomBoundLayers[l].options;t=d.minZoom===void 0?t:Math.min(t,d.minZoom),n=d.maxZoom===void 0?n:Math.max(n,d.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=t===1/0?void 0:t,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Nn=Xt.extend({initialize:function(t,n){N(this,n),this._layers={};var r,l;if(t)for(r=0,l=t.length;r<l;r++)this.addLayer(t[r])},addLayer:function(t){var n=this.getLayerId(t);return this._layers[n]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(t){var n=typeof t=="number"?t:this.getLayerId(t);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var n=Array.prototype.slice.call(arguments,1),r,l;for(r in this._layers)l=this._layers[r],l[t]&&l[t].apply(l,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),ud=function(t,n){return new Nn(t,n)},fs=Nn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Nn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Nn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Pe;for(var n in this._layers){var r=this._layers[n];t.extend(r.getBounds?r.getBounds():r.getLatLng())}return t}}),hd=function(t,n){return new fs(t,n)},Sn=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){N(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var r=this._getIconUrl(t);if(!r){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(r,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,n){var r=this.options,l=r[n+"Size"];typeof l=="number"&&(l=[l,l]);var d=ae(l),m=ae(n==="shadow"&&r.shadowAnchor||r.iconAnchor||d&&d.divideBy(2,!0));t.className="leaflet-marker-"+n+" "+(r.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),d&&(t.style.width=d.x+"px",t.style.height=d.y+"px")},_createImg:function(t,n){return n=n||document.createElement("img"),n.src=t,n},_getIconUrl:function(t){return ie.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function md(t){return new Sn(t)}var ei=Sn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ei.imagePath!="string"&&(ei.imagePath=this._detectIconPath()),(this.options.imagePath||ei.imagePath)+Sn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var n=function(r,l,d){var m=l.exec(r);return m&&m[d]};return t=n(t,/^url\((['"])?(.+)\1\)$/,2),t&&n(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ee("div","leaflet-default-icon-path",document.body),n=Jt(t,"background-image")||Jt(t,"backgroundImage");if(document.body.removeChild(t),n=this._stripUrl(n),n)return n;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),Yr=is.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new As(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var n=this._marker,r=n._map,l=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,m=zt(n._icon),w=r.getPixelBounds(),C=r.getPixelOrigin(),T=be(w.min._subtract(C).add(d),w.max._subtract(C).subtract(d));if(!T.contains(m)){var V=ae((Math.max(T.max.x,m.x)-T.max.x)/(w.max.x-T.max.x)-(Math.min(T.min.x,m.x)-T.min.x)/(w.min.x-T.min.x),(Math.max(T.max.y,m.y)-T.max.y)/(w.max.y-T.max.y)-(Math.min(T.min.y,m.y)-T.min.y)/(w.min.y-T.min.y)).multiplyBy(l);r.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),rt(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=J(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=J(this._adjustPan.bind(this,t)))},_onDrag:function(t){var n=this._marker,r=n._shadow,l=zt(n._icon),d=n._map.layerPointToLatLng(l);r&&rt(r,l),n._latlng=d,t.latlng=d,t.oldLatLng=this._oldLatLng,n.fire("move",t).fire("drag",t)},_onDragEnd:function(t){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ci=Xt.extend({options:{icon:new ei,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,n){N(this,n),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var n=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=t.icon.createIcon(this._icon),l=!1;r!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(r.title=t.title),r.tagName==="IMG"&&(r.alt=t.alt||"")),Se(r,n),t.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(r,"focus",this._panOnFocus,this);var d=t.icon.createShadow(this._shadow),m=!1;d!==this._shadow&&(this._removeShadow(),m=!0),d&&(Se(d,n),d.alt=""),this._shadow=d,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(this._icon,"focus",this._panOnFocus,this),Ye(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ye(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&rt(this._icon,t),this._shadow&&rt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Et(this._icon,t),this._shadow&&Et(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var n=this.options.icon.options,r=n.iconSize?ae(n.iconSize):ae(0,0),l=n.iconAnchor?ae(n.iconAnchor):ae(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:r.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fd(t,n){return new Ci(t,n)}var Ts=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return N(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pi=Ts.extend({options:{fill:!0,radius:10},initialize:function(t,n){N(this,n),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var n=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var n=t&&t.radius||this._radius;return Ts.prototype.setStyle.call(this,t),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,r=this._clickTolerance(),l=[t+r,n+r];this._pxBounds=new fe(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function pd(t,n){return new Pi(t,n)}var La=Pi.extend({initialize:function(t,n,r){if(typeof n=="number"&&(n=c({},r,{radius:n})),N(this,n),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ts.prototype.setStyle,_project:function(){var t=this._latlng.lng,n=this._latlng.lat,r=this._map,l=r.options.crs;if(l.distance===me.distance){var d=Math.PI/180,m=this._mRadius/me.R/d,w=r.project([n+m,t]),C=r.project([n-m,t]),T=w.add(C).divideBy(2),V=r.unproject(T).lat,Q=Math.acos((Math.cos(m*d)-Math.sin(n*d)*Math.sin(V*d))/(Math.cos(n*d)*Math.cos(V*d)))/d;(isNaN(Q)||Q===0)&&(Q=m/Math.cos(Math.PI/180*n)),this._point=T.subtract(r.getPixelOrigin()),this._radius=isNaN(Q)?0:T.x-r.project([V,t-Q]).x,this._radiusY=T.y-w.y}else{var ge=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(ge).x}this._updateBounds()}});function gd(t,n,r){return new La(t,n,r)}var ps=Ts.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,n){N(this,n),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var n=1/0,r=null,l=Qn,d,m,w=0,C=this._parts.length;w<C;w++)for(var T=this._parts[w],V=1,Q=T.length;V<Q;V++){d=T[V-1],m=T[V];var ge=l(t,d,m,!0);ge<n&&(n=ge,r=l(t,d,m))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,n){return n=n||this._defaultShape(),t=B(t),n.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Pe,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var n=[],r=Ut(t),l=0,d=t.length;l<d;l++)r?(n[l]=B(t[l]),this._bounds.extend(n[l])):n[l]=this._convertLatLngs(t[l]);return n},_project:function(){var t=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),n=new X(t,t);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(t,n,r){var l=t[0]instanceof ce,d=t.length,m,w;if(l){for(w=[],m=0;m<d;m++)w[m]=this._map.latLngToLayerPoint(t[m]),r.extend(w[m]);n.push(w)}else for(m=0;m<d;m++)this._projectLatlngs(t[m],n,r)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,r,l,d,m,w,C,T;for(r=0,d=0,m=this._rings.length;r<m;r++)for(T=this._rings[r],l=0,w=T.length;l<w-1;l++)C=Wr(T[l],T[l+1],t,l,!0),C&&(n[d]=n[d]||[],n[d].push(C[0]),(C[1]!==T[l+1]||l===w-2)&&(n[d].push(C[1]),d++))}},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,r=0,l=t.length;r<l;r++)t[r]=Hr(t[r],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,n){var r,l,d,m,w,C,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,m=this._parts.length;r<m;r++)for(C=this._parts[r],l=0,w=C.length,d=w-1;l<w;d=l++)if(!(!n&&l===0)&&Ur(t,C[d],C[l])<=T)return!0;return!1}});function xd(t,n){return new ps(t,n)}ps._flat=Vr;var kn=ps.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var n=ps.prototype._convertLatLngs.call(this,t),r=n.length;return r>=2&&n[0]instanceof ce&&n[0].equals(n[r-1])&&n.pop(),n},_setLatLngs:function(t){ps.prototype._setLatLngs.call(this,t),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,n=this.options.weight,r=new X(n,n);if(t=new fe(t.min.subtract(r),t.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,d=this._rings.length,m;l<d;l++)m=$r(this._rings[l],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var n=!1,r,l,d,m,w,C,T,V;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,T=this._parts.length;m<T;m++)for(r=this._parts[m],w=0,V=r.length,C=V-1;w<V;C=w++)l=r[w],d=r[C],l.y>t.y!=d.y>t.y&&t.x<(d.x-l.x)*(t.y-l.y)/(d.y-l.y)+l.x&&(n=!n);return n||ps.prototype._containsPoint.call(this,t,!0)}});function vd(t,n){return new kn(t,n)}var gs=fs.extend({initialize:function(t,n){N(this,n),this._layers={},t&&this.addData(t)},addData:function(t){var n=z(t)?t:t.features,r,l,d;if(n){for(r=0,l=n.length;r<l;r++)d=n[r],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var w=Li(t,m);return w?(w.feature=Ei(t),w.defaultOptions=w.options,this.resetStyle(w),m.onEachFeature&&m.onEachFeature(t,w),this.addLayer(w)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(n){this._setLayerStyle(n,t)},this)},_setLayerStyle:function(t,n){t.setStyle&&(typeof n=="function"&&(n=n(t.feature)),t.setStyle(n))}});function Li(t,n){var r=t.type==="Feature"?t.geometry:t,l=r?r.coordinates:null,d=[],m=n&&n.pointToLayer,w=n&&n.coordsToLatLng||Aa,C,T,V,Q;if(!l&&!r)return null;switch(r.type){case"Point":return C=w(l),Kr(m,t,C,n);case"MultiPoint":for(V=0,Q=l.length;V<Q;V++)C=w(l[V]),d.push(Kr(m,t,C,n));return new fs(d);case"LineString":case"MultiLineString":return T=Ai(l,r.type==="LineString"?0:1,w),new ps(T,n);case"Polygon":case"MultiPolygon":return T=Ai(l,r.type==="Polygon"?1:2,w),new kn(T,n);case"GeometryCollection":for(V=0,Q=r.geometries.length;V<Q;V++){var ge=Li({geometry:r.geometries[V],type:"Feature",properties:t.properties},n);ge&&d.push(ge)}return new fs(d);case"FeatureCollection":for(V=0,Q=r.features.length;V<Q;V++){var Te=Li(r.features[V],n);Te&&d.push(Te)}return new fs(d);default:throw new Error("Invalid GeoJSON object.")}}function Kr(t,n,r,l){return t?t(n,r):new Ci(r,l&&l.markersInheritOptions&&l)}function Aa(t){return new ce(t[1],t[0],t[2])}function Ai(t,n,r){for(var l=[],d=0,m=t.length,w;d<m;d++)w=n?Ai(t[d],n-1,r):(r||Aa)(t[d]),l.push(w);return l}function Ta(t,n){return t=B(t),t.alt!==void 0?[S(t.lng,n),S(t.lat,n),S(t.alt,n)]:[S(t.lng,n),S(t.lat,n)]}function Ti(t,n,r,l){for(var d=[],m=0,w=t.length;m<w;m++)d.push(n?Ti(t[m],Ut(t[m])?0:n-1,r,l):Ta(t[m],l));return!n&&r&&d.length>0&&d.push(d[0].slice()),d}function Cn(t,n){return t.feature?c({},t.feature,{geometry:n}):Ei(n)}function Ei(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ea={toGeoJSON:function(t){return Cn(this,{type:"Point",coordinates:Ta(this.getLatLng(),t)})}};Ci.include(Ea),La.include(Ea),Pi.include(Ea),ps.include({toGeoJSON:function(t){var n=!Ut(this._latlngs),r=Ti(this._latlngs,n?1:0,!1,t);return Cn(this,{type:(n?"Multi":"")+"LineString",coordinates:r})}}),kn.include({toGeoJSON:function(t){var n=!Ut(this._latlngs),r=n&&!Ut(this._latlngs[0]),l=Ti(this._latlngs,r?2:n?1:0,!0,t);return n||(l=[l]),Cn(this,{type:(r?"Multi":"")+"Polygon",coordinates:l})}}),Nn.include({toMultiPoint:function(t){var n=[];return this.eachLayer(function(r){n.push(r.toGeoJSON(t).geometry.coordinates)}),Cn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(t){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(t);var r=n==="GeometryCollection",l=[];return this.eachLayer(function(d){if(d.toGeoJSON){var m=d.toGeoJSON(t);if(r)l.push(m.geometry);else{var w=Ei(m);w.type==="FeatureCollection"?l.push.apply(l,w.features):l.push(w)}}}),r?Cn(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function Xr(t,n){return new gs(t,n)}var yd=Xr,Oi=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,n,r){this._url=t,this._bounds=Le(n),N(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ye(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&We(this._image),this},bringToBack:function(){return this._map&&qs(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Le(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",n=this._image=t?this._url:Ee("img");if(Se(n,"leaflet-image-layer"),this._zoomAnimated&&Se(n,"leaflet-zoom-animated"),this.options.className&&Se(n,this.options.className),n.onselectstart=_,n.onmousemove=_,n.onload=h(this.fire,this,"load"),n.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(t){var n=this._map.getZoomScale(t.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ps(this._image,r,n)},_reset:function(){var t=this._image,n=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=n.getSize();rt(t,n.min),t.style.width=r.x+"px",t.style.height=r.y+"px"},_updateOpacity:function(){Et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),bd=function(t,n,r){return new Oi(t,n,r)},Qr=Oi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",n=this._image=t?this._url:Ee("video");if(Se(n,"leaflet-image-layer"),this._zoomAnimated&&Se(n,"leaflet-zoom-animated"),this.options.className&&Se(n,this.options.className),n.onselectstart=_,n.onmousemove=_,n.onloadeddata=h(this.fire,this,"load"),t){for(var r=n.getElementsByTagName("source"),l=[],d=0;d<r.length;d++)l.push(r[d].src);this._url=r.length>0?l:[n.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var w=Ee("source");w.src=this._url[m],n.appendChild(w)}}});function wd(t,n,r){return new Qr(t,n,r)}var eo=Oi.extend({_initImage:function(){var t=this._image=this._url;Se(t,"leaflet-image-layer"),this._zoomAnimated&&Se(t,"leaflet-zoom-animated"),this.options.className&&Se(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function jd(t,n,r){return new eo(t,n,r)}var as=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,n){t&&(t instanceof ce||z(t))?(this._latlng=B(t),N(this,n)):(N(this,t),this._source=n),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Et(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Et(this._container,0),this._removeTimeout=setTimeout(h(Ye,void 0,this._container),200)):Ye(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&We(this._container),this},bringToBack:function(){return this._map&&qs(this._container),this},_prepareOpen:function(t){var n=this._source;if(!n._map)return!1;if(n instanceof fs){n=null;var r=this._source._layers;for(var l in r)if(r[l]._map){n=r[l];break}if(!n)return!1;this._source=n}if(!t)if(n.getCenter)t=n.getCenter();else if(n.getLatLng)t=n.getLatLng();else if(n.getBounds)t=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")t.innerHTML=n;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=ae(this.options.offset),r=this._getAnchor();this._zoomAnimated?rt(this._container,t.add(r)):n=n.add(t).add(r);var l=this._containerBottom=-n.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=l+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}});Me.include({_initOverlay:function(t,n,r,l){var d=n;return d instanceof t||(d=new t(l).setContent(n)),r&&d.setLatLng(r),d}}),Xt.include({_initOverlay:function(t,n,r,l){var d=r;return d instanceof t?(N(d,l),d._source=this):(d=n&&!l?n:new t(l,this),d.setContent(r)),d}});var Mi=as.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,as.prototype.openOn.call(this,t)},onAdd:function(t){as.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ts||this._source.on("preclick",Be))},onRemove:function(t){as.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ts||this._source.off("preclick",Be))},getEvents:function(){var t=as.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",n=this._container=Ee("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=Ee("div",t+"-content-wrapper",n);if(this._contentNode=Ee("div",t+"-content",r),at(n),Ke(this._contentNode),_e(n,"contextmenu",Be),this._tipContainer=Ee("div",t+"-tip-container",n),this._tip=Ee("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=Ee("a",t+"-close-button",n);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',_e(l,"click",function(d){Qe(d),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,n=t.style;n.width="",n.whiteSpace="nowrap";var r=t.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),n.width=r+1+"px",n.whiteSpace="",n.height="";var l=t.offsetHeight,d=this.options.maxHeight,m="leaflet-popup-scrolled";d&&l>d?(n.height=d+"px",Se(t,m)):Xe(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),r=this._getAnchor();rt(this._container,n.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,n=parseInt(Jt(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+n,l=this._containerWidth,d=new X(this._containerLeft,-r-this._containerBottom);d._add(zt(this._container));var m=t.layerPointToContainerPoint(d),w=ae(this.options.autoPanPadding),C=ae(this.options.autoPanPaddingTopLeft||w),T=ae(this.options.autoPanPaddingBottomRight||w),V=t.getSize(),Q=0,ge=0;m.x+l+T.x>V.x&&(Q=m.x+l-V.x+T.x),m.x-Q-C.x<0&&(Q=m.x-C.x),m.y+r+T.y>V.y&&(ge=m.y+r-V.y+T.y),m.y-ge-C.y<0&&(ge=m.y-C.y),(Q||ge)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Q,ge]))}},_getAnchor:function(){return ae(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_d=function(t,n){return new Mi(t,n)};Me.mergeOptions({closePopupOnClick:!0}),Me.include({openPopup:function(t,n,r){return this._initOverlay(Mi,t,n,r).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Xt.include({bindPopup:function(t,n){return this._popup=this._initOverlay(Mi,this._popup,t,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof fs||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Yt(t);var n=t.layer||t.target;if(this._popup._source===n&&!(n instanceof Ts)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=n,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ii=as.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){as.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){as.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=as.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",n=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ee("div",n),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var n,r,l=this._map,d=this._container,m=l.latLngToContainerPoint(l.getCenter()),w=l.layerPointToContainerPoint(t),C=this.options.direction,T=d.offsetWidth,V=d.offsetHeight,Q=ae(this.options.offset),ge=this._getAnchor();C==="top"?(n=T/2,r=V):C==="bottom"?(n=T/2,r=0):C==="center"?(n=T/2,r=V/2):C==="right"?(n=0,r=V/2):C==="left"?(n=T,r=V/2):w.x<m.x?(C="right",n=0,r=V/2):(C="left",n=T+(Q.x+ge.x)*2,r=V/2),t=t.subtract(ae(n,r,!0)).add(Q).add(ge),Xe(d,"leaflet-tooltip-right"),Xe(d,"leaflet-tooltip-left"),Xe(d,"leaflet-tooltip-top"),Xe(d,"leaflet-tooltip-bottom"),Se(d,"leaflet-tooltip-"+C),rt(d,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Et(this._container,t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(n)},_getAnchor:function(){return ae(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Nd=function(t,n){return new Ii(t,n)};Me.include({openTooltip:function(t,n,r){return this._initOverlay(Ii,t,n,r).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Xt.include({bindTooltip:function(t,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ii,this._tooltip,t,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var n=t?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[n](r),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof fs||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&(_e(n,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),_e(n,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&n.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var n=this;this._map.once("moveend",function(){n._openOnceFlag=!1,n._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var n=t.latlng,r,l;this._tooltip.options.sticky&&t.originalEvent&&(r=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(r),n=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(n)}});var to=Sn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var n=t&&t.tagName==="DIV"?t:document.createElement("div"),r=this.options;if(r.html instanceof Element?(mn(n),n.appendChild(r.html)):n.innerHTML=r.html!==!1?r.html:"",r.bgPos){var l=ae(r.bgPos);n.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function Sd(t){return new to(t)}Sn.Default=ei;var ti=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){N(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ye(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(We(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof X?t:new X(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var n=this.getPane().children,r=-t(-1/0,1/0),l=0,d=n.length,m;l<d;l++)m=n[l].style.zIndex,n[l]!==this._container&&m&&(r=t(r,+m));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ie.ielt9){Et(this._container,this.options.opacity);var t=+new Date,n=!1,r=!1;for(var l in this._tiles){var d=this._tiles[l];if(!(!d.current||!d.loaded)){var m=Math.min(1,(t-d.loaded)/200);Et(d.el,m),m<1?n=!0:(d.active?r=!0:this._onOpaqueTile(d),d.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),n&&(U(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,n=this.options.maxZoom;if(t!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===t?(this._levels[r].el.style.zIndex=n-Math.abs(t-r),this._onUpdateLevel(r)):(Ye(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var l=this._levels[t],d=this._map;return l||(l=this._levels[t]={},l.el=Ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=n,l.origin=d.project(d.unproject(d.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,d.getCenter(),d.getZoom()),_(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,n,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var l=n.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var n in this._tiles)this._tiles[n].coords.z===t&&this._removeTile(n)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ye(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,n,r,l){var d=Math.floor(t/2),m=Math.floor(n/2),w=r-1,C=new X(+d,+m);C.z=+w;var T=this._tileCoordsToKey(C),V=this._tiles[T];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),w>l?this._retainParent(d,m,w,l):!1)},_retainChildren:function(t,n,r,l){for(var d=2*t;d<2*t+2;d++)for(var m=2*n;m<2*n+2;m++){var w=new X(d,m);w.z=r+1;var C=this._tileCoordsToKey(w),T=this._tiles[C];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);r+1<l&&this._retainChildren(d,m,r+1,l)}},_resetView:function(t){var n=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var n=this.options;return n.minNativeZoom!==void 0&&t<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<t?n.maxNativeZoom:t},_setView:function(t,n,r,l){var d=Math.round(n);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var m=this.options.updateWhenZooming&&d!==this._tileZoom;(!l||m)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(t),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(t,n)},_setZoomTransforms:function(t,n){for(var r in this._levels)this._setZoomTransform(this._levels[r],t,n)},_setZoomTransform:function(t,n,r){var l=this._map.getZoomScale(r,t.zoom),d=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(n,r)).round();ie.any3d?Ps(t.el,d,l):rt(t.el,d)},_resetGrid:function(){var t=this._map,n=t.options.crs,r=this._tileSize=this.getTileSize(),l=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],l).x/r.x),Math.ceil(t.project([0,n.wrapLng[1]],l).x/r.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],l).y/r.x),Math.ceil(t.project([n.wrapLat[1],0],l).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var n=this._map,r=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),l=n.getZoomScale(r,this._tileZoom),d=n.project(t,this._tileZoom).floor(),m=n.getSize().divideBy(l*2);return new fe(d.subtract(m),d.add(m))},_update:function(t){var n=this._map;if(n){var r=this._clampZoom(n.getZoom());if(t===void 0&&(t=n.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),d=this._pxBoundsToTileRange(l),m=d.getCenter(),w=[],C=this.options.keepBuffer,T=new fe(d.getBottomLeft().subtract([C,-C]),d.getTopRight().add([C,-C]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var Q=this._tiles[V].coords;(Q.z!==this._tileZoom||!T.contains(new X(Q.x,Q.y)))&&(this._tiles[V].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(t,r);return}for(var ge=d.min.y;ge<=d.max.y;ge++)for(var Te=d.min.x;Te<=d.max.x;Te++){var St=new X(Te,ge);if(St.z=this._tileZoom,!!this._isValidTile(St)){var gt=this._tiles[this._tileCoordsToKey(St)];gt?gt.current=!0:w.push(St)}}if(w.sort(function(Ot,Ln){return Ot.distanceTo(m)-Ln.distanceTo(m)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var qt=document.createDocumentFragment();for(Te=0;Te<w.length;Te++)this._addTile(w[Te],qt);this._level.el.appendChild(qt)}}}},_isValidTile:function(t){var n=this._map.options.crs;if(!n.infinite){var r=this._globalTileRange;if(!n.wrapLng&&(t.x<r.min.x||t.x>r.max.x)||!n.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return Le(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var n=this._map,r=this.getTileSize(),l=t.scaleBy(r),d=l.add(r),m=n.unproject(l,t.z),w=n.unproject(d,t.z);return[m,w]},_tileCoordsToBounds:function(t){var n=this._tileCoordsToNwSe(t),r=new Pe(n[0],n[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var n=t.split(":"),r=new X(+n[0],+n[1]);return r.z=+n[2],r},_removeTile:function(t){var n=this._tiles[t];n&&(Ye(n.el),delete this._tiles[t],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Se(t,"leaflet-tile");var n=this.getTileSize();t.style.width=n.x+"px",t.style.height=n.y+"px",t.onselectstart=_,t.onmousemove=_,ie.ielt9&&this.options.opacity<1&&Et(t,this.options.opacity)},_addTile:function(t,n){var r=this._getTilePos(t),l=this._tileCoordsToKey(t),d=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(d),this.createTile.length<2&&J(h(this._tileReady,this,t,null,d)),rt(d,r),this._tiles[l]={el:d,coords:t,current:!0},n.appendChild(d),this.fire("tileloadstart",{tile:d,coords:t})},_tileReady:function(t,n,r){n&&this.fire("tileerror",{error:n,tile:r,coords:t});var l=this._tileCoordsToKey(t);r=this._tiles[l],r&&(r.loaded=+new Date,this._map._fadeAnimated?(Et(r.el,0),U(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),n||(Se(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ie.ielt9||!this._map._fadeAnimated?J(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var n=new X(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return n.z=t.z,n},_pxBoundsToTileRange:function(t){var n=this.getTileSize();return new fe(t.min.unscaleBy(n).floor(),t.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function kd(t){return new ti(t)}var Pn=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,n){this._url=t,n=N(this,n),n.detectRetina&&ie.retina&&n.maxZoom>0?(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom=Math.min(n.maxZoom,n.minZoom+1)):(n.zoomOffset++,n.maxZoom=Math.max(n.minZoom,n.maxZoom-1)),n.minZoom=Math.max(0,n.minZoom)):n.zoomReverse?n.minZoom=Math.min(n.maxZoom,n.minZoom):n.maxZoom=Math.max(n.minZoom,n.maxZoom),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,n){return this._url===t&&n===void 0&&(n=!0),this._url=t,n||this.redraw(),this},createTile:function(t,n){var r=document.createElement("img");return _e(r,"load",h(this._tileOnLoad,this,n,r)),_e(r,"error",h(this._tileOnError,this,n,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(t),r},getTileUrl:function(t){var n={r:ie.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return E(this._url,c(n,this.options))},_tileOnLoad:function(t,n){ie.ielt9?setTimeout(h(t,this,null,n),0):t(null,n)},_tileOnError:function(t,n,r){var l=this.options.errorTileUrl;l&&n.getAttribute("src")!==l&&(n.src=l),t(r,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,n=this.options.maxZoom,r=this.options.zoomReverse,l=this.options.zoomOffset;return r&&(t=n-t),t+l},_getSubdomain:function(t){var n=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var t,n;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=_,n.onerror=_,!n.complete)){n.src=A;var r=this._tiles[t].coords;Ye(n),delete this._tiles[t],this.fire("tileabort",{tile:n,coords:r})}},_removeTile:function(t){var n=this._tiles[t];if(n)return n.el.setAttribute("src",A),ti.prototype._removeTile.call(this,t)},_tileReady:function(t,n,r){if(!(!this._map||r&&r.getAttribute("src")===A))return ti.prototype._tileReady.call(this,t,n,r)}});function so(t,n){return new Pn(t,n)}var no=Pn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=c({},this.defaultWmsParams);for(var l in n)l in this.options||(r[l]=n[l]);n=N(this,n);var d=n.detectRetina&&ie.retina?2:1,m=this.getTileSize();r.width=m.x*d,r.height=m.y*d,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,Pn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var n=this._tileCoordsToNwSe(t),r=this._crs,l=be(r.project(n[0]),r.project(n[1])),d=l.min,m=l.max,w=(this._wmsVersion>=1.3&&this._crs===Jr?[d.y,d.x,m.y,m.x]:[d.x,d.y,m.x,m.y]).join(","),C=Pn.prototype.getTileUrl.call(this,t);return C+v(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(t,n){return c(this.wmsParams,t),n||this.redraw(),this}});function Cd(t,n){return new no(t,n)}Pn.WMS=no,so.wms=Cd;var xs=Xt.extend({options:{padding:.1},initialize:function(t){N(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,n){var r=this._map.getZoomScale(n,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),d=this._map.project(this._center,n),m=l.multiplyBy(-r).add(d).subtract(this._map._getNewPixelOrigin(t,n));ie.any3d?Ps(this._container,m,r):rt(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new fe(r,r.add(n.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),io=xs.extend({options:{tolerance:0},getEvents:function(){var t=xs.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");_e(t,"mousemove",this._onMouseMove,this),_e(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Ye(this._container),$e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var n in this._layers)t=this._layers[n],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xs.prototype._update.call(this);var t=this._bounds,n=this._container,r=t.getSize(),l=ie.retina?2:1;rt(n,t.min),n.width=l*r.x,n.height=l*r.y,n.style.width=r.x+"px",n.style.height=r.y+"px",ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){xs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var n=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var n=t._order,r=n.next,l=n.prev;r?r.prev=l:this._drawLast=l,l?l.next=r:this._drawFirst=r,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var n=t.options.dashArray.split(/[, ]+/),r=[],l,d;for(d=0;d<n.length;d++){if(l=Number(n[d]),isNaN(l))return;r.push(l)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||J(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var n=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(t._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(t._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var n=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,n=this._redrawBounds;if(this._ctx.save(),n){var r=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,n){if(this._drawing){var r,l,d,m,w=t._parts,C=w.length,T=this._ctx;if(C){for(T.beginPath(),r=0;r<C;r++){for(l=0,d=w[r].length;l<d;l++)m=w[r][l],T[l?"lineTo":"moveTo"](m.x,m.y);n&&T.closePath()}this._fillStroke(T,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var n=t._point,r=this._ctx,l=Math.max(Math.round(t._radius),1),d=(Math.max(Math.round(t._radiusY),1)||l)/l;d!==1&&(r.save(),r.scale(1,d)),r.beginPath(),r.arc(n.x,n.y/d,l,0,Math.PI*2,!1),d!==1&&r.restore(),this._fillStroke(r,t)}},_fillStroke:function(t,n){var r=n.options;r.fill&&(t.globalAlpha=r.fillOpacity,t.fillStyle=r.fillColor||r.color,t.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(t.setLineDash&&t.setLineDash(n.options&&n.options._dashArray||[]),t.globalAlpha=r.opacity,t.lineWidth=r.weight,t.strokeStyle=r.color,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.stroke())},_onClick:function(t){for(var n=this._map.mouseEventToLayerPoint(t),r,l,d=this._drawFirst;d;d=d.next)r=d.layer,r.options.interactive&&r._containsPoint(n)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(r))&&(l=r);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,n)}},_handleMouseOut:function(t){var n=this._hoveredLayer;n&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,n){if(!this._mouseHoverThrottled){for(var r,l,d=this._drawFirst;d;d=d.next)r=d.layer,r.options.interactive&&r._containsPoint(n)&&(l=r);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(Se(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,n,r){this._map._fireDOMEvent(n,r||n.type,t)},_bringToFront:function(t){var n=t._order;if(n){var r=n.next,l=n.prev;if(r)r.prev=l;else return;l?l.next=r:r&&(this._drawFirst=r),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(t)}},_bringToBack:function(t){var n=t._order;if(n){var r=n.next,l=n.prev;if(l)l.next=r;else return;r?r.prev=l:l&&(this._drawLast=l),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)}}});function ao(t){return ie.canvas?new io(t):null}var si=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Pd={_initContainer:function(){this._container=Ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xs.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var n=t._container=si("shape");Se(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",t._path=si("path"),n.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var n=t._container;this._container.appendChild(n),t.options.interactive&&t.addInteractiveTarget(n)},_removePath:function(t){var n=t._container;Ye(n),t.removeInteractiveTarget(n),delete this._layers[g(t)]},_updateStyle:function(t){var n=t._stroke,r=t._fill,l=t.options,d=t._container;d.stroked=!!l.stroke,d.filled=!!l.fill,l.stroke?(n||(n=t._stroke=si("stroke")),d.appendChild(n),n.weight=l.weight+"px",n.color=l.color,n.opacity=l.opacity,l.dashArray?n.dashStyle=z(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=l.lineCap.replace("butt","flat"),n.joinstyle=l.lineJoin):n&&(d.removeChild(n),t._stroke=null),l.fill?(r||(r=t._fill=si("fill")),d.appendChild(r),r.color=l.fillColor||l.color,r.opacity=l.fillOpacity):r&&(d.removeChild(r),t._fill=null)},_updateCircle:function(t){var n=t._point.round(),r=Math.round(t._radius),l=Math.round(t._radiusY||r);this._setPath(t,t._empty()?"M0 0":"AL "+n.x+","+n.y+" "+r+","+l+" 0,"+65535*360)},_setPath:function(t,n){t._path.v=n},_bringToFront:function(t){We(t._container)},_bringToBack:function(t){qs(t._container)}},Di=ie.vml?si:re,ni=xs.extend({_initContainer:function(){this._container=Di("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Di("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ye(this._container),$e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xs.prototype._update.call(this);var t=this._bounds,n=t.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,r.setAttribute("width",n.x),r.setAttribute("height",n.y)),rt(r,t.min),r.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(t){var n=t._path=Di("path");t.options.className&&Se(n,t.options.className),t.options.interactive&&Se(n,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ye(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var n=t._path,r=t.options;n&&(r.stroke?(n.setAttribute("stroke",r.color),n.setAttribute("stroke-opacity",r.opacity),n.setAttribute("stroke-width",r.weight),n.setAttribute("stroke-linecap",r.lineCap),n.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?n.setAttribute("stroke-dasharray",r.dashArray):n.removeAttribute("stroke-dasharray"),r.dashOffset?n.setAttribute("stroke-dashoffset",r.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),r.fill?(n.setAttribute("fill",r.fillColor||r.color),n.setAttribute("fill-opacity",r.fillOpacity),n.setAttribute("fill-rule",r.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(t,n){this._setPath(t,pe(t._parts,n))},_updateCircle:function(t){var n=t._point,r=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||r,d="a"+r+","+l+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(n.x-r)+","+n.y+d+r*2+",0 "+d+-r*2+",0 ";this._setPath(t,m)},_setPath:function(t,n){t._path.setAttribute("d",n)},_bringToFront:function(t){We(t._path)},_bringToBack:function(t){qs(t._path)}});ie.vml&&ni.include(Pd);function ro(t){return ie.svg||ie.vml?new ni(t):null}Me.include({getRenderer:function(t){var n=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var n=this._paneRenderers[t];return n===void 0&&(n=this._createRenderer({pane:t}),this._paneRenderers[t]=n),n},_createRenderer:function(t){return this.options.preferCanvas&&ao(t)||ro(t)}});var oo=kn.extend({initialize:function(t,n){kn.prototype.initialize.call(this,this._boundsToLatLngs(t),n)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Le(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ld(t,n){return new oo(t,n)}ni.create=Di,ni.pointsToPath=pe,gs.geometryToLayer=Li,gs.coordsToLatLng=Aa,gs.coordsToLatLngs=Ai,gs.latLngToCoords=Ta,gs.latLngsToCoords=Ti,gs.getFeature=Cn,gs.asFeature=Ei,Me.mergeOptions({boxZoom:!0});var lo=is.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ye(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ws(),vn(),this._startPoint=this._map.mouseEventToContainerPoint(t),_e(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ee("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var n=new fe(this._point,this._startPoint),r=n.getSize();rt(this._box,n.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(Ye(this._box),Xe(this._container,"leaflet-crosshair")),Vs(),yn(),$e(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var n=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Me.addInitHook("addHandler","boxZoom",lo),Me.mergeOptions({doubleClickZoom:!0});var co=is.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var n=this._map,r=n.getZoom(),l=n.options.zoomDelta,d=t.originalEvent.shiftKey?r-l:r+l;n.options.doubleClickZoom==="center"?n.setZoom(d):n.setZoomAround(t.containerPoint,d)}});Me.addInitHook("addHandler","doubleClickZoom",co),Me.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var uo=is.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new As(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=Le(this._map.options.maxBounds);this._offsetLimit=be(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var n=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(n),this._prunePositions(n)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,n){return t-(t-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;t.x<n.min.x&&(t.x=this._viscousLimit(t.x,n.min.x)),t.y<n.min.y&&(t.y=this._viscousLimit(t.y,n.min.y)),t.x>n.max.x&&(t.x=this._viscousLimit(t.x,n.max.x)),t.y>n.max.y&&(t.y=this._viscousLimit(t.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,n=Math.round(t/2),r=this._initialWorldOffset,l=this._draggable._newPos.x,d=(l-n+r)%t+n-r,m=(l+n+r)%t-n-r,w=Math.abs(d+r)<Math.abs(m+r)?d:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(t){var n=this._map,r=n.options,l=!r.inertia||t.noInertia||this._times.length<2;if(n.fire("dragend",t),l)n.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,w=r.easeLinearity,C=d.multiplyBy(w/m),T=C.distanceTo([0,0]),V=Math.min(r.inertiaMaxSpeed,T),Q=C.multiplyBy(V/T),ge=V/(r.inertiaDeceleration*w),Te=Q.multiplyBy(-ge/2).round();!Te.x&&!Te.y?n.fire("moveend"):(Te=n._limitOffset(Te,n.options.maxBounds),J(function(){n.panBy(Te,{duration:ge,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});Me.addInitHook("addHandler","dragging",uo),Me.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ho=is.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),_e(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,n=document.documentElement,r=t.scrollTop||n.scrollTop,l=t.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(l,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var n=this._panKeys={},r=this.keyCodes,l,d;for(l=0,d=r.left.length;l<d;l++)n[r.left[l]]=[-1*t,0];for(l=0,d=r.right.length;l<d;l++)n[r.right[l]]=[t,0];for(l=0,d=r.down.length;l<d;l++)n[r.down[l]]=[0,t];for(l=0,d=r.up.length;l<d;l++)n[r.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var n=this._zoomKeys={},r=this.keyCodes,l,d;for(l=0,d=r.zoomIn.length;l<d;l++)n[r.zoomIn[l]]=t;for(l=0,d=r.zoomOut.length;l<d;l++)n[r.zoomOut[l]]=-t},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=t.keyCode,r=this._map,l;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(l=this._panKeys[n],t.shiftKey&&(l=ae(l).multiplyBy(3)),r.options.maxBounds&&(l=r._limitOffset(ae(l),r.options.maxBounds)),r.options.worldCopyJump){var d=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(l)));r.panTo(d)}else r.panBy(l)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;Yt(t)}}});Me.addInitHook("addHandler","keyboard",ho),Me.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var mo=is.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var n=Dr(t),r=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),l),Yt(t)},_performZoom:function(){var t=this._map,n=t.getZoom(),r=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,m=r?Math.ceil(d/r)*r:d,w=t._limitZoom(n+(this._delta>0?m:-m))-n;this._delta=0,this._startTime=null,w&&(t.options.scrollWheelZoom==="center"?t.setZoom(n+w):t.setZoomAround(this._lastMousePos,n+w))}});Me.addInitHook("addHandler","scrollWheelZoom",mo);var Ad=600;Me.mergeOptions({tapHold:ie.touchNative&&ie.safari&&ie.mobile,tapTolerance:15});var fo=is.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var n=t.touches[0];this._startPos=this._newPos=new X(n.clientX,n.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",Qe),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),Ad),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){$e(document,"touchend",Qe),$e(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)},_onMove:function(t){var n=t.touches[0];this._newPos=new X(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,n){var r=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});r._simulated=!0,n.target.dispatchEvent(r)}});Me.addInitHook("addHandler","tapHold",fo),Me.mergeOptions({touchZoom:ie.touch,bounceAtZoomLimits:!0});var po=is.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(!(!t.touches||t.touches.length!==2||n._animatingZoom||this._zooming)){var r=n.mouseEventToContainerPoint(t.touches[0]),l=n.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(r.add(l)._divideBy(2))),this._startDist=r.distanceTo(l),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),Qe(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var n=this._map,r=n.mouseEventToContainerPoint(t.touches[0]),l=n.mouseEventToContainerPoint(t.touches[1]),d=r.distanceTo(l)/this._startDist;if(this._zoom=n.getScaleZoom(d,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&d<1||this._zoom>n.getMaxZoom()&&d>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var m=r._add(l)._divideBy(2)._subtract(this._centerPoint);if(d===1&&m.x===0&&m.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var w=h(n._move,n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=J(w,this,!0),Qe(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Me.addInitHook("addHandler","touchZoom",po),Me.BoxZoom=lo,Me.DoubleClickZoom=co,Me.Drag=uo,Me.Keyboard=ho,Me.ScrollWheelZoom=mo,Me.TapHold=fo,Me.TouchZoom=po,a.Bounds=fe,a.Browser=ie,a.CRS=Y,a.Canvas=io,a.Circle=La,a.CircleMarker=Pi,a.Class=oe,a.Control=Kt,a.DivIcon=to,a.DivOverlay=as,a.DomEvent=Gc,a.DomUtil=Si,a.Draggable=As,a.Evented=he,a.FeatureGroup=fs,a.GeoJSON=gs,a.GridLayer=ti,a.Handler=is,a.Icon=Sn,a.ImageOverlay=Oi,a.LatLng=ce,a.LatLngBounds=Pe,a.Layer=Xt,a.LayerGroup=Nn,a.LineUtil=od,a.Map=Me,a.Marker=Ci,a.Mixin=td,a.Path=Ts,a.Point=X,a.PolyUtil=sd,a.Polygon=kn,a.Polyline=ps,a.Popup=Mi,a.PosAnimation=Br,a.Projection=ld,a.Rectangle=oo,a.Renderer=xs,a.SVG=ni,a.SVGOverlay=eo,a.TileLayer=Pn,a.Tooltip=Ii,a.Transformation=we,a.Util=te,a.VideoOverlay=Qr,a.bind=h,a.bounds=be,a.canvas=ao,a.circle=gd,a.circleMarker=pd,a.control=Xn,a.divIcon=Sd,a.extend=c,a.featureGroup=hd,a.geoJSON=Xr,a.geoJson=yd,a.gridLayer=kd,a.icon=md,a.imageOverlay=bd,a.latLng=B,a.latLngBounds=Le,a.layerGroup=ud,a.map=Jc,a.marker=fd,a.point=ae,a.polygon=vd,a.polyline=xd,a.popup=_d,a.rectangle=Ld,a.setOptions=N,a.stamp=g,a.svg=ro,a.svgOverlay=jd,a.tileLayer=so,a.tooltip=Nd,a.transformation=mt,a.version=o,a.videoOverlay=wd;var Td=window.L;a.noConflict=function(){return window.L=Td,this},window.L=a})}(li,li.exports)),li.exports}var Wn=Gg();const zs=nl(Wn);function ya(s,i,a){return Object.freeze({instance:s,context:i,container:a})}function ba(s,i){return i==null?function(o,c){const u=p.useRef();return u.current||(u.current=s(o,c)),u}:function(o,c){const u=p.useRef();u.current||(u.current=s(o,c));const h=p.useRef(o),{instance:f}=u.current;return p.useEffect(function(){h.current!==o&&(i(f,o,h.current),h.current=o)},[f,o,c]),u}}function Uc(s,i){p.useEffect(function(){return(i.layerContainer??i.map).addLayer(s.instance),function(){var u;(u=i.layerContainer)==null||u.removeLayer(s.instance),i.map.removeLayer(s.instance)}},[i,s])}function qc(s){return function(a){const o=xa(),c=s(va(a,o),o);return Rc(o.map,a.attribution),Er(c.current,a.eventHandlers),Uc(c.current,o),c}}function Jg(s,i){const a=p.useRef();p.useEffect(function(){if(i.pathOptions!==a.current){const c=i.pathOptions??{};s.instance.setStyle(c),a.current=c}},[s,i])}function Yg(s){return function(a){const o=xa(),c=s(va(a,o),o);return Er(c.current,a.eventHandlers),Uc(c.current,o),Jg(c.current,a),c}}function Kg(s,i){const a=ba(s,i),o=qc(a);return Hc(o)}function Xg(s,i){const a=ba(s),o=Wg(a,i);return Ug(o)}function Qg(s,i){const a=ba(s,i),o=Yg(a);return Hc(o)}function ex(s,i){const a=ba(s,i),o=qc(a);return qg(o)}function tx(s,i,a){const{opacity:o,zIndex:c}=i;o!=null&&o!==a.opacity&&s.setOpacity(o),c!=null&&c!==a.zIndex&&s.setZIndex(c)}function sx(){return xa().map}function nx(s){const i=sx();return p.useEffect(function(){return i.on(s),function(){i.off(s)}},[i,s]),i}const ix=Qg(function({center:i,children:a,...o},c){const u=new Wn.Circle(i,o);return ya(u,Fc(c,{overlayContainer:u}))},$g);function ar(){return ar=Object.assign||function(s){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])}return s},ar.apply(this,arguments)}function ax({bounds:s,boundsOptions:i,center:a,children:o,className:c,id:u,placeholder:h,style:f,whenReady:g,zoom:b,...x},_){const[S]=p.useState({className:c,id:u,style:f}),[y,j]=p.useState(null);p.useImperativeHandle(_,()=>(y==null?void 0:y.map)??null,[y]);const N=p.useCallback(P=>{if(P!==null&&y===null){const E=new Wn.Map(P,x);a!=null&&b!=null?E.setView(a,b):s!=null&&E.fitBounds(s,i),g!=null&&E.whenReady(g),j(Hg(E))}},[]);p.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const v=y?qi.createElement(Zc,{value:y},o):h??null;return qi.createElement("div",ar({},S,{ref:N}),v)}const Or=p.forwardRef(ax),Bn=Kg(function({position:i,...a},o){const c=new Wn.Marker(i,a);return ya(c,Fc(o,{overlayContainer:c}))},function(i,a,o){a.position!==o.position&&i.setLatLng(a.position),a.icon!=null&&a.icon!==o.icon&&i.setIcon(a.icon),a.zIndexOffset!=null&&a.zIndexOffset!==o.zIndexOffset&&i.setZIndexOffset(a.zIndexOffset),a.opacity!=null&&a.opacity!==o.opacity&&i.setOpacity(a.opacity),i.dragging!=null&&a.draggable!==o.draggable&&(a.draggable===!0?i.dragging.enable():i.dragging.disable())}),zn=Xg(function(i,a){const o=new Wn.Popup(i,a.overlayContainer);return ya(o,a)},function(i,a,{position:o},c){p.useEffect(function(){const{instance:h}=i;function f(b){b.popup===h&&(h.update(),c(!0))}function g(b){b.popup===h&&c(!1)}return a.map.on({popupopen:f,popupclose:g}),a.overlayContainer==null?(o!=null&&h.setLatLng(o),h.openOn(a.map)):a.overlayContainer.bindPopup(h),function(){var x;a.map.off({popupopen:f,popupclose:g}),(x=a.overlayContainer)==null||x.unbindPopup(),a.map.removeLayer(h)}},[i,a,c,o])}),Mr=ex(function({url:i,...a},o){const c=new Wn.TileLayer(i,va(a,o));return ya(c,o)},function(i,a,o){tx(i,a,o);const{url:c}=a;c!=null&&c!==o.url&&i.setUrl(c)});delete zs.Icon.Default.prototype._getIconUrl;zs.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const rx=()=>{const[s,i]=p.useState(null),[a,o]=p.useState([]),[c,u]=p.useState(""),[h,f]=p.useState(null),[g,b]=p.useState(!0),[x,_]=p.useState(!1),[S,y]=p.useState(null);p.useEffect(()=>{(async()=>{try{if(!navigator.geolocation){f("Geolocation is not supported by this browser"),b(!1);return}const z=await new Promise((K,I)=>{navigator.geolocation.getCurrentPosition(K,I,{enableHighAccuracy:!0,timeout:2e4,maximumAge:0})}),{latitude:F,longitude:A}=z.coords;i({lat:F,lng:A}),await j(F,A),await N(F,A),b(!1)}catch(z){console.error("Geolocation error:",z),f(z.message||"📍 Location access denied. Please enable GPS and refresh."),b(!1)}})()},[]);const j=async(E,z)=>{try{const F=localStorage.getItem("token");F&&await je.post("/api/user/location",{lat:E,lng:z,address:`Current Location: ${E.toFixed(4)}, ${z.toFixed(4)}`},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`}})}catch(F){console.error("Error saving customer location:",F)}},N=async(E,z)=>{try{const F=localStorage.getItem("token");if(!F){f("Please log in to view nearby washermen");return}const H=(await je.get(`/api/washer/nearby?lat=${E}&lng=${z}`,{headers:{Authorization:`Bearer ${F}`}})).data;Array.isArray(H)&&H.length>0?(o(H),_(!1)):(o([]),_(!0))}catch(F){console.error("Error fetching nearby washermen:",F),f("Failed to fetch nearby washermen")}},v=E=>{u(E)},P=E=>{y(E)};return g?e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx($i,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-gray-700",children:"Loading map..."})]})}):h?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(lr,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Error"})]}),e.jsx("p",{className:"text-red-700 mb-4",children:h}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}):s?x?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[e.jsx(Mn,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Washermen Found"}),e.jsx("p",{className:"text-yellow-700",children:"No washermen are available in your area at the moment."})]}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nearby Washermen with Available Slots"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qa,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{type:"date",value:c,onChange:E=>v(E.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 rounded-lg overflow-hidden border border-gray-200",children:e.jsxs(Or,{center:[s.lat,s.lng],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(Mr,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.jsx(Bn,{position:[s.lat,s.lng],children:e.jsx(zn,{children:e.jsxs("div",{children:[e.jsx("strong",{children:"📍 Your Location"}),e.jsx("br",{}),s.lat.toFixed(6),", ",s.lng.toFixed(6)]})})}),a.map((E,z)=>e.jsx(Bn,{position:[E.location.lat,E.location.lng],icon:zs.divIcon({className:"washerman-marker",html:'<div style="background-color: #3b82f6; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[24,24],iconAnchor:[12,12]}),eventHandlers:{click:()=>P(E)},children:e.jsx(zn,{children:e.jsxs("div",{children:[e.jsxs("strong",{children:["🧺 ",E.name]}),e.jsx("br",{}),"Contact: ",E.contact,e.jsx("br",{}),"Range: ",E.range||500,"m"]})})},E._id||z))]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Available Washermen"}),a.map((E,z)=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(S==null?void 0:S._id)===E._id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>P(E),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:E.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Contact: ",E.contact]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Range: ",E.range||500,"m"]})]}),e.jsx("div",{className:"text-right",children:E.totalAvailableSlots?e.jsxs("div",{className:"text-green-600 text-sm",children:[e.jsx(Rn,{className:"w-4 h-4 inline mr-1"}),E.totalAvailableSlots," slots available"]}):e.jsx("div",{className:"text-gray-500 text-sm",children:"No slots available"})})]})},E._id||z))]})]}),S&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Selected Washerman: ",S.name]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",S.contact]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Range:"})," ",S.range||500,"m"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Available Slots:"})," ",S.totalAvailableSlots||0]}),c&&e.jsxs("p",{children:[e.jsx("strong",{children:"Selected Date:"})," ",new Date(c).toLocaleDateString()]})]})]})]})]}):e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[e.jsx(Mn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Location Required"}),e.jsx("p",{className:"text-gray-600",children:"Please set your location to view nearby washermen"})]})},rr=async(s,i)=>{try{const a=localStorage.getItem("token");if(!a)return console.warn("No token found, skipping location save"),!1;const o=await lt("/api/user/location",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({lat:s,lng:i})});if(o.ok){const c=await o.json();return console.log("✅ Location saved:",c),!0}else{const c=await o.json().catch(()=>({}));return console.error("❌ Failed to save location:",o.status,c),!1}}catch(a){return console.error("❌ Error saving location:",a),!1}},or=()=>new Promise((s,i)=>{if(!localStorage.getItem("token")){i(new Error("Please log in to use location services"));return}if(!navigator.geolocation)return i(new Error("Geolocation not supported"));navigator.geolocation.getCurrentPosition(o=>{s({lat:o.coords.latitude,lng:o.coords.longitude})},o=>{i(new Error("Geolocation error: "+o.message))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),na=async()=>{try{const s=localStorage.getItem("token");if(!s)return console.warn("No token found, cannot fetch saved location"),null;const i=await lt("/api/user/location",{headers:{Authorization:`Bearer ${s}`}});if(i.ok){const a=await i.json();return a.location?{lat:a.location.coordinates[1],lng:a.location.coordinates[0]}:null}else return console.error("❌ Failed to fetch saved location:",i.status),null}catch(s){return console.error("❌ Error fetching saved location:",s),null}},ox=()=>{const[s,i]=p.useState(null),[a,o]=p.useState(null),[c,u]=p.useState(""),[h,f]=p.useState(!1),g=async()=>{f(!0),u("Getting current location...");try{const _=await or();i(_),u("Current location obtained successfully!")}catch(_){u(`Error: ${_.message}`)}finally{f(!1)}},b=async()=>{if(!s){u("Please get current location first");return}f(!0),u("Saving location to database...");try{if(await rr(s.lat,s.lng)){u("Location saved to database successfully!");const S=await na();o(S)}else u("Failed to save location to database")}catch(_){u(`Error: ${_.message}`)}finally{f(!1)}},x=async()=>{f(!0),u("Getting saved location from database...");try{const _=await na();_?(o(_),u("Saved location retrieved successfully!")):u("No saved location found in database")}catch(_){u(`Error: ${_.message}`)}finally{f(!1)}};return p.useEffect(()=>{x()},[]),e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"📍 Location Test"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Current Location"}),s?e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Latitude: ",s.lat.toFixed(6)]}),e.jsxs("p",{children:["Longitude: ",s.lng.toFixed(6)]})]}):e.jsx("p",{className:"text-gray-500",children:"No current location"}),e.jsx("button",{onClick:g,disabled:h,className:"mt-2 w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:"Get Current Location"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Saved Location (Database)"}),a?e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Latitude: ",a.lat.toFixed(6)]}),e.jsxs("p",{children:["Longitude: ",a.lng.toFixed(6)]})]}):e.jsx("p",{className:"text-gray-500",children:"No saved location"}),e.jsx("button",{onClick:x,disabled:h,className:"mt-2 w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50",children:"Get Saved Location"})]}),e.jsx("button",{onClick:b,disabled:h||!s,className:"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 disabled:opacity-50",children:"Save Current Location to Database"}),c&&e.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:c})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Instructions:"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'1. Click "Get Current Location" to get your GPS coordinates'}),e.jsx("li",{children:'2. Click "Save Current Location to Database" to save it'}),e.jsx("li",{children:'3. Click "Get Saved Location" to retrieve from database'}),e.jsx("li",{children:"4. Check the status messages for feedback"})]})]})]})]})},lx=()=>{var N;const[s,i]=p.useState(null),[a,o]=p.useState(null),[c,u]=p.useState(""),[h,f]=p.useState(!1),[g,b]=p.useState(null),x=async()=>{const v=localStorage.getItem("token");if(!v){u("No authentication token found. Please sign in first.");return}try{const P=await lt("/api/user/currentuser",{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(P.ok){const E=await P.json();b(E),u(`Logged in as: ${E.name} (${E.email})`),console.log("User info:",E)}else u("Authentication failed. Please sign in again.")}catch(P){u("Error checking authentication"),console.error("Auth error:",P)}},_=async()=>{f(!0),u("Getting current location...");try{const v=await or();i(v),u(`Current location obtained: ${v.lat.toFixed(6)}, ${v.lng.toFixed(6)}`)}catch(v){u(`Error: ${v.message}`)}finally{f(!1)}},S=async()=>{if(!s){u("Please get current location first");return}f(!0),u("Saving location to database...");try{await rr(s.lat,s.lng)?(u("Location saved to database successfully!"),setTimeout(()=>{y()},1e3)):u("Failed to save location to database")}catch(v){u(`Error: ${v.message}`)}finally{f(!1)}},y=async()=>{f(!0),u("Getting saved location from database...");try{const v=await na();v?(o(v),u(`Saved location retrieved: ${v.lat.toFixed(6)}, ${v.lng.toFixed(6)}`)):u("No saved location found in database")}catch(v){u(`Error: ${v.message}`)}finally{f(!1)}},j=async()=>{f(!0),u("Auto-saving location...");try{const v=await or();if(i(v),await rr(v.lat,v.lng)){u("Location auto-saved successfully!");const E=await na();o(E)}else u("Failed to auto-save location")}catch(v){u(`Error: ${v.message}`)}finally{f(!1)}};return p.useEffect(()=>{x()},[]),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"🔍 Location Debug"}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Authentication Status"}),g?e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",g.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",g.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",g.role]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Current Location in DB:"})," ",(N=g.location)!=null&&N.coordinates?`${g.location.coordinates[1].toFixed(6)}, ${g.location.coordinates[0].toFixed(6)}`:"Not set"]})]}):e.jsx("p",{className:"text-red-600",children:"Not authenticated"}),e.jsx("button",{onClick:x,className:"mt-2 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Refresh Auth Status"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Current GPS Location"}),s?e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Latitude: ",s.lat.toFixed(6)]}),e.jsxs("p",{children:["Longitude: ",s.lng.toFixed(6)]})]}):e.jsx("p",{className:"text-gray-500",children:"No current location"}),e.jsx("button",{onClick:_,disabled:h,className:"mt-2 w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:"Get Current Location"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Saved Location (Database)"}),a?e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Latitude: ",a.lat.toFixed(6)]}),e.jsxs("p",{children:["Longitude: ",a.lng.toFixed(6)]})]}):e.jsx("p",{className:"text-gray-500",children:"No saved location"}),e.jsx("button",{onClick:y,disabled:h,className:"mt-2 w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50",children:"Get Saved Location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:S,disabled:h||!s,className:"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 disabled:opacity-50",children:"Save Current Location to Database"}),e.jsx("button",{onClick:j,disabled:h,className:"w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700 disabled:opacity-50",children:"Auto-Save Location (Get + Save)"})]}),c&&e.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:c})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Debug Instructions:"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"1. Check authentication status first"}),e.jsx("li",{children:'2. Use "Auto-Save Location" to test the complete flow'}),e.jsx("li",{children:"3. Check browser console for detailed logs"}),e.jsx("li",{children:"4. Verify location is saved in database"}),e.jsx("li",{children:"5. Check backend console for server-side logs"})]})]})]})]})};delete zs.Icon.Default.prototype._getIconUrl;zs.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const cx=({onLocationSelect:s,selectedLocation:i,serviceRadius:a,nearbyCustomers:o=[]})=>{const[c,u]=p.useState({lat:19.076,lng:72.8777}),[h,f]=p.useState(13);p.useEffect(()=>{i&&(u({lat:i.lat,lng:i.lng}),f(15))},[i]);const g=async b=>{var S,y,j,N,v,P,E;const{lat:x,lng:_}=b.latlng;try{const F=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${x}&lon=${_}&zoom=18&addressdetails=1`)).json(),A={lat:x,lng:_,address:F.display_name||`Selected Location: ${x.toFixed(4)}, ${_.toFixed(4)}`,name:((S=F.address)==null?void 0:S.city)||((y=F.address)==null?void 0:y.town)||((j=F.address)==null?void 0:j.village)||"Selected Location",city:((N=F.address)==null?void 0:N.city)||((v=F.address)==null?void 0:v.town)||((P=F.address)==null?void 0:P.village)||"",state:((E=F.address)==null?void 0:E.state)||"",shortAddress:F.display_name||`${x.toFixed(4)}, ${_.toFixed(4)}`};console.log("📍 Map location selected:",A),s(A)}catch(z){console.error("Error getting address from coordinates:",z);const F={lat:x,lng:_,address:`Selected Location: ${x.toFixed(4)}, ${_.toFixed(4)}`,name:"Selected Location",city:"",state:"",shortAddress:`${x.toFixed(4)}, ${_.toFixed(4)}`};console.log("📍 Map location selected (fallback):",F),s(F)}};return e.jsxs("div",{style:{height:"450px",width:"100%"},children:[e.jsxs(Or,{center:[c.lat,c.lng],zoom:h,style:{height:"100%",width:"100%"},onClick:g,children:[e.jsx(Mr,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),i&&e.jsx(Bn,{position:[i.lat,i.lng],children:e.jsx(zn,{children:e.jsxs("div",{children:[e.jsx("strong",{children:"📍 Selected Location"}),e.jsx("br",{}),i.address]})})}),i&&a&&e.jsx(ix,{center:[i.lat,i.lng],radius:a*1e3,pathOptions:{fillColor:"#3b82f6",fillOpacity:.1,color:"#3b82f6",weight:2}}),o.map((b,x)=>e.jsx(Bn,{position:[b.lat,b.lng],icon:zs.divIcon({className:"customer-marker",html:'<div style="background-color: #10b981; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[24,24],iconAnchor:[12,12]}),children:e.jsx(zn,{children:e.jsx("div",{children:e.jsxs("strong",{children:["Customer: ",b.name||"Unknown"]})})})},x))]}),e.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"8px 12px",borderRadius:"6px",fontSize:"12px",color:"#374151",border:"1px solid #e5e7eb",pointerEvents:"none"},children:"📍 Click anywhere on the map to select your service location"})]})},dx=()=>{const s=ws();p.useRef(null);const i=R=>{if(!R)return"Address not available";if(typeof R=="string")return R;if(R.street||R.city||R.state||R.zip){const G=[R.street,R.city,R.state,R.zip].filter(Boolean);return G.length>0?G.join(", "):"Address not available"}return"Address not available"},[a,o]=p.useState(new Date),[c,u]=p.useState([]),[h,f]=p.useState([]),[g,b]=p.useState(!0),[x,_]=p.useState({name:"",email:"",contact:"",_id:"",serviceLocation:null,isWasherman:!0}),[S,y]=p.useState(null),[j,N]=p.useState({monday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]},tuesday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]},wednesday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]},thursday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]},friday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]},saturday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]},sunday:{enabled:!0,slots:[{id:1,time:"06:00 - 09:00",enabled:!0,label:"Morning Slot 1",maxCapacity:10},{id:2,time:"09:00 - 12:00",enabled:!0,label:"Afternoon Slot 1",maxCapacity:10},{id:3,time:"12:00 - 15:00",enabled:!0,label:"Afternoon Slot 2",maxCapacity:10},{id:4,time:"15:00 - 18:00",enabled:!0,label:"Evening Slot",maxCapacity:10},{id:5,time:"18:00 - 21:00",enabled:!0,label:"Evening Slot",maxCapacity:10}]}}),[v,P]=p.useState("Home"),[E,z]=p.useState("monday"),[F,A]=p.useState(new Date().toISOString().split("T")[0]),[H,K]=p.useState(!1),[I,$]=p.useState(!1),[W,J]=p.useState(null),[U,te]=p.useState(null),[oe,le]=p.useState(null),[ee,he]=p.useState(!1),[X,st]=p.useState(null),[ae,fe]=p.useState(null),[be,Pe]=p.useState([]),[Le,ce]=p.useState(2.5),[B,Y]=p.useState([]),[me,Oe]=p.useState(!1),de=async(R,G)=>{try{const ne=localStorage.getItem("token");await je.put(`/api/booking/${R}/status`,{status:G},{headers:{Authorization:`Bearer ${ne}`}}),u(xe=>xe.map(Ie=>Ie._id===R?{...Ie,status:G}:Ie))}catch(ne){console.error("Error updating order status:",ne),alert("Failed to update status")}},we=async R=>{if(window.confirm("Are you sure you received the cash?"))try{const ne=localStorage.getItem("token");(await(await lt(`/api/booking/orders/${R}/mark-paid`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`}})).json()).success?(alert("✅ Payment marked as paid!"),u(De=>De.map(ve=>ve._id===R?{...ve,paymentStatus:"paid"}:ve))):alert("❌ Could not mark payment as paid.")}catch(ne){console.error("Error updating payment:",ne),alert("⚠️ Something went wrong.")}},mt=()=>{he(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async R=>{const{latitude:G,longitude:ne}=R.coords;console.log("Current location detected:",G,ne);try{const xe=await pe(G,ne);console.log("Place info received:",xe);const Ie={lat:G,lng:ne,address:xe.fullAddress,shortAddress:xe.shortAddress,city:xe.city,state:xe.state,country:xe.country,name:`${xe.city}, ${xe.state}`};te(Ie),le(Ie),he(!1),Z(Ie),console.log("Location detected and saved successfully"),alert(`✅ Location detected successfully!

📍 ${xe.shortAddress}
🌍 ${xe.city}, ${xe.state}
📊 Coordinates: ${G.toFixed(6)}, ${ne.toFixed(6)}

Your location has been saved and will be used for your service area.`)}catch(xe){console.error("Error processing location:",xe);const Ie=`Current Location: ${G.toFixed(6)}, ${ne.toFixed(6)}`,De={lat:G,lng:ne,address:Ie,shortAddress:`${G.toFixed(4)}, ${ne.toFixed(4)}`,city:"Unknown City",state:"Unknown State",country:"Unknown Country",name:"Current Location"};te(De),le(De),he(!1),Z(De),alert(`✅ Location detected successfully!

📊 Coordinates: ${G.toFixed(6)}, ${ne.toFixed(6)}

Note: Could not retrieve place name. Your location has been saved with coordinates.`)}},R=>{console.error("Geolocation error:",R),he(!1);let G="Failed to get your location";switch(R.code){case R.PERMISSION_DENIED:G="Location access denied. Please allow location access in your browser settings.";break;case R.POSITION_UNAVAILABLE:G="Location information unavailable. Please check your GPS settings.";break;case R.TIMEOUT:G="Location request timed out. Please try again.";break;default:G="Unable to get your location. Please try again."}alert(G)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):(he(!1),alert("Geolocation is not supported by this browser. Please use a modern browser with location support."))},Z=R=>{const G={id:Date.now(),name:R.name||"New Location",address:R.address,lat:R.lat,lng:R.lng,isUsed:!1,serviceRadius:Le};be.some(xe=>Math.abs(xe.lat-R.lat)<.001&&Math.abs(xe.lng-R.lng)<.001)||Pe([G,...be]),Ae(R.lat,R.lng)},q=async R=>{try{const G=localStorage.getItem("token");if(!G){alert("Please login to use this location");return}const ne=be.find(Ie=>Ie.id===R);if(!ne){alert("Location not found");return}(await je.put(`/api/user/${x._id}`,{location:{type:"Point",coordinates:[ne.lng,ne.lat]},range:ne.serviceRadius*1e3,isWasherman:!0},{headers:{Authorization:`Bearer ${G}`}})).status===200&&(_(Ie=>({...Ie,serviceLocation:{name:ne.name,address:ne.address,lat:ne.lat,lng:ne.lng,serviceRadius:ne.serviceRadius},isWasherman:!0})),Pe(Ie=>Ie.map(De=>({...De,isUsed:De.id===R}))),le(ne),alert(`✅ Location "${ne.name}" is now your active service location!`),Ae(ne.lat,ne.lng))}catch(G){console.error("Error updating service location:",G),alert("❌ Failed to update service location. Please try again.")}},re=R=>{Pe(be.filter(G=>G.id!==R))},pe=async(R,G)=>{var ne,xe,Ie,De,ve;try{const yt=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${R}&lon=${G}&zoom=18&addressdetails=1`);if(!yt.ok)throw new Error("Geocoding service unavailable");const nt=await yt.json();if(nt.display_name){const ss=nt.display_name.split(", ").slice(0,3).join(", ");return{fullAddress:nt.display_name,shortAddress:ss,city:((ne=nt.address)==null?void 0:ne.city)||((xe=nt.address)==null?void 0:xe.town)||((Ie=nt.address)==null?void 0:Ie.village)||"Unknown City",state:((De=nt.address)==null?void 0:De.state)||"Unknown State",country:((ve=nt.address)==null?void 0:ve.country)||"Unknown Country"}}else throw new Error("No address found")}catch(yt){return console.error("Reverse geocoding error:",yt),{fullAddress:`Location at ${R.toFixed(6)}, ${G.toFixed(6)}`,shortAddress:`${R.toFixed(4)}, ${G.toFixed(4)}`,city:"Unknown City",state:"Unknown State",country:"Unknown Country"}}},Ae=async(R,G)=>{var ne;try{Oe(!0);const xe=localStorage.getItem("token");if(!xe){console.error("No authentication token found");return}const Ie=await je.get(`/api/location/customers-near-laundryman?lat=${R}&lng=${G}&range=${Le*1e3}`,{headers:{Authorization:`Bearer ${xe}`}});Ie.data?(Y(Ie.data.customers||[]),console.log("Nearby customers fetched:",((ne=Ie.data.customers)==null?void 0:ne.length)||0)):(console.error("Failed to fetch nearby customers"),Y([]))}catch(xe){console.error("Error fetching nearby customers:",xe),Y([])}finally{Oe(!1)}},Ce=async()=>{try{const R=localStorage.getItem("token"),G=await je.get("/api/user/currentuser",{headers:{Authorization:`Bearer ${R}`}});_({name:G.data.name,email:G.data.email,contact:G.data.contact,_id:G.data._id,image:G.data.image||"/src/washer.png",isWasherman:G.data.isWasherman||!1,serviceLocation:G.data.location?{name:"Saved Location",address:G.data.location.address||"Your saved location",lat:G.data.location.coordinates[1],lng:G.data.location.coordinates[0],serviceRadius:(G.data.range||500)/1e3}:null}),G.data.location&&(ce((G.data.range||500)/1e3),le({lat:G.data.location.coordinates[1],lng:G.data.location.coordinates[0],address:G.data.location.address||"Saved Location",name:"Saved Location"}))}catch(R){console.error("Failed to fetch profile:",R)}},Fe=async()=>{const R=localStorage.getItem("token");console.log("Fetching assigned orders with token:",R);try{const G=await je.get("/api/booking/assigned",{headers:{Authorization:`Bearer ${R}`}});console.log("Fetched assigned orders:",G.data);const ne=Array.isArray(G.data)?G.data.map(xe=>({...xe,id:xe._id})):[];u(ne)}catch(G){console.error("Error fetching assigned bookings:",G)}},Pt=async R=>{R.preventDefault();const G=new FormData(R.target),ne={name:G.get("name"),email:G.get("email"),contact:G.get("contact"),isWasherman:!0};try{const xe=localStorage.getItem("token"),Ie=await je.put(`/api/user/${x._id}`,ne,{headers:{Authorization:`Bearer ${xe}`}});console.log("Profile updated successfully:",Ie.data),_(De=>({...De,...ne})),P("Home")}catch(xe){console.error("Error updating profile:",xe)}},vt=()=>{const R=new Date().getHours();return R<12?"Good Morning":R<17?"Good Afternoon":"Good Evening"},et=()=>{K(!H)};p.useEffect(()=>{Ce(),Fe()},[]),p.useEffect(()=>{v==="Location"&&x.serviceLocation&&Ae(x.serviceLocation.lat,x.serviceLocation.lng)},[v,x.serviceLocation]);const cs=new Date().toISOString().split("T")[0],Lt=c.filter(R=>R.date===cs),ft={totalOrders:Lt.length,pendingOrders:Lt.filter(R=>R.status.toLowerCase()==="pending"||R.status.toLowerCase()==="accepted").length,completedOrders:Lt.filter(R=>{var G;return R.status.toLowerCase()==="delivered"&&((G=R.paymentStatus)==null?void 0:G.toLowerCase())==="paid"}).length,activeSlots:Object.values(j).reduce((R,G)=>R+G.slots.filter(ne=>ne.enabled).length,0),totalSlots:Object.values(j).reduce((R,G)=>R+G.slots.length,0),todayEarnings:Lt.filter(R=>{var G;return R.status.toLowerCase()==="delivered"&&((G=R.paymentStatus)==null?void 0:G.toLowerCase())==="paid"}).reduce((R,G)=>R+(G.totalAmount||0),0)};return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("header",{className:"mobile-header",children:e.jsxs("div",{className:"mobile-header-content",children:[e.jsxs("div",{className:"mobile-logo",children:[e.jsx("img",{src:"/washer.webp",alt:"Profile",className:"mobile-profile-img"}),e.jsx("span",{className:"mobile-profile-name",children:x.name})]}),e.jsxs("button",{className:"hamburger-menu",onClick:et,"aria-label":"Toggle menu",children:[e.jsx("span",{className:`hamburger-line ${H?"active":""}`}),e.jsx("span",{className:`hamburger-line ${H?"active":""}`}),e.jsx("span",{className:`hamburger-line ${H?"active":""}`})]})]})}),e.jsxs("aside",{className:`sidebar ${H?"mobile-open":""}`,children:[e.jsxs("div",{className:"sidebar-profile",onClick:()=>P("Profile"),children:[e.jsx("img",{src:"/washer.webp",alt:"Laundryman",className:"sidebar-profile-img"}),e.jsx("span",{className:"sidebar-profile-name",children:x.name})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("button",{className:`nav-button ${v==="Home"?"active":""}`,onClick:()=>{P("Home"),K(!1)},children:[e.jsx("span",{className:"nav-icon",children:"🏠"}),e.jsx("span",{children:"Home"})]}),e.jsxs("button",{className:`nav-button ${v==="Schedule"?"active":""}`,onClick:()=>{P("Schedule"),K(!1)},children:[e.jsx("span",{className:"nav-icon",children:"📅"}),e.jsx("span",{children:"Weekly Schedule"})]}),e.jsxs("button",{className:`nav-button ${v==="Location"?"active":""}`,onClick:()=>{P("Location"),K(!1)},children:[e.jsx("span",{className:"nav-icon",children:"📍"}),e.jsx("span",{children:"Set Location"})]}),e.jsxs("button",{className:`nav-button ${v==="Orders"?"active":""}`,onClick:()=>{P("Orders"),K(!1)},children:[e.jsx("span",{className:"nav-icon",children:"📋"}),e.jsx("span",{children:"Orders"})]}),e.jsxs("button",{className:`nav-button ${v==="Profile"?"active":""}`,onClick:()=>{P("Profile"),K(!1)},children:[e.jsx("span",{className:"nav-icon",children:"👤"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{className:`nav-button ${v==="AddServices"?"active":""}`,onClick:()=>{P("AddServices"),K(!1),s("/adminservices")},children:[e.jsx("span",{className:"nav-icon",children:"➕"}),e.jsx("span",{children:"Add Services"})]})]}),e.jsxs("button",{className:`nav-button ${v==="Logout"?"active":""}`,onClick:()=>{P("Logout"),K(!1),$(!0)},children:[e.jsx("span",{className:"nav-icon",children:"🚪"}),e.jsx("span",{children:"Logout"})]})]}),H&&e.jsx("div",{className:"mobile-overlay",onClick:et}),e.jsxs("main",{className:"main-content",children:[v==="Home"&&e.jsxs("div",{className:"home-page",children:[e.jsxs("section",{className:"welcome-section",children:[e.jsxs("div",{className:"welcome-content",children:[e.jsxs("h1",{children:[vt(),", ",x.name,"! 👋"]}),e.jsx("p",{children:"Here's what's happening with your laundry service today"})]}),e.jsxs("div",{className:"date-time",children:[e.jsx("div",{className:"current-date",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"current-time",children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("section",{className:"dashboard-stats",children:e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card orders",children:[e.jsx("div",{className:"stat-icon",children:"📦"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Orders"}),e.jsx("p",{className:"stat-number",children:ft.totalOrders}),e.jsx("span",{className:"stat-label",children:"Today"})]})]}),e.jsxs("div",{className:"stat-card completed",children:[e.jsx("div",{className:"stat-icon",children:"✅"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Completed"}),e.jsx("p",{className:"stat-number",children:ft.completedOrders}),e.jsx("span",{className:"stat-label",children:"Today"})]})]}),e.jsxs("div",{className:"stat-card earnings",children:[e.jsx("div",{className:"stat-icon",children:"₹"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Today's Earnings"}),e.jsxs("p",{className:"stat-number",children:["₹",ft.todayEarnings]}),e.jsx("span",{className:"stat-label"})]})]})]})})]}),v==="Schedule"&&e.jsx(ux,{}),v==="Location"&&e.jsxs("section",{className:"location-section",children:[e.jsxs("div",{className:"location-header",children:[e.jsx("h3",{children:"Set Your Service Location"}),e.jsx("p",{children:"Choose your preferred location for laundry services"})]}),e.jsxs("div",{className:"location-content",children:[e.jsx("div",{className:"location-selection-area",children:e.jsxs("div",{className:"location-map-container",children:[e.jsxs("div",{className:"current-location-section",children:[e.jsx("h4",{children:"📍 Current Location"}),e.jsxs("div",{className:"location-detection-info",children:[e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Click the button below to detect your current location using GPS"}),e.jsx("button",{className:`detect-location-btn ${ee?"detecting":""}`,onClick:mt,disabled:ee,style:{backgroundColor:ee?"#f3f4f6":"#3b82f6",color:ee?"#6b7280":"white",cursor:ee?"not-allowed":"pointer",position:"relative"},children:ee?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"spin 1s linear infinite"},children:"🔄"}),"Detecting Location..."]}):e.jsx(e.Fragment,{children:"📍 Use Current Location"})}),ee&&e.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"#059669",backgroundColor:"#d1fae5",padding:"8px",borderRadius:"4px",border:"1px solid #a7f3d0"},children:"🔍 Please allow location access when prompted by your browser"})]}),U&&e.jsxs("div",{className:"location-info",children:[e.jsxs("div",{className:"location-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"📍 Place:"})," ",U.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🏙️ City:"})," ",U.city]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🏛️ State:"})," ",U.state]}),e.jsxs("p",{children:[e.jsx("strong",{children:"📝 Address:"})," ",U.shortAddress||U.address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"📊 Coordinates:"})," ",U.lat.toFixed(6),", ",U.lng.toFixed(6)]})]}),e.jsx("button",{className:"save-location-btn",onClick:()=>Z(U),children:"💾 Save This Location"})]})]}),e.jsxs("div",{className:"map-section",children:[e.jsx("h4",{children:"🗺️ Interactive Map - Click to Select Location"}),e.jsx("div",{className:"map-controls",children:e.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:"📍 Click anywhere on the map to select your service location"})}),e.jsx(cx,{onLocationSelect:le,selectedLocation:oe,serviceRadius:Le,nearbyCustomers:B}),oe&&e.jsxs("div",{className:"selected-location-info",style:{marginTop:"12px",padding:"12px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px"},children:[e.jsxs("h5",{style:{color:"#0369a1",marginBottom:"8px"},children:["📍 Selected Location: ",oe.name]}),e.jsxs("p",{style:{fontSize:"14px",marginBottom:"4px"},children:[e.jsx("strong",{children:"🏙️ City:"})," ",oe.city]}),e.jsxs("p",{style:{fontSize:"14px",marginBottom:"4px"},children:[e.jsx("strong",{children:"🏛️ State:"})," ",oe.state]}),e.jsxs("p",{style:{fontSize:"14px",marginBottom:"4px"},children:[e.jsx("strong",{children:"📝 Address:"})," ",oe.shortAddress||oe.address]}),e.jsxs("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:[e.jsx("strong",{children:"📊 Coordinates:"})," ",oe.lat,", ",oe.lng]}),e.jsx("button",{className:"save-location-btn",onClick:()=>Z(oe),style:{backgroundColor:"#0ea5e9",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"💾 Save Selected Location"})]})]})]})}),e.jsxs("div",{className:"service-area-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{children:"🎯 Service Area Settings"})}),e.jsxs("div",{className:"service-area-content",children:[e.jsxs("div",{className:"service-radius",children:[e.jsxs("label",{htmlFor:"serviceRadius",children:["Service Radius: ",Le," km"]}),e.jsxs("div",{className:"radius-input-group",children:[e.jsx("input",{id:"serviceRadius",type:"range",min:"0.5",max:"5",step:"0.5",value:Le,onChange:R=>ce(Number.parseFloat(R.target.value)),className:"radius-slider"}),e.jsxs("div",{className:"radius-labels",children:[e.jsx("span",{children:"0.5 km"}),e.jsx("span",{children:"5 km"})]})]}),e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",marginTop:"8px"},children:"This radius will be saved with each location and determines your service coverage area."})]}),x.serviceLocation&&e.jsxs("div",{className:"current-service-location",children:[e.jsx("h5",{children:"✅ Current Active Service Location"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",x.serviceLocation.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",x.serviceLocation.address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Radius:"})," ",x.serviceLocation.serviceRadius||Le," km"]})]}),e.jsxs("div",{className:"nearby-customers-section",style:{marginTop:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h4",{children:"👥 Nearby Customers"}),e.jsx("button",{onClick:()=>{x.serviceLocation?Ae(x.serviceLocation.lat,x.serviceLocation.lng):alert("Please set your service location first")},disabled:me,style:{backgroundColor:"#3b82f6",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:me?"not-allowed":"pointer",fontSize:"12px",fontWeight:"600",opacity:me?.6:1},children:me?"🔄 Loading...":"🔄 Refresh"})]}),me?e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:[e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 8px"}}),"Loading nearby customers..."]}):B.length>0?e.jsx("div",{className:"customers-list",children:B.map((R,G)=>{var ne;return e.jsx("div",{className:"customer-item",style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",marginBottom:"8px",backgroundColor:"#f9fafb"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h6",{style:{margin:"0 0 4px 0",color:"#374151"},children:["👤 ",R.name]}),e.jsxs("p",{style:{margin:"0 0 2px 0",fontSize:"12px",color:"#6b7280"},children:["📞 ",R.contact||"Contact not available"]}),e.jsxs("p",{style:{margin:"0",fontSize:"12px",color:"#6b7280"},children:["📧 ",R.email||"Email not available"]})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs("span",{style:{backgroundColor:"#10b981",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:[((ne=R.distance)==null?void 0:ne.toFixed(2))||"Unknown"," km"]})})]})},R._id||G)})}):e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"👥"}),e.jsx("p",{children:"No customers found in your service area"}),e.jsx("p",{style:{fontSize:"12px"},children:"Customers will appear here when they set their location"})]})]})]})]}),e.jsxs("div",{className:"saved-locations-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{children:"💾 Saved Locations"})}),e.jsx("div",{className:"saved-locations-list",children:be.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"📍"}),e.jsx("p",{children:"No saved locations yet"}),e.jsx("span",{children:"Add locations to see them here"})]}):be.map(R=>e.jsxs("div",{className:"saved-location-item",children:[e.jsxs("div",{className:"location-info",children:[e.jsxs("h5",{children:["📍 ",R.name||"Saved Location"]}),R.city&&e.jsxs("p",{style:{fontSize:"14px",color:"#374151",marginBottom:"2px"},children:["🏙️ ",R.city,", ",R.state]}),e.jsx("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px"},children:R.shortAddress||R.address}),e.jsxs("span",{className:"coordinates",style:{fontSize:"12px",color:"#9ca3af"},children:["📊 ",R.lat.toFixed(4),", ",R.lng.toFixed(4)]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:["🎯 Service Radius: ",R.serviceRadius||2.5," km"]})]}),e.jsxs("div",{className:"location-actions",children:[e.jsx("button",{className:`use-location-btn ${R.isUsed?"used":""}`,onClick:()=>q(R.id),children:R.isUsed?"✓ Active":"Use"}),e.jsx("button",{className:"delete-location-btn",onClick:()=>re(R.id),children:"🗑️"})]})]},R.id))})]})]})]}),v==="Orders"&&e.jsxs("section",{className:"orders-section",children:[e.jsx("h3",{children:"Assigned Orders"}),c.length===0?e.jsxs("div",{className:"empty-orders",children:[e.jsx("div",{className:"empty-icon",children:"📋"}),e.jsx("p",{children:"No assigned orders"})]}):e.jsx("div",{className:"orders-by-date",children:(()=>{const R={};return c.forEach(ne=>{const xe=new Date(ne.date).toISOString().split("T")[0];R[xe]||(R[xe]=[]),R[xe].push(ne)}),Object.keys(R).sort().map(ne=>{const xe=R[ne],Ie=new Date().toISOString().split("T")[0];let De="";return ne===Ie?De="Today's Orders":De=new Date(ne).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+"'s Orders",e.jsxs("div",{className:"date-group",children:[e.jsxs("div",{className:"date-header",children:[e.jsx("h4",{children:De}),e.jsxs("span",{className:"order-count-badge",children:[xe.length," orders"]})]}),e.jsx("div",{className:"orders-grid",children:xe.map(ve=>{var ss,Ge;const yt=ve.productId||{},nt=ve.guest||{};nt.address;const pt=ve.slot||{};return e.jsxs("div",{className:"order-card",children:[yt.image&&e.jsx("div",{className:"order-image-container mb-2",children:e.jsx("img",{src:yt.image,alt:yt.name,className:"w-full h-40 object-contain rounded",onError:ds=>{ds.target.src="https://via.placeholder.com/150"}})}),e.jsxs("div",{className:"order-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",ve._id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",nt.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",nt.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",nt.contact||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",yt.category||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Type:"})," ",((ss=ve.selectedOptions)==null?void 0:ss.map(ds=>ds.name).join(", "))||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quantity:"})," ",ve.quantity||1]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Label:"})," ",pt.label||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Price:"})," ₹",ve.totalAmount||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment:"})," ",ve.paymentMethod||"N/A"," (",ve.paymentStatus||"N/A",")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pickup Date:"})," ",new Date(ve.date).toISOString().split("T")[0]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time Slot:"})," ",pt.range||"N/A"]}),ve.deliveryAddress?e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Delivery Address:"})}),e.jsx("p",{style:{marginLeft:"10px",fontSize:"14px",color:"#374151"},children:ve.deliveryAddress.fullAddress||i(ve.deliveryAddress)}),ve.deliveryInstructions&&e.jsxs("p",{style:{marginLeft:"10px",fontSize:"13px",color:"#6b7280",fontStyle:"italic"},children:[e.jsx("strong",{children:"Instructions:"})," ",ve.deliveryInstructions]})]}):nt.address?e.jsxs("p",{children:[e.jsx("strong",{children:"Customer Address:"})," ",i(nt.address)]}):e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," Not available"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:`status-badge ${(Ge=ve.status)==null?void 0:Ge.toLowerCase().replace(" ","-")}`,children:ve.status||"N/A"})]})]}),e.jsxs("div",{className:"action-buttons",children:[ve.status==="Accepted"&&e.jsx("button",{onClick:()=>de(ve._id,"Pickedup"),className:"pickup-btn",children:"✅ Pickup"}),ve.status==="Pickedup"&&e.jsx("button",{onClick:()=>de(ve._id,"Washed"),className:"wash-btn",children:"🧺 Washed"}),ve.status==="Washed"&&e.jsx("button",{onClick:()=>de(ve._id,"Ready for delivery"),className:"ready-btn",children:"✅ Ready"}),ve.status==="Ready for delivery"&&e.jsx("button",{onClick:()=>de(ve._id,"Delivered"),className:"deliver-btn",children:"✅ Delivered"})]}),e.jsxs("div",{className:"action-buttons mt-2 space-y-2",children:[ve.status==="booked"&&e.jsx("button",{onClick:()=>de(ve._id,"picked_up"),className:"px-3 py-1 bg-blue-500 text-white rounded",children:"✅ Mark as Picked Up"}),ve.status==="picked_up"&&e.jsx("button",{onClick:()=>de(ve._id,"in_progress"),className:"px-3 py-1 bg-yellow-500 text-white rounded",children:"🧺 Mark as In Progress"}),ve.status==="in_progress"&&e.jsx("button",{onClick:()=>de(ve._id,"delivered"),className:"px-3 py-1 bg-green-500 text-white rounded",children:"📦 Mark as Delivered"}),ve.paymentMethod==="cash"&&ve.paymentStatus==="pending"&&ve.status==="delivered"&&e.jsx("button",{onClick:()=>we(ve._id),className:"px-3 py-1 bg-green-600 text-white rounded",children:"💵 Mark as Paid"})]})]},ve._id)})})]},ne)})})()})]}),v==="Profile"&&e.jsxs("section",{className:"edit-profile-section",children:[e.jsx("h3",{children:"Edit Profile"}),e.jsxs("div",{className:"profile-container",children:[e.jsx("img",{src:"/washer.webp",alt:"Profile Preview",className:"profile-image-preview"}),e.jsxs("form",{onSubmit:Pt,className:"edit-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{id:"name",name:"name",type:"text",defaultValue:x.name,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",defaultValue:x.email,required:!0,placeholder:"Enter your email address"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contact",children:"Contact"}),e.jsx("input",{id:"contact",name:"contact",type:"tel",defaultValue:x.contact,required:!0,placeholder:"Enter your contact number"})]}),e.jsxs("div",{className:"profile-buttons",children:[e.jsx("button",{type:"submit",children:"Save Changes"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>P("Home"),children:"Cancel"})]})]})]})]})]}),W&&e.jsx("div",{className:"time-slot-dialog",children:e.jsxs("div",{className:"time-slot-dialog-content",children:[e.jsxs("div",{className:"time-slot-dialog-header",children:[e.jsx("h3",{children:"Time Slot Details"}),e.jsx("button",{className:"time-slot-dialog-close",onClick:()=>J(null),children:"×"})]}),e.jsxs("div",{className:"time-slot-details",children:[e.jsx("h4",{children:W.timeSlot}),e.jsx("p",{children:new Date(W.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"time-slot-stats",children:[e.jsxs("div",{className:"time-slot-stat-row",children:[e.jsx("span",{className:"time-slot-stat-label",children:"Current Bookings:"}),e.jsx("span",{className:"time-slot-stat-value",children:W.availability.currentOrders})]}),e.jsxs("div",{className:"time-slot-stat-row",children:[e.jsx("span",{className:"time-slot-stat-label",children:"Max Capacity:"}),e.jsx("span",{className:"time-slot-stat-value",children:W.availability.maxCapacity})]}),e.jsxs("div",{className:"time-slot-stat-row",children:[e.jsx("span",{className:"time-slot-stat-label",children:"Available Slots:"}),e.jsx("span",{className:"time-slot-stat-value available",children:W.availability.availableSlots})]})]}),e.jsx("div",{className:"time-slot-progress",children:e.jsx("div",{className:"time-slot-progress-fill",style:{width:`${W.availability.percentage}%`,backgroundColor:W.availability.isFull?"#e74c3c":W.availability.isNearFull?"#f39c12":"#27ae60"}})}),e.jsx("div",{className:"time-slot-status-container",children:e.jsx("span",{className:`time-slot-status ${W.availability.isFull?"full":W.availability.isNearFull?"near-full":"available"}`,children:W.availability.isFull?"Full":W.availability.isNearFull?"Near Full":"Available"})}),W.availability.orders&&W.availability.orders.length>0&&e.jsxs("div",{className:"time-slot-orders-list",children:[e.jsx("h5",{children:"Current Orders:"}),e.jsx("div",{className:"time-slot-orders-container",children:W.availability.orders.map(R=>e.jsxs("div",{className:"time-slot-order-item",children:[e.jsx("div",{className:"time-slot-order-id",children:R.id}),e.jsxs("div",{className:"time-slot-order-details",children:[R.customerName," - ",R.details]})]},R.id))})]})]})}),I&&e.jsx("div",{className:"logout-popup-overlay",children:e.jsxs("div",{className:"logout-popup-content",children:[e.jsx("h3",{children:"Are you sure?"}),e.jsx("p",{children:"Do you want to logout?"}),e.jsxs("div",{className:"logout-popup-buttons",children:[e.jsx("button",{className:"yes-btn",onClick:()=>{$(!1),s("/signin")},children:"Yes"}),e.jsx("button",{className:"no-btn",onClick:()=>$(!1),children:"No"})]})]})})]})},ux=()=>{const[s,i]=p.useState([]),[a,o]=p.useState({}),[c,u]=p.useState({}),[h,f]=p.useState(!0),[g,b]=p.useState(null),[x,_]=p.useState({}),[S,y]=p.useState({}),[j,N]=p.useState({}),[v,P]=p.useState({});p.useEffect(()=>{(async()=>{try{f(!0),b(null);const $=localStorage.getItem("token"),W=await je.get("/api/show/slot-templates",{headers:{Authorization:`Bearer ${$}`}}),J=new Date;J.setHours(0,0,0,0);const U=W.data.filter(X=>{const st=new Date(X.date);return st.setHours(0,0,0,0),st>=J});i(U);const te=JSON.parse(localStorage.getItem("washermanEnabledSlots")||"{}"),oe=JSON.parse(localStorage.getItem("washermanMaxBookingInputs")||"{}"),le={},ee={};for(const X in te)new Date(X)>=J&&(le[X]=te[X]);for(const X in oe)new Date(X)>=J&&(ee[X]=oe[X]);o(le),u(ee),localStorage.setItem("washermanEnabledSlots",JSON.stringify(le)),localStorage.setItem("washermanMaxBookingInputs",JSON.stringify(ee));const he=await je.get("/api/show/slot-booking-counts",{headers:{Authorization:`Bearer ${$}`}});P(he.data||{})}catch{b("Failed to load slot templates. Please try again.")}finally{f(!1)}})()},[]);const E=(I,$)=>{var oe;const W=new Set(a[I]||[]),J=W.has($.range),U={...a},te=(oe=c[I])==null?void 0:oe[$.range];J?W.delete($.range):(W.add($.range),u(le=>({...le,[I]:{...le[I],[$.range]:te||""}}))),U[I]=[...W],o(U),localStorage.setItem("washermanEnabledSlots",JSON.stringify(U)),localStorage.setItem("washermanMaxBookingInputs",JSON.stringify(c)),y(le=>({...le,[I]:!1}))},z=(I,$,W)=>{const J=parseInt(W,10),U={...c,[I]:{...c[I],[$]:J}};u(U),localStorage.setItem("washermanMaxBookingInputs",JSON.stringify(U)),N(te=>({...te,[I]:{...te[I],[$]:!1}}))},F=async I=>{var oe,le;b(null),_(ee=>({...ee,[I]:!0})),N({});const $=a[I]||[],W=((oe=s.find(ee=>ee.date===I))==null?void 0:oe.slots)||[],J={};let U=!1;for(const ee of W)if($.includes(ee.range)){const he=(le=c[I])==null?void 0:le[ee.range];(!he||isNaN(he)||he<=0)&&(J[ee.range]=!0,U=!0)}if(U){N(ee=>({...ee,[I]:J})),_(ee=>({...ee,[I]:!1}));return}const te=localStorage.getItem("token");try{const ee={date:I,enabledSlots:W.filter(he=>$.includes(he.range)).map(he=>{var X;return{label:he.label,range:he.range,maxBookings:(X=c[I])==null?void 0:X[he.range]}})};await je.post("/api/show/slots/washer",ee,{headers:{Authorization:`Bearer ${te}`}}),y(he=>({...he,[I]:!0})),localStorage.setItem("washermanMaxBookingInputs",JSON.stringify(c))}catch{b("Failed to save slots. Please try again.")}finally{_(ee=>({...ee,[I]:!1}))}},A=I=>new Date(I).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),H=I=>new Set(a[I]||[]).size,K=I=>{var $;return new Set(($=s.find(W=>W.date===I))==null?void 0:$.slots.map(W=>W.range)).size};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsx(Os,{className:"w-12 h-12 text-blue-600 animate-spin"})}):e.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:s.map(I=>{const $=I.date,W=K($),J=H($),U=x[$],te=S[$],oe=j[$]||{};return e.jsxs("div",{className:"bg-white shadow rounded-lg mb-6 border",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-2 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-blue-800",children:A($)}),e.jsx("p",{className:"text-sm text-gray-600",children:$})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[J,"/",W," Active Slots"]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded mt-1",children:e.jsx("div",{className:"h-2 bg-green-500 rounded",style:{width:`${J/W*100}%`}})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4",children:I.slots.map(le=>{var fe,be,Pe;const ee=(fe=a[$])==null?void 0:fe.includes(le.range),he=oe[le.range],X=(be=c[$])==null?void 0:be[le.range],st=((Pe=v[$])==null?void 0:Pe[le.range])||0,ae=ee&&X!==void 0&&st>=X;return e.jsx("div",{className:`p-4 rounded border relative ${ee?ae?"bg-red-50 border-red-400":"bg-green-50 border-green-300":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:le.label}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-1",children:[e.jsx(Rn,{className:"w-4 h-4"}),e.jsx("span",{children:le.range})]}),ee&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Max Bookings"}),e.jsx("input",{type:"number",min:"1",value:X||"",onChange:Le=>z($,le.range,Le.target.value),className:`mt-1 w-20 px-2 py-1 border text-sm rounded ${he?"border-red-500":"border-gray-300"}`})]}),e.jsx("div",{className:`text-xs mt-1 ${ae?"text-red-600 font-semibold":"text-gray-600"}`})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer mt-1",children:[e.jsx("input",{type:"checkbox",checked:ee,onChange:()=>E($,le),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-6 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500 relative"})]})]})},le.range+le.label)})}),Object.keys(oe).length>0&&e.jsx("p",{className:"text-red-600 text-sm px-4 pb-2",children:"Please set Max Bookings for all enabled slots on this date."}),e.jsx("button",{onClick:()=>F($),disabled:U,className:`w-full mt-4 py-2 rounded-lg font-semibold transition ${U?"bg-gray-400 text-white":te?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:U?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(Os,{className:"w-5 h-5 animate-spin mr-2"})," Saving..."]}):te?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(On,{className:"w-5 h-5 mr-2"})," Saved!"]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(mi,{className:"w-5 h-5 mr-2"}),"Save for ",new Date($).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})]},$)})})};class hx{async saveCustomerAddress(i){try{const a=localStorage.getItem("token");if(!a)throw new Error("User not authenticated");const o=await lt("/api/user/address",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({address:{houseNo:i.houseNo,street:i.street,landmark:i.landmark,city:i.city,state:i.state,pincode:i.pincode,fullAddress:i.fullAddress,coordinates:i.coordinates},isDefault:!0})});if(!o.ok)throw new Error("Failed to save address");return await o.json()}catch(a){throw console.error("Error saving customer address:",a),a}}async getCustomerAddresses(){try{const i=localStorage.getItem("token");if(!i)throw new Error("User not authenticated");const a=await lt("/api/user/addresses",{headers:{Authorization:`Bearer ${i}`}});if(!a.ok)throw new Error("Failed to fetch addresses");return await a.json()}catch(i){throw console.error("Error fetching customer addresses:",i),i}}async sendAddressToWasherman(i){try{const a=localStorage.getItem("token");if(!a)throw new Error("User not authenticated");if(!(await lt("/api/order/delivery-address",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({orderId:i.orderId,washermanId:i.washermanId,deliveryAddress:{houseNo:i.address.houseNo,street:i.address.street,landmark:i.address.landmark,city:i.address.city,state:i.address.state,pincode:i.address.pincode,fullAddress:i.address.fullAddress,coordinates:i.address.coordinates},deliveryInstructions:i.deliveryInstructions||""})})).ok)throw new Error("Failed to send address to washerman");console.log("Address sent to washerman successfully")}catch(a){throw console.error("Error sending address to washerman:",a),a}}async updateOrderWithAddress(i,a){try{const o=localStorage.getItem("token");if(!o)throw new Error("User not authenticated");if(!(await lt(`/api/order/${i}/address`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({deliveryAddress:{houseNo:a.houseNo,street:a.street,landmark:a.landmark,city:a.city,state:a.state,pincode:a.pincode,fullAddress:a.fullAddress,coordinates:a.coordinates}})})).ok)throw new Error("Failed to update order with address");console.log("Order updated with address successfully")}catch(o){throw console.error("Error updating order with address:",o),o}}validateAddress(i){var o,c,u,h,f;const a=[];return(o=i.houseNo)!=null&&o.trim()||a.push("House/Flat/Block No. is required"),(c=i.street)!=null&&c.trim()||a.push("Street/Area is required"),(u=i.city)!=null&&u.trim()||a.push("City is required"),(h=i.state)!=null&&h.trim()||a.push("State is required"),(!((f=i.pincode)!=null&&f.trim())||i.pincode.length!==6)&&a.push("Valid 6-digit pincode is required"),{isValid:a.length===0,errors:a}}formatAddressForDisplay(i){return[i.houseNo,i.street,i.landmark,i.city,i.state,i.pincode].filter(Boolean).join(", ")}async getCoordinatesFromAddress(i){try{const a=this.formatAddressForDisplay(i),c=await(await fetch(`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(a)}&key=fbddd9ac0aff4feb840edc8d63a8f264`)).json();if(c.results&&c.results.length>0){const u=c.results[0];return{lat:u.geometry.lat,lng:u.geometry.lng}}return null}catch(a){return console.error("Error getting coordinates from address:",a),null}}saveAddressToLocalStorage(i){try{localStorage.setItem("customerAddress",JSON.stringify(i))}catch(a){console.error("Error saving address to localStorage:",a)}}getAddressFromLocalStorage(){try{const i=localStorage.getItem("customerAddress");return i?JSON.parse(i):null}catch(i){return console.error("Error getting address from localStorage:",i),null}}clearAddressFromLocalStorage(){try{localStorage.removeItem("customerAddress")}catch(i){console.error("Error clearing address from localStorage:",i)}}}const An=new hx,mx=()=>{const[s,i]=p.useState(null);return p.useEffect(()=>{const u=An.getAddressFromLocalStorage();u&&i(u)},[]),{savedAddress:s,saveAddress:async u=>{try{return await An.saveCustomerAddress(u),An.saveAddressToLocalStorage(u),i(u),ht.success("Address saved successfully!"),!0}catch(h){return console.error("Error saving address:",h),ht.error("Failed to save address. Please try again."),!1}},sendAddressToWasherman:async u=>{try{return await An.sendAddressToWasherman(u),ht.success("Address sent to washerman successfully!"),!0}catch(h){return console.error("Error sending address to washerman:",h),ht.error("Failed to send address to washerman. Please try again."),!1}},updateOrderAddress:async(u,h)=>{try{return await An.updateOrderWithAddress(u,h),ht.success("Order address updated successfully!"),!0}catch(f){return console.error("Error updating order address:",f),ht.error("Failed to update order address. Please try again."),!1}},addressService:An}},fx=()=>{var xn,Ls,vn,yn,Gs,bn,wn,Js,Yn,jn,Si,_e,Rt,$e,Kn,_n;const s=p.useRef(null),[i,a]=p.useState(!1),[o,c]=p.useState({}),[u,h]=p.useState("Home"),[f,g]=p.useState(!1),[b,x]=p.useState(!1),[_,S]=p.useState(!1),[y,j]=p.useState(!1),[N,v]=p.useState(!1),[P,E]=p.useState(null),[z,F]=p.useState({}),[A,H]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[K,I]=p.useState([]),[$,W]=p.useState(!0),[J,U]=p.useState(!1),[te,oe]=p.useState(""),[le,ee]=p.useState(""),[he,X]=p.useState("method"),[st,ae]=p.useState(!0),[fe,be]=p.useState(!1),[Pe,Le]=p.useState(null),[ce,B]=p.useState(0),[Y,me]=p.useState(""),[Oe,de]=p.useState(!1),[we,mt]=p.useState(null),[Z,q]=p.useState(!1),[re,pe]=p.useState(new Date().toISOString().split("T")[0]),[Ae,Ce]=p.useState(!1),[Fe,Pt]=p.useState("overview"),[vt,et]=p.useState(!1),[cs,Lt]=p.useState(null),{savedAddress:ft,saveAddress:R}=mx(),[G,ne]=p.useState(null),[xe,Ie]=p.useState(!1),[De,ve]=p.useState([]),[yt,nt]=p.useState(!1),[pt,ss]=p.useState(null),[Ge,ds]=p.useState(""),[us,js]=p.useState([]),[Je,_s]=p.useState(null),[Ns,rn]=p.useState(null),[Vn,on]=p.useState([]),[Ni,Gn]=p.useState("cod"),[Vt,ln]=p.useState(0);p.useEffect(()=>{const O=localStorage.getItem("token");console.log("Token from localStorage:",O);const Ne=async()=>{try{const Ke=await je.get("/api/user/currentuser",{headers:{Authorization:`Bearer ${O}`},withCredentials:!0});c({name:Ke.data.name,email:Ke.data.email,contact:Ke.data.contact,image:Ke.data.image||"/placeholder.svg",address:Ke.data.address,_id:Ke.data._id})}catch(Ke){console.error("Failed to fetch profile:",Ke)}},Be=async()=>{var Ke;try{const Qe=(await je.get("/api/booking",{headers:{Authorization:`Bearer ${O}`},withCredentials:!0})).data.map(Nt=>({...Nt,laundryman:Nt.laundryman||Nt.laundrymanName||"",total:Nt.total||Nt.totalAmount||0}));I(Qe);const Yt=Qe.reduce((Nt,Ft)=>Nt+(typeof Ft.total=="number"?Ft.total:Number(Ft.total)||0),0);console.log("Total Spent:",Yt)}catch(at){console.error("Error fetching orders:",((Ke=at==null?void 0:at.response)==null?void 0:Ke.data)||at.message)}finally{W(!1)}};Ne(),Be()},[]);const cn=[{id:"wash_fold",name:"Wash & Fold",description:"Regular washing and folding service",icon:"👕",deliveryTime:"Same day - Next day",clothes:[{name:"Shirt",price:25,image:"download.jpg"},{name:"T-Shirt",price:20,image:"t shirt.jpg"},{name:"Pants",price:30,image:"pants.jpg"},{name:"Jeans",price:35,image:"jeans.jpg"},{name:"Jacket",price:50,image:"jacket.jpg"}]},{id:"dry_clean",name:"Dry Cleaning",description:"Professional dry cleaning service",icon:"🧥",deliveryTime:"Same day - Next day",clothes:[{name:"Shirt",price:150,image:"download.jpg"},{name:"Jeans",price:120,image:"jeans.jpg"},{name:"Jacket",price:200,image:"jacket.jpg"}]},{id:"iron_only",name:"Iron Only",description:"Professional ironing service",icon:"🔥",deliveryTime:"Same day",clothes:[{name:"Shirt",price:15,image:"download.jpg"},{name:"T-Shirt",price:10,image:"t shirt.jpg"},{name:"Pants",price:20,image:"pants.jpg"},{name:"Jacket",price:30,image:"jacket.jpg"}]},{id:"stain_removal",name:"Stain Removal",description:"Specialized stain removal service",icon:"🧽",deliveryTime:"Same day - Next day",clothes:[{name:"Shirt",price:50,image:"download.jpg"},{name:"Pants",price:60,image:"pants.jpg"},{name:"Jacket",price:100,image:"jacket.jpg"}]},{id:"eco_friendly",name:"Eco-Friendly Wash",description:"Environment friendly washing with organic detergents",icon:"🌱",deliveryTime:"Same day - Next day",clothes:[{name:"Shirt",price:30,image:"download.jpg"},{name:"T-Shirt",price:25,image:"t shirt.jpg"},{name:"Pants",price:35,image:"pants.jpg"}]}],hs=O=>{const Ne=new Date().toISOString().split("T")[0],Be=new Date(O),Ke=new Date(Ne),at=O===Ne,Qe=Be<Ke,Yt=new Date().getHours();let Nt=[{id:1,time:"06:00 - 09:00",available:3,total:5},{id:2,time:"09:00 - 12:00",available:1,total:5},{id:3,time:"12:00 - 15:00",available:4,total:4},{id:4,time:"15:00 - 18:00",available:2,total:3},{id:5,time:"18:00 - 21:00",available:4,total:6}];return Qe?Nt.map(Ft=>({...Ft,status:"unavailable",reason:"Date has passed"})):(at&&(Nt=Nt.filter(Ft=>parseInt(Ft.time.split(":")[0])>Yt)),Nt.map(Ft=>({...Ft,status:Ft.available>0?"available":"full"})))},[Ss,_t]=p.useState(hs(re)),ie=[{id:1,name:"Raj Kumar",experience:"5 years",location:{lat:19.076,lng:72.8777},distance:.1,workingHours:"06:00 - 21:00",services:["wash_fold","iron_only","eco_friendly"],image:"laundryman 1.jpg",phone:"+91 9876543210",specialties:["Wash & fold","Iron service","Eco-friendly detergents"]},{id:2,name:"Amit Singh",experience:"3 years",location:{lat:19.0765,lng:72.878},distance:.3,workingHours:"07:00 - 19:00",services:["wash_fold","dry_clean","stain_removal"],image:"laundryman 2.jpg",phone:"+91 9876543211",specialties:["Suits & blazers","Wedding dresses","Leather cleaning"]},{id:3,name:"Suresh Patel",experience:"7 years",location:{lat:19.0755,lng:72.8785},distance:.4,workingHours:"05:00 - 20:00",services:["wash_fold","dry_clean","iron_only","stain_removal","eco_friendly"],image:"laundryman 3.jpg",phone:"+91 9876543212",specialties:["Eco friendly","Premium ironing","Stain removal expert"]}],[dn,ms]=p.useState(!1),[ks,Rs]=p.useState(null),[At,Fs]=p.useState(null);p.useEffect(()=>{_t(hs(re))},[re]);const Gt=()=>{a(!i)},Bt=()=>{a(!1)},$s=O=>{oe(O),O==="upi"?X("upi"):O==="cod"&&Jt("cod")},un=O=>{ee(O),X("processing"),setTimeout(()=>{X("success"),setTimeout(()=>{Jt("upi")},2e3)},3e3)},Cs=[{id:"phonepe",name:"PhonePe",icon:"📱",color:"#5f259f"},{id:"googlepay",name:"Google Pay",icon:"🔵",color:"#4285f4"},{id:"paytm",name:"Paytm",icon:"💙",color:"#00baf2"},{id:"phonepe_upi",name:"PhonePe UPI",icon:"💳",color:"#5f259f"},{id:"googlepay_upi",name:"Google Pay UPI",icon:"💳",color:"#4285f4"},{id:"paytm_upi",name:"Paytm UPI",icon:"💳",color:"#00baf2"}],hn=()=>{F({...o}),S(!0)},Zs=O=>{const Ne=O.target.files[0];if(Ne){const Be=new FileReader;Be.onloadend=()=>{E(Be.result),_?F({...z,image:Be.result}):(c({...o,image:Be.result}),alert("Profile photo updated successfully!"))},Be.readAsDataURL(Ne)}j(!1)},k=async()=>{var O,Ne,Be;try{const Ke=localStorage.getItem("token"),at={...z};at.address&&(at.address={street:at.address.street||"",city:at.address.city||"",state:at.address.state||"",zip:at.address.zip||""}),o.role!=="washerman"&&delete at.range;const Qe=await je.put(`/api/user/${o._id}`,at,{headers:{Authorization:`Bearer ${Ke}`}});c(Qe.data),S(!1),E(null),alert("Profile updated successfully!")}catch(Ke){console.error("Update error:",((O=Ke.response)==null?void 0:O.data)||Ke.message),alert(((Be=(Ne=Ke.response)==null?void 0:Ne.data)==null?void 0:Be.message)||"Failed to update profile")}},se=()=>{S(!1),F({}),E(null)},Ze=()=>{if(A.newPassword!==A.confirmPassword){alert("New passwords don't match!");return}if(A.newPassword.length<6){alert("Password must be at least 6 characters long!");return}alert("Password changed successfully!"),v(!1),H({currentPassword:"",newPassword:"",confirmPassword:""})},it=()=>{v(!1),H({currentPassword:"",newPassword:"",confirmPassword:""})},Ue=()=>{et(!0)},bt=()=>{et(!1)},Tt=async O=>{try{await R(O)&&(Lt(O),et(!1))}catch(Ne){console.error("Error saving address:",Ne)}},He=()=>{if(ce===0){alert("Please select a rating");return}const O=K.map(Ne=>Ne.id===Pe.id?{...Ne,rating:ce,feedback:Y}:Ne);I(O),be(!1),Le(null),B(0),me(""),alert("Thank you for your feedback!")},ns=()=>{we&&(js(we.services),rn(we.laundrymanObj),on(we.items),ln(we.total),Gn(we.paymentMethod==="Cash on Delivery"?"cod":"upi"),de(!1),h("Book"),alert("Previous order details loaded! Please select date and time slot."))},Hs=O=>{O.status==="available"&&(_s(O),q(!1),alert(`Time slot ${O.time} selected!`))},Us=O=>{const Ne=O.target.value;pe(Ne),_s(null)},Jt=(O=null)=>{const Ne={id:`ORD${String(K.length+1).padStart(3,"0")}`,date:re,time:Je.time,laundryman:Ns.name,status:"Confirmed",items:Vn,total:Vt,paymentMethod:O==="cod"?"Cash on Delivery":"UPI",address:(G==null?void 0:G.address)||o.address,services:us.map(Be=>Be.id),rating:null};I([Ne,...K]),x(!0),U(!1),js([]),_s(null),rn(null),on([]),ln(0),oe(""),ee(""),X("method"),h("Orders")},Ee=()=>{g(!0)},Ye=()=>{const O=new Date().getHours();return O<12?"Good Morning":O<17?"Good Afternoon":"Good Evening"},mn=O=>{switch(O){case"Pending":return"#f39c12";case"Confirmed":return"#3498db";case"In Progress":return"#9b59b6";case"Ready for Pickup":return"#e67e22";case"Delivered":return"#27ae60";default:return"#95a5a6"}},[We,qs]=p.useState(null),[Jn,Se]=p.useState(!1),Xe=O=>{const Ne=new Date().toISOString().split("T")[0],Be=new Date;Be.setDate(Be.getDate()+1);const Ke=Be.toISOString().split("T")[0];return O===Ne?"Today":"Tomorrow"},fn=O=>({Pending:20,Confirmed:40,"In Progress":60,"Ready for Pickup":80,Delivered:100})[O]||0,pn=()=>new Date().toISOString().split("T")[0],Et=()=>{const O=new Date;return O.setDate(O.getDate()+30),O.toISOString().split("T")[0]},wa=O=>{Fs(O),Rs("laundryman"),ms(!0)},gn=(O=null)=>{Fs(O),Rs("support"),ms(!0)},[Ps,rt]=p.useState({email:"",password:""}),zt=ws(),Ws=async()=>{try{await lt("/api/auth/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("token"),localStorage.removeItem("role"),zt("/mainapp")}catch(O){console.error("Logout failed:",O),zt("/mainapp")}},Vs=()=>{g(!1)};return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Zs,ref:s,style:{display:"none"}}),e.jsxs("button",{className:"mobile-menu-btn",onClick:Gt,children:[e.jsx("div",{className:"hamburger-line"}),e.jsx("div",{className:"hamburger-line"}),e.jsx("div",{className:"hamburger-line"})]}),i&&e.jsx("div",{className:"mobile-menu-overlay",onClick:Bt}),e.jsxs("aside",{className:`sidebar ${i?"sidebar-open":""}`,children:[e.jsxs("div",{className:"sidebar-profile",onClick:()=>{h("Profile"),Bt()},children:[e.jsx("img",{src:"/profile.webp",alt:"Customer",className:"sidebar-profile-img"}),e.jsx("span",{className:"sidebar-profile-name",children:o.name})]}),e.jsxs("nav",{children:[e.jsx("button",{className:u==="Home"?"active":"",onClick:()=>{h("Home"),Bt()},children:"🏠 Home"}),e.jsx("button",{className:"",onClick:()=>{zt("/mainapp"),Bt()},children:"📅 Book Service"}),e.jsx("button",{className:u==="Orders"?"active":"",onClick:()=>{h("Orders"),Bt(),zt("/orders")},children:"📦 My Orders"}),e.jsx("button",{className:u==="Profile"?"active":"",onClick:()=>{h("Profile"),Bt()},children:"👤 Profile"}),e.jsx("button",{className:"logout-btn",onClick:()=>{Ee(),Bt()},children:"🚪 Logout"})]})]}),e.jsxs("main",{className:"main-content",children:[u==="Home"&&e.jsxs("div",{className:"home-page",children:[Ge&&e.jsx("section",{className:"location-notification",style:{marginBottom:"16px",padding:"12px 16px",borderRadius:"8px",background:Ge.includes("✅")?"#dcfce7":Ge.includes("❌")?"#fee2e2":Ge.includes("⚠️")?"#fef3c7":"#dbeafe",border:Ge.includes("✅")?"1px solid #22c55e":Ge.includes("❌")?"1px solid #ef4444":Ge.includes("⚠️")?"1px solid #f59e0b":"1px solid #3b82f6",color:Ge.includes("✅")?"#166534":Ge.includes("❌")?"#991b1b":Ge.includes("⚠️")?"#92400e":"#1e40af",fontSize:"14px",fontWeight:"500"},children:Ge}),e.jsxs("section",{className:"welcome-section",children:[e.jsxs("div",{className:"welcome-content",children:[e.jsxs("h1",{children:[Ye(),", ",o.name,"! 👋"]}),e.jsx("p",{children:"Your trusted laundry service is just a click away"})]}),e.jsxs("div",{className:"date-time",children:[e.jsx("div",{className:"current-date",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"current-time",children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("section",{className:"dashboard-stats",children:e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📦"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Orders"}),e.jsx("p",{className:"stat-number",children:K.length}),e.jsx("span",{className:"stat-label",children:"All time"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⏳"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Active Orders"}),e.jsx("p",{className:"stat-number",children:K.filter(O=>O.status&&O.status.toLowerCase()!=="delivered"&&O.status.toLowerCase()!=="cancelled").length}),e.jsx("span",{className:"stat-label",children:"In progress"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"₹"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Spent"}),e.jsxs("p",{className:"stat-number",children:["₹",K.filter(O=>{const Ne=new Date(O.createdAt),Be=new Date;return Ne.getMonth()===Be.getMonth()&&Ne.getFullYear()===Be.getFullYear()}).reduce((O,Ne)=>O+(Number(Ne.total)||0),0)]}),e.jsx("span",{className:"stat-label",children:"This month"})]})]})]})}),e.jsxs("section",{className:"quick-actions-section",children:[e.jsx("h3",{children:"Quick Actions"}),e.jsx("div",{className:"quick-actions-grid",children:e.jsxs("button",{className:"quick-action-btn",onClick:()=>zt("/mainapp"),children:[e.jsx("div",{className:"action-icon",children:"📅"}),e.jsx("span",{children:"Book New Service"})]})})]})]}),u==="Profile"&&e.jsxs("div",{className:"profile-page",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("h2",{children:"My Profile"}),e.jsx("p",{children:"Manage your account information"})]}),e.jsx("div",{className:"profile-content",children:e.jsx("div",{className:"profile-card",children:_?e.jsxs("div",{className:"edit-profile-form",children:[e.jsxs("div",{className:"profile-image-section",children:[e.jsx("img",{src:"/profile.webp",alt:"Profile Preview",className:"profile-image"}),e.jsx("button",{type:"button",className:"change-image-btn",onClick:()=>{var O;return(O=s.current)==null?void 0:O.click()},children:"📷 Change Photo"})]}),e.jsxs("div",{className:"profile-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",value:z.name||"",onChange:O=>F({...z,name:O.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:z.email||"",onChange:O=>F({...z,email:O.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contact",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"contact",value:z.contact||"",onChange:O=>F({...z,contact:O.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"street",children:"Street"}),e.jsx("input",{type:"text",id:"street",value:((Yn=z.address)==null?void 0:Yn.street)||"",onChange:O=>F({...z,address:{...z.address,street:O.target.value}})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("input",{type:"text",id:"city",value:((jn=z.address)==null?void 0:jn.city)||"",onChange:O=>F({...z,address:{...z.address,city:O.target.value}})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"state",children:"State"}),e.jsx("input",{type:"text",id:"state",value:((Si=z.address)==null?void 0:Si.state)||"",onChange:O=>F({...z,address:{...z.address,state:O.target.value}})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"zip",children:"ZIP Code"}),e.jsx("input",{type:"text",id:"zip",value:((_e=z.address)==null?void 0:_e.zip)||"",onChange:O=>F({...z,address:{...z.address,zip:O.target.value}})})]}),e.jsxs("div",{className:"profile-actions",children:[e.jsx("button",{type:"button",className:"save-profile-btn",onClick:k,children:"💾 Save Changes"}),e.jsx("button",{type:"button",className:"cancel-edit-btn",onClick:se,children:"❌ Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"profile-image-section",children:e.jsx("img",{src:"/profile.webp",alt:"Profile",className:"profile-image"})}),e.jsxs("div",{className:"profile-info",children:[e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("p",{children:o.name})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("p",{children:o.email})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("p",{children:o.contact})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Address"}),e.jsx("p",{children:(xn=o.address)!=null&&xn.street||(Ls=o.address)!=null&&Ls.city||(vn=o.address)!=null&&vn.state||(yn=o.address)!=null&&yn.zip?`${((Gs=o.address)==null?void 0:Gs.street)||""}${(bn=o.address)!=null&&bn.city?", "+o.address.city:""}${(wn=o.address)!=null&&wn.state?", "+o.address.state:""}${(Js=o.address)!=null&&Js.zip?" - "+o.address.zip:""}`:"Not Provided"})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Delivery Address"}),e.jsx("div",{className:"address-display",children:ft?e.jsxs("div",{className:"saved-address",children:[e.jsxs("p",{className:"address-text",children:[ft.houseNo,", ",ft.street,ft.landmark&&`, ${ft.landmark}`,e.jsx("br",{}),ft.city,", ",ft.state," - ",ft.pincode]}),e.jsx("button",{className:"manage-address-btn",onClick:Ue,children:"📝 Edit Address"})]}):e.jsxs("div",{className:"no-address",children:[e.jsx("p",{children:"No delivery address saved"}),e.jsx("button",{className:"add-address-btn",onClick:Ue,children:"📍 Add Delivery Address"})]})})]}),e.jsx("div",{className:"profile-actions",children:e.jsx("button",{className:"edit-profile-btn",onClick:hn,children:"✏️ Edit Profile"})})]})]})})})]})]}),J&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content payment-modal",children:[e.jsxs("div",{className:"payment-header",children:[e.jsxs("h3",{children:[he==="method"&&"Choose Payment Method",he==="upi"&&"Select UPI Provider",he==="processing"&&"Processing Payment",he==="success"&&"Payment Successful"]}),he!=="processing"&&he!=="success"&&e.jsx("button",{className:"close-btn",onClick:()=>U(!1),children:"✕"})]}),e.jsxs("div",{className:"payment-content",children:[he==="method"&&e.jsxs("div",{className:"payment-methods",children:[e.jsxs("div",{className:"order-summary-payment",children:[e.jsx("h4",{children:"Order Summary"}),e.jsxs("div",{className:"summary-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Services:"}),e.jsx("span",{children:us.map(O=>O.name).join(", ")})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Laundryman:"}),e.jsx("span",{children:Ns==null?void 0:Ns.name})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Date & Time:"}),e.jsxs("span",{children:[re," • ",Je==null?void 0:Je.time]})]}),e.jsxs("div",{className:"detail-row total-row",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["₹",Vt]})]})]})]}),e.jsxs("div",{className:"payment-options",children:[e.jsxs("div",{className:`payment-option ${te==="upi"?"selected":""}`,onClick:()=>$s("upi"),children:[e.jsx("div",{className:"payment-icon",children:"📱"}),e.jsxs("div",{className:"payment-info",children:[e.jsx("h4",{children:"UPI Payment"}),e.jsx("p",{children:"Pay instantly using UPI apps"})]}),e.jsx("div",{className:"payment-arrow",children:"→"})]}),e.jsxs("div",{className:`payment-option ${te==="cod"?"selected":""}`,onClick:()=>$s("cod"),children:[e.jsx("div",{className:"payment-icon",children:"💵"}),e.jsxs("div",{className:"payment-info",children:[e.jsx("h4",{children:"Cash on Delivery"}),e.jsx("p",{children:"Pay when your order is delivered"})]}),e.jsx("div",{className:"payment-arrow",children:"→"})]})]})]}),he==="upi"&&e.jsxs("div",{className:"upi-providers",children:[e.jsx("div",{className:"upi-amount",children:e.jsxs("h4",{children:["Amount to Pay: ₹",Vt]})}),e.jsxs("div",{className:"upi-options",children:[e.jsx("h4",{children:"Choose your preferred UPI app:"}),e.jsx("div",{className:"upi-grid",children:Cs.map(O=>e.jsxs("div",{className:"upi-option",onClick:()=>un(O),style:{borderColor:O.color},children:[e.jsx("div",{className:"upi-icon",style:{color:O.color},children:O.icon}),e.jsx("div",{className:"upi-name",children:O.name})]},O.id))})]}),e.jsx("div",{className:"upi-back",children:e.jsx("button",{className:"back-btn",onClick:()=>X("method"),children:"← Back to Payment Methods"})})]}),he==="processing"&&e.jsxs("div",{className:"payment-processing",children:[e.jsx("div",{className:"processing-animation",children:e.jsx("div",{className:"spinner"})}),e.jsx("h4",{children:"Processing Payment..."}),e.jsxs("p",{children:["Please wait while we process your payment through ",le]}),e.jsxs("div",{className:"processing-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Amount:"}),e.jsxs("span",{children:["₹",Vt]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Payment Method:"}),e.jsx("span",{children:(Rt=Cs.find(O=>O.id===le))==null?void 0:Rt.name})]})]})]}),he==="success"&&e.jsxs("div",{className:"payment-success",children:[e.jsx("div",{className:"success-animation",children:e.jsx("div",{className:"success-icon",children:"✅"})}),e.jsx("h4",{children:"Payment Successful!"}),e.jsx("p",{children:"Your order has been placed successfully"}),e.jsxs("div",{className:"success-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Amount Paid:"}),e.jsxs("span",{children:["₹",Vt]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Payment Method:"}),e.jsx("span",{children:($e=Cs.find(O=>O.id===le))==null?void 0:$e.name})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{children:"Transaction ID:"}),e.jsxs("span",{children:["TXN",Date.now()]})]})]})]})]})]})}),N&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content password-modal",children:[e.jsxs("div",{className:"password-header",children:[e.jsx("h3",{children:"Change Password"}),e.jsx("button",{className:"close-btn",onClick:it,children:"✕"})]}),e.jsxs("div",{className:"password-content",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",value:A.currentPassword,onChange:O=>H({...A,currentPassword:O.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"newPassword",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",value:A.newPassword,onChange:O=>H({...A,newPassword:O.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:A.confirmPassword,onChange:O=>H({...A,confirmPassword:O.target.value}),required:!0})]}),e.jsxs("div",{className:"password-actions",children:[e.jsx("button",{className:"save-password-btn",onClick:Ze,children:"💾 Save Password"}),e.jsx("button",{className:"cancel-password-btn",onClick:it,children:"❌ Cancel"})]})]})]})}),fe&&Pe&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content rating-modal",children:[e.jsxs("div",{className:"rating-header",children:[e.jsx("h3",{children:"Rate Your Experience"}),e.jsx("button",{className:"close-btn",onClick:()=>be(!1),children:"✕"})]}),e.jsxs("div",{className:"rating-content",children:[e.jsxs("div",{className:"order-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order:"})," #",Pe.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Laundryman:"})," ",Pe.laundryman]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Services:"})," ",Pe.services.map(O=>{var Ne;return(Ne=cn.find(Be=>Be.id===O))==null?void 0:Ne.name}).join(", ")]})]}),e.jsxs("div",{className:"star-rating",children:[e.jsx("p",{children:"How was your experience?"}),e.jsx("div",{className:"stars",children:[1,2,3,4,5].map(O=>e.jsx("button",{className:`star ${O<=ce?"active":""}`,onClick:()=>B(O),children:"⭐"},O))}),e.jsxs("p",{className:"rating-text",children:[ce===0&&"Select a rating",ce===1&&"Poor",ce===2&&"Fair",ce===3&&"Good",ce===4&&"Very Good",ce===5&&"Excellent"]})]}),e.jsxs("div",{className:"feedback-section",children:[e.jsx("label",{htmlFor:"feedback",children:"Additional Feedback (Optional)"}),e.jsx("textarea",{id:"feedback",value:Y,onChange:O=>me(O.target.value),placeholder:"Tell us about your experience...",rows:4})]}),e.jsxs("div",{className:"rating-actions",children:[e.jsx("button",{className:"submit-rating-btn",onClick:He,children:"Submit Rating"}),e.jsx("button",{className:"cancel-rating-btn",onClick:()=>be(!1),children:"Cancel"})]})]})]})}),Oe&&we&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content reorder-modal",children:[e.jsxs("div",{className:"reorder-header",children:[e.jsx("h3",{children:"Reorder Confirmation"}),e.jsx("button",{className:"close-btn",onClick:()=>de(!1),children:"✕"})]}),e.jsxs("div",{className:"reorder-content",children:[e.jsxs("div",{className:"reorder-details",children:[e.jsx("h4",{children:"Previous Order Details"}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Order ID:"}),e.jsxs("span",{children:["#",we.id]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Services:"}),e.jsx("span",{children:(Kn=we.services)==null?void 0:Kn.map(O=>O.name).join(", ")})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Laundryman:"}),e.jsx("span",{children:we.laundrymanName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["₹",we.total]})]})]}),e.jsxs("div",{className:"reorder-items",children:[e.jsx("h4",{children:"Items to Reorder"}),e.jsx("div",{className:"items-list",children:we.items.map((O,Ne)=>e.jsxs("div",{className:"item",children:[e.jsxs("span",{children:[O.name," x ",O.quantity," ",O.serviceName&&`(${O.serviceName})`]}),e.jsxs("span",{children:["₹",O.price*O.quantity]})]},Ne))})]}),e.jsx("div",{className:"reorder-note",children:e.jsx("p",{children:"📝 Note: You'll be able to modify the order details (date, time, etc.) on the booking page."})}),e.jsxs("div",{className:"reorder-actions",children:[e.jsx("button",{className:"confirm-reorder-btn",onClick:ns,children:"✅ Proceed to Book"}),e.jsx("button",{className:"cancel-reorder-btn",onClick:()=>de(!1),children:"Cancel"})]})]})]})}),Z&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content time-slot-modal",children:[e.jsxs("div",{className:"time-slot-header",children:[e.jsx("h3",{children:"Available Time Slots"}),e.jsx("button",{className:"close-btn",onClick:()=>q(!1),children:"✕"})]}),e.jsxs("div",{className:"time-slot-content",children:[e.jsxs("div",{className:"date-selection",children:[e.jsx("label",{htmlFor:"slotDate",children:"Select Date:"}),e.jsx("input",{type:"date",id:"slotDate",value:re,onChange:Us,min:pn(),max:Et(),className:"date-input"})]}),e.jsx("div",{className:"time-slots-grid",children:Ss.length===0?e.jsxs("div",{className:"no-slots",children:[e.jsx("p",{children:"No time slots available for selected date"}),e.jsx("span",{children:"All slots have passed for today"})]}):Ss.map(O=>e.jsxs("div",{className:`time-slot ${O.status} ${(Je==null?void 0:Je.id)===O.id?"selected":""}`,onClick:()=>Hs(O),children:[e.jsx("div",{className:"slot-time",children:O.time}),e.jsx("div",{className:"slot-availability",children:O.status==="available"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"available-icon",children:"✅"}),e.jsxs("span",{children:[O.available,"/",O.total," available"]})]}):O.status==="full"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"full-icon",children:"❌"}),e.jsx("span",{children:"Slot Full"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"unavailable-icon",children:"🚫"}),e.jsx("span",{children:"Unavailable"}),O.reason&&e.jsx("div",{className:"unavailable-reason",children:O.reason})]})})]},O.id))})]})]})}),b&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content order-confirmation-popup",children:[e.jsx("div",{className:"success-icon",children:"✅"}),e.jsx("h3",{children:"Thank You!"}),e.jsx("p",{children:"Your order has been confirmed successfully"}),e.jsxs("div",{className:"order-details-popup",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",(_n=K[0])==null?void 0:_n.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected Delivery:"})," ",Xe(re)]})]}),e.jsx("button",{className:"close-popup-btn",onClick:()=>x(!1),children:"Continue"})]})}),f&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content logout-popup",children:[e.jsx("h3",{children:"Confirm Logout"}),e.jsx("p",{children:"Are you sure you want to logout?"}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{className:"confirm-btn",onClick:Ws,children:"Yes, Logout"}),e.jsx("button",{className:"cancel-btn",onClick:Vs,children:"Cancel"})]})]})}),Jn&&We&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content tracking-modal",children:[e.jsxs("div",{className:"tracking-header",children:[e.jsxs("h3",{children:["Track Order #",We.id]}),e.jsx("button",{className:"close-btn",onClick:()=>Se(!1),children:"✕"})]}),e.jsxs("div",{className:"tracking-content",children:[e.jsxs("div",{className:"order-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Laundryman:"}),e.jsx("span",{children:We.laundryman})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Services:"}),e.jsx("span",{children:We.services.map(O=>{var Ne;return(Ne=cn.find(Be=>Be.id===O))==null?void 0:Ne.name}).join(", ")})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Expected Delivery:"}),e.jsx("span",{className:"delivery-time",children:Xe(We.date)})]})]}),e.jsxs("div",{className:"progress-section",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${fn(We.status)}%`}})}),e.jsxs("div",{className:"progress-percentage",children:[fn(We.status),"% Complete"]})]}),e.jsxs("div",{className:"status-timeline",children:[e.jsxs("div",{className:`timeline-item ${["Confirmed","In Progress","Ready for Pickup","Delivered"].includes(We.status)?"completed":""}`,children:[e.jsx("div",{className:"timeline-dot"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h4",{children:"Order Confirmed"}),e.jsx("p",{children:"Your order has been confirmed"}),e.jsx("span",{className:"timeline-time",children:We.status==="Confirmed"?"Current":"Completed"})]})]}),e.jsxs("div",{className:`timeline-item ${["In Progress","Ready for Pickup","Delivered"].includes(We.status)?"completed":""}`,children:[e.jsx("div",{className:"timeline-dot"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h4",{children:"Clothes Picked Up"}),e.jsx("p",{children:"Your clothes are being processed"}),e.jsx("span",{className:"timeline-time",children:We.status==="In Progress"?"Current":["Ready for Pickup","Delivered"].includes(We.status)?"Completed":"Pending"})]})]}),e.jsxs("div",{className:`timeline-item ${["Ready for Pickup","Delivered"].includes(We.status)?"completed":""}`,children:[e.jsx("div",{className:"timeline-dot"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h4",{children:"Ready for Delivery"}),e.jsx("p",{children:"Your clothes are clean and ready"}),e.jsx("span",{className:"timeline-time",children:We.status==="Ready for Pickup"?"Current":We.status==="Delivered"?"Completed":"Pending"})]})]}),e.jsxs("div",{className:`timeline-item ${We.status==="Delivered"?"completed":""}`,children:[e.jsx("div",{className:"timeline-dot"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h4",{children:"Delivered"}),e.jsx("p",{children:"Order completed successfully"}),e.jsx("span",{className:"timeline-time",children:We.status==="Delivered"?"Completed":"Pending"})]})]})]}),e.jsxs("div",{className:"contact-section",children:[e.jsx("button",{className:"contact-btn",onClick:()=>wa(We),children:"📞 Contact Laundryman"}),e.jsx("button",{className:"support-btn",onClick:()=>gn(We),children:"💬 Customer Support"})]})]})]})}),dn&&e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-content contact-modal",children:[e.jsxs("div",{className:"contact-header",children:[e.jsx("h3",{children:ks==="laundryman"?"📞 Contact Laundryman":"💬 Customer Support"}),e.jsx("button",{className:"close-btn",onClick:()=>ms(!1),children:"✕"})]}),e.jsxs("div",{className:"contact-content",children:[At&&e.jsxs("div",{className:"contact-order-info",children:[e.jsx("h4",{children:"Order Details"}),e.jsxs("div",{className:"order-info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Order ID:"}),e.jsxs("span",{children:["#",At.id]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"status-badge",style:{backgroundColor:mn(At.status)},children:At.status})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{children:At.date})]}),ks==="laundryman"&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Laundryman:"}),e.jsx("span",{children:At.laundryman})]})]})]}),ks==="laundryman"?e.jsxs("div",{className:"laundryman-contact-options",children:[e.jsx("h4",{children:"Contact Options"}),e.jsxs("div",{className:"contact-options-grid",children:[e.jsxs("button",{className:"contact-option-btn call-btn",children:[e.jsx("div",{className:"contact-icon",children:"📞"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("h5",{children:"Call Now"}),e.jsx("p",{children:"Direct phone call"})]})]}),e.jsxs("button",{className:"contact-option-btn whatsapp-btn",children:[e.jsx("div",{className:"contact-icon",children:"💬"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("h5",{children:"WhatsApp"}),e.jsx("p",{children:"Send message"})]})]})]}),At&&e.jsxs("div",{className:"laundryman-details",children:[e.jsx("h4",{children:"Laundryman Information"}),(()=>{const O=ie.find(Ne=>Ne.name===At.laundryman);return O?e.jsxs("div",{className:"laundryman-contact-card",children:[e.jsx("img",{src:O.image||"/profile.webp",alt:O.name,className:"laundryman-contact-image"}),e.jsxs("div",{className:"laundryman-contact-info",children:[e.jsx("h5",{children:O.name}),e.jsx("p",{children:O.experience}),e.jsxs("p",{children:["📞 ",O.phone]}),e.jsxs("p",{children:["🕒 ",O.workingHours]})]})]}):null})()]})]}):e.jsxs("div",{className:"support-contact-options",children:[e.jsx("h4",{children:"How can we help you?"}),e.jsxs("div",{className:"contact-options-grid",children:[e.jsxs("button",{className:"contact-option-btn email-btn",children:[e.jsx("div",{className:"contact-icon",children:"📧"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("h5",{children:"Email Support"}),e.jsx("p",{children:"Get help via email"})]})]}),e.jsxs("button",{className:"contact-option-btn chat-btn",children:[e.jsx("div",{className:"contact-icon",children:"💬"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("h5",{children:"Live Chat"}),e.jsx("p",{children:"Chat with our team"})]})]}),e.jsxs("button",{className:"contact-option-btn call-btn",onClick:()=>window.open("tel:+911234567890","_self"),children:[e.jsx("div",{className:"contact-icon",children:"📞"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("h5",{children:"Call Support"}),e.jsx("p",{children:"+91 123 456 7890"})]})]}),e.jsxs("button",{className:"contact-option-btn faq-btn",onClick:()=>alert("FAQ section coming soon!"),children:[e.jsx("div",{className:"contact-icon",children:"❓"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("h5",{children:"FAQ"}),e.jsx("p",{children:"Common questions"})]})]})]}),e.jsxs("div",{className:"support-hours",children:[e.jsx("h4",{children:"Support Hours"}),e.jsxs("div",{className:"hours-info",children:[e.jsx("p",{children:"📅 Monday - Friday: 9:00 AM - 8:00 PM"}),e.jsx("p",{children:"📅 Saturday: 10:00 AM - 6:00 PM"}),e.jsx("p",{children:"📅 Sunday: 10:00 AM - 4:00 PM"})]})]})]}),e.jsx("div",{className:"contact-actions",children:e.jsx("button",{className:"close-contact-btn",onClick:()=>ms(!1),children:"Close"})})]})]})}),e.jsx(zc,{isOpen:vt,onClose:bt,onSave:Tt,initialAddress:ft||void 0})]})},Ha=s=>{const i=[],a=new Date,o=a.getFullYear(),c=a.getMonth(),u=a.getDate();for(let h=0;h<s;h++){const f=new Date(o,c,u+h),g=f.getFullYear()+"-"+String(f.getMonth()+1).padStart(2,"0")+"-"+String(f.getDate()).padStart(2,"0");i.push(g)}return i},oi=()=>{const s=new Date;return s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")},Wc=()=>{const[s,i]=p.useState(!1),[a,o]=p.useState(!1),[c,u]=p.useState(!1),[h,f]=p.useState([]),[g,b]=p.useState([]),[x,_]=p.useState([]),[S,y]=p.useState(!0),[j,N]=p.useState(!1),[v,P]=p.useState(!1),[E,z]=p.useState(Ha(10)),[F,A]=p.useState(null),[H,K]=p.useState(!1),[I,$]=p.useState([]),[W,J]=p.useState(new Set),[U,te]=p.useState(""),[oe,le]=p.useState(!1),[ee,he]=p.useState(!1),X=Z=>{f(q=>[...q,Z])},st=Z=>{b(q=>q.includes(Z)?q.filter(re=>re!==Z):[...q,Z])},ae=async()=>{if(g.length===0||h.length===0){alert("Please select dates and add at least one slot.");return}N(!0);try{const Z=localStorage.getItem("token");await je.post("/api/slots",{dates:g,slots:h},{headers:{Authorization:`Bearer ${Z}`}}),P(!0),setTimeout(()=>P(!1),3e3),f([]),b([]),fe()}catch(Z){console.error(Z),alert("Failed to save slot templates.")}finally{N(!1)}},fe=async(Z=!1)=>{try{Z?le(!0):y(!0);const q=localStorage.getItem("token"),re=await je.get("/api/slot-templates",{headers:{Authorization:`Bearer ${q}`}});_(re.data)}catch(q){console.error("Failed to fetch slot templates:",q)}finally{Z?le(!1):y(!1)}},be=async()=>{try{const Z=localStorage.getItem("token"),q=await je.get("/api/next-available-dates?numberOfDays=10",{headers:{Authorization:`Bearer ${Z}`}});$(q.data.availableDates)}catch(Z){console.error("Failed to fetch available dates:",Z)}},Pe=Z=>{f(q=>q.filter((re,pe)=>pe!==Z))},Le=Z=>{A(Z),f(Z.slots.map(q=>({label:q.label,range:q.range,maxBookings:q.maxBookings||10,isActive:q.isActive!==!1}))),o(!0)},ce=async()=>{if(h.length===0){alert("Please add at least one slot.");return}N(!0);try{const Z=localStorage.getItem("token");await je.put(`/api/slot-template/${F.date}`,{slots:h},{headers:{Authorization:`Bearer ${Z}`}}),P(!0),setTimeout(()=>P(!1),3e3),o(!1),A(null),f([]),fe()}catch(Z){console.error(Z),alert("Failed to update slot template.")}finally{N(!1)}},B=async Z=>{if(confirm(`Are you sure you want to delete the template for ${Z}?`))try{const q=localStorage.getItem("token");await je.delete(`/api/slot-template/${Z}`,{headers:{Authorization:`Bearer ${q}`}}),fe(),alert("Template deleted successfully.")}catch(q){console.error(q),alert("Failed to delete template.")}},Y=async()=>{if(!U){alert("Please select a template to copy from.");return}K(!0);try{const Z=localStorage.getItem("token"),q=await je.post("/api/auto-generate-dates",{templateDate:U,numberOfDays:10},{headers:{Authorization:`Bearer ${Z}`}});alert(`Auto-generation completed! ${q.data.results.filter(re=>re.status==="success").length} dates generated.`),u(!1),te(""),fe(),be()}catch(Z){console.error(Z),alert("Failed to auto-generate dates.")}finally{K(!1)}},me=async()=>{if(confirm("Are you sure you want to clean up all past dates? This action cannot be undone."))try{const Z=localStorage.getItem("token"),q=await je.post("/api/cleanup-past-dates",{},{headers:{Authorization:`Bearer ${Z}`}});alert(`Cleanup completed! ${q.data.deletedCount} past templates deleted.`),fe()}catch(Z){console.error(Z),alert("Failed to cleanup past dates.")}},Oe=Z=>{J(q=>{const re=new Set(q);return re.has(Z)?re.delete(Z):re.add(Z),re})},de=Z=>{if(!Z||typeof Z!="string"||!Z.includes("-"))return"Invalid Date";const q=oi(),re=new Date;re.setDate(re.getDate()+1);const pe=re.getFullYear()+"-"+String(re.getMonth()+1).padStart(2,"0")+"-"+String(re.getDate()).padStart(2,"0");if(Z===q)return"Today";if(Z===pe)return"Tomorrow";const[Ae,Ce,Fe]=Z.split("-").map(Number);return new Date(Ae,Ce-1,Fe).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};p.useEffect(()=>{fe(),be(),(async()=>{const Ce=Ha(10);await mt(Ce)})();const q=setInterval(()=>{const Ce=oi(),Fe=E[0];Ce!==Fe&&(console.log("Date changed detected:",Fe,"->",Ce),we())},6e4),re=setInterval(()=>{console.log("Auto-refreshing existing templates..."),fe(!0),be()},3e5),pe=()=>{if(!document.hidden){const Ce=oi(),Fe=E[0];Ce!==Fe&&(console.log("Visibility change - Date update needed:",Fe,"->",Ce),we())}},Ae=Ce=>{console.log("🎉 Background slot templates generated:",Ce.detail),fe(!0),be();const{count:Fe,dates:Pt}=Ce.detail;console.log(`✅ ${Fe} new templates generated for dates: ${Pt.join(", ")}`)};return document.addEventListener("visibilitychange",pe),window.addEventListener("slotTemplatesGenerated",Ae),()=>{clearInterval(q),clearInterval(re),document.removeEventListener("visibilitychange",pe),window.removeEventListener("slotTemplatesGenerated",Ae)}},[E]);const we=()=>{const Z=Ha(10),q=oi();z(Z),b(re=>re.filter(pe=>pe>=q)),console.log("Dates updated - Today:",q,"New dates:",Z),fe(!0),be(),mt(Z)},mt=async Z=>{try{he(!0),console.log("Checking for new dates that need templates...");const q=localStorage.getItem("token"),re=await je.get("/api/slot-templates",{headers:{Authorization:`Bearer ${q}`}}),pe=re.data.map(et=>et.date),Ae=Z.filter(et=>!pe.includes(et));if(Ae.length===0){console.log("All new dates already have templates");return}console.log("New dates needing templates:",Ae);const Ce=oi(),Fe=re.data.filter(et=>et.date>=Ce).sort((et,cs)=>new Date(et.date)-new Date(cs.date))[0];if(!Fe){console.log("No recent template found to copy from");return}console.log("Using template from",Fe.date,"as base for new templates");const vt=(await je.post("/api/auto-generate-dates",{templateDate:Fe.date,numberOfDays:10},{headers:{Authorization:`Bearer ${q}`}})).data.results.filter(et=>et.status==="success").length;console.log(`Auto-generated ${vt} new templates`),vt>0&&console.log(`✅ Auto-generated ${vt} new templates for upcoming dates`),fe(!0),be()}catch(q){console.error("Error auto-generating templates for new dates:",q)}finally{he(!1)}};return S?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Os,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading slot templates..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl",children:e.jsx(cu,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Enhanced Slot Template Manager"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create, edit, and auto-generate time slot templates"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:me,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(tu,{className:"w-4 h-4"}),e.jsx("span",{children:"Cleanup Past"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(mu,{className:"w-4 h-4"}),e.jsx("span",{children:"Admin Panel"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ia,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Auto-Generate Dates"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Quickly generate next 10 days from existing template"})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[e.jsx(nu,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Auto Generate"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("div",{className:"font-medium text-green-800",children:"Available Dates"}),e.jsxs("div",{className:"text-green-600",children:[I.length," dates ready for generation"]})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("div",{className:"font-medium text-blue-800",children:"Total Templates"}),e.jsxs("div",{className:"text-blue-600",children:[x.length," templates created"]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(su,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Select Dates"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Real-time dates (auto-updates daily, no past dates)"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:E.map(Z=>{const q=g.includes(Z);return e.jsx("label",{className:"group cursor-pointer",children:e.jsxs("div",{className:`p-3 rounded-xl border-2 transition-all duration-200 ${q?"border-purple-200 bg-purple-50 shadow-sm":"border-gray-200 bg-gray-50 hover:border-gray-300 group-hover:bg-gray-100"}`,children:[e.jsx("input",{type:"checkbox",checked:q,onChange:()=>st(Z),className:"sr-only"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm font-medium ${q?"text-purple-900":"text-gray-900"}`,children:de(Z)}),e.jsx("div",{className:`text-xs mt-1 ${q?"text-purple-600":"text-gray-500"}`,children:Z})]}),q&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(On,{className:"w-4 h-4 text-purple-600"})})]})},Z)})}),g.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx("span",{className:"font-medium",children:g.length})," date",g.length!==1?"s":""," selected"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Co,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Time Slots"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Define your service time slots"})]})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Slot"})]})]})}),e.jsx("div",{className:"p-6",children:h.length>0?e.jsx("div",{className:"space-y-3",children:h.map((Z,q)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200 group hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Rn,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:Z.label}),e.jsx("div",{className:"text-sm text-gray-600",children:Z.range}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Max: ",Z.maxBookings||10," bookings"]})]})]}),e.jsx("button",{onClick:()=>Pe(q),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(es,{className:"w-4 h-4"})})]},q))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Co,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No time slots added yet"}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Your First Slot"})]})]})})]}),g.length>0&&h.length>0&&e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:e.jsx("button",{onClick:ae,disabled:j,className:`w-full flex items-center justify-center space-x-3 px-6 py-4 rounded-xl font-semibold text-lg transition-all duration-200 ${v?"bg-green-600 text-white shadow-lg":j?"bg-gray-400 text-white cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 shadow-lg hover:shadow-xl"}`,children:j?e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Saving Templates..."})]}):v?e.jsxs(e.Fragment,{children:[e.jsx(On,{className:"w-6 h-6"}),e.jsx("span",{children:"Templates Saved Successfully!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(mi,{className:"w-6 h-6"}),e.jsx("span",{children:"Save Slot Templates"})]})})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden sticky top-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fu,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Existing Templates"}),e.jsxs("p",{className:"text-indigo-100 text-sm",children:[x.length," template",x.length!==1?"s":"",ee&&e.jsxs("span",{className:"ml-2 inline-flex items-center space-x-1",children:[e.jsx(Os,{className:"w-3 h-3 animate-spin"}),e.jsx("span",{children:"Auto-generating..."})]})]})]})]}),e.jsx("button",{onClick:()=>{fe(!0),be()},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",disabled:oe||ee,children:e.jsx(hl,{className:`w-4 h-4 ${oe?"animate-spin":""}`})})]})}),e.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:x.length>0?e.jsx("div",{className:"space-y-4",children:x.filter(Z=>(Z==null?void 0:Z.date)&&typeof Z.date=="string").map((Z,q)=>{var pe;const re=W.has(Z.date);return e.jsx("div",{className:"border border-gray-200 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qa,{className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"font-medium text-indigo-700",children:de(Z.date)}),Z.isAutoGenerated&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"Auto"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("button",{onClick:()=>Oe(Z.date),className:"p-1 hover:bg-gray-200 rounded",children:re?e.jsx(dr,{className:"w-4 h-4"}):e.jsx(cr,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:Z.date}),re&&e.jsx("div",{className:"space-y-2 mb-3",children:(pe=Z.slots)==null?void 0:pe.map((Ae,Ce)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-white p-2 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:Ae.label}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",Ae.range,")"]})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Max: ",Ae.maxBookings||10]})]},Ce))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>Le(Z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit Template",children:e.jsx(ko,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>te(Z.date),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Use for Auto-Generation",children:e.jsx(ru,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>B(Z.date),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete Template",children:e.jsx(ml,{className:"w-4 h-4"})})]})]})},q)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qa,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No templates created yet"})]})})]})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ms,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New Time Slot"})]}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Z=>{Z.preventDefault();const q=new FormData(Z.target),re={label:q.get("label"),range:q.get("range"),maxBookings:10,isActive:!0};X(re),i(!1)},className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Slot Label"}),e.jsx("input",{name:"label",type:"text",required:!0,placeholder:"e.g., Morning Shift",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Time Range"}),e.jsx("input",{name:"range",type:"text",required:!0,placeholder:"e.g., 07:00-09:00",pattern:"[0-9]{2}:[0-9]{2}-[0-9]{2}:[0-9]{2}",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: HH:MM-HH:MM (24-hour format)"})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Note:"})," Maximum bookings will be set to 10 by default. Only washermen can adjust this value."]})})]}),e.jsxs("div",{className:"flex space-x-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-medium transition-colors",children:"Add Slot"})]})]})]})}),a&&F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ko,{className:"w-5 h-5 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Edit Template"})]}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Editing:"})," ",de(F.date)," (",F.date,")"]})}),e.jsx("div",{className:"space-y-4 mb-6",children:h.map((Z,q)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:Z.label}),e.jsx("div",{className:"text-xs text-gray-500",children:Z.range})]}),e.jsx("button",{onClick:()=>Pe(q),className:"p-1 text-red-500 hover:bg-red-100 rounded",children:e.jsx(es,{className:"w-4 h-4"})})]},q))}),e.jsxs("button",{onClick:()=>i(!0),className:"w-full mb-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4 inline mr-2"}),"Add New Slot"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:j,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 font-medium transition-colors disabled:bg-gray-400",children:j?"Saving...":"Save Changes"})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ia,{className:"w-5 h-5 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Auto-Generate Dates"})]}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Template to Copy From"}),e.jsxs("select",{value:U,onChange:Z=>te(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"",children:"Choose a template..."}),x.filter(Z=>(Z==null?void 0:Z.date)&&typeof Z.date=="string").map(Z=>{var q;return e.jsxs("option",{value:Z.date,children:[de(Z.date)," (",Z.date,") - ",((q=Z.slots)==null?void 0:q.length)||0," slots"]},Z.date)})]})]}),e.jsxs("div",{className:"mb-6 p-3 bg-green-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:"Available for generation:"})," ",I.length," dates"]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"This will create templates for the next 10 available dates using the selected template as a base."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:H||!U,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 font-medium transition-colors disabled:bg-gray-400",children:H?e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"w-4 h-4 inline mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ia,{className:"w-4 h-4 inline mr-2"}),"Auto Generate"]})})]})]})]})})]})},Vc=()=>{const[s,i]=p.useState([]);return p.useEffect(()=>{lt("/api/admin").then(a=>a.json()).then(a=>{a.success&&i(a.messages)}).catch(a=>console.error(a))},[]),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"📨 Contact Form Submissions"}),s.map(a=>e.jsxs("div",{className:"border p-4 rounded mb-4 shadow-md",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Message:"})," ",a.message]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["📅 ",new Date(a.createdAt).toLocaleString()]})]},a._id))]})},px=()=>{var Gt,Bt,$s,un,Cs,hn,Zs;const s=ws(),i=p.useRef(null),[a,o]=p.useState(!1),[c,u]=p.useState({name:"Admin User",email:"admin@laundryservice.com",role:"Super Admin",phone:"+1-234-567-8900",address:"123 Admin Street, Business District",joinDate:"2024-01-01",image:"https://randomuser.me/api/portraits/men/1.jpg"}),[h,f]=p.useState("Dashboard"),[g,b]=p.useState(!1),[x,_]=p.useState(null),[S,y]=p.useState(!1),[j,N]=p.useState(!1),[v,P]=p.useState(null),[E,z]=p.useState(!1),[F,A]=p.useState(null),[H,K]=p.useState("All Orders"),[I,$]=p.useState(""),[W,J]=p.useState("Last 7 Days"),[U,te]=p.useState(!1),[oe,le]=p.useState(!1),[ee,he]=p.useState(!1),[X,st]=p.useState(!1),[ae,fe]=p.useState(!1),[be,Pe]=p.useState(null),[Le,ce]=p.useState(!1),[B,Y]=p.useState(null),[me,Oe]=p.useState(""),[de,we]=p.useState(""),[mt,Z]=p.useState([]),[q,re]=p.useState({slot:"",maxOrders:20}),[pe,Ae]=p.useState(null),[Ce,Fe]=p.useState(!1),[Pt,vt]=p.useState(null),[et,cs]=p.useState([]),[Lt,ft]=p.useState([]),[R,G]=p.useState([]),[ne,xe]=p.useState(!0),Ie=()=>{o(!a)},De=k=>{f(k),o(!1)},ve=()=>{o(!1)};p.useEffect(()=>{const k=localStorage.getItem("token");console.log("Token:",k);const se=async()=>{try{const Tt=(await je.get("/api/user/currentuser",{headers:{Authorization:`Bearer ${k}`}})).data;vt({name:Tt.name,email:Tt.email,contact:Tt.contact,image:"/src/washer.png",_id:Tt._id}),console.log("Profile fetched:",Tt)}catch(bt){console.error("Failed to fetch profile:",bt)}},Ze=async()=>{try{console.log("Fetching customers...");const bt=await je.get("/api/user/",{headers:{Authorization:`Bearer ${k}`}});cs(bt.data||[])}catch(bt){console.error("Error fetching customers:",bt)}},it=async()=>{try{console.log("Fetching laundrymen...");const Tt=((await je.get("/api/washerman/dashboard/all",{headers:{Authorization:`Bearer ${k}`}})).data||[]).map(He=>({id:He.id||He._id||"",name:He.name||"",email:He.email||"",address:He.address||"",image:He.image||"/src/washer.png",specialties:Array.isArray(He.specialties)?He.specialties:[],workingHours:Array.isArray(He.workingHours)?He.workingHours:[],maxOrders:He.maxOrders??0,totalOrders:He.totalOrders??0,completedOrders:He.completedOrders??0,rating:He.rating??0,status:He.status||"Active",earnings:He.earnings??0,availability:He.availability||"Available",contact:He.contact||"",createdAt:He.createdAt||""}));ft(Tt)}catch(bt){console.error("Error fetching laundrymen:",bt)}};(async()=>{xe(!0),await Promise.all([se(),Ze(),it()]),xe(!1)})()},[]),p.useEffect(()=>{const k=localStorage.getItem("token");console.log(2),(async()=>{try{const Ze=await je.get("/api/booking/all",{headers:{Authorization:`Bearer ${k}`}});console.log("Bookings from backend:",Ze.data);const it=(Ze.data||[]).map(Ue=>{var bt,Tt,He,ns,Hs,Us,Jt,Ee;return{id:Ue._id||Ue.id,customerId:((bt=Ue.guest)==null?void 0:bt._id)||"",customerName:((Tt=Ue.guest)==null?void 0:Tt.name)||"Unassigned",laundrymanId:((He=Ue.washerman)==null?void 0:He._id)||"",laundrymanName:((ns=Ue.washerman)==null?void 0:ns.name)||"Unassigned",items:(Hs=Ue.productId)!=null&&Hs.category?[`${Ue.quantity} x ${Ue.productId.category}`]:["Item"],totalAmount:Ue.totalAmount||0,status:Ue.status||"Pending",pickupDate:((Us=Ue.date)==null?void 0:Us.slice(0,10))||"",timeSlot:((Jt=Ue.slot)==null?void 0:Jt.range)||"Not specified",timeSlotLabel:((Ee=Ue.slot)==null?void 0:Ee.label)||"",priority:Ue.priority||"Normal",orderDate:Ue.createdAt?Ue.createdAt.slice(0,10):Ue.orderDate?Ue.orderDate.slice(0,10):"",paymentMethod:Ue.paymentMethod||"Cash",paymentStatus:Ue.paymentStatus||"Pending"}});G(it)}catch(Ze){console.error("Error fetching bookings:",Ze)}})()},[]);const yt=async()=>{try{const k=localStorage.getItem("token"),Ze=((await je.get("/api/slot-templates",{headers:{Authorization:`Bearer ${k}`}})).data||[]).map(it=>({id:it._id,slot:it.time||"Unnamed Slot",currentOrders:0,maxOrders:0,active:!1}));Z(Ze)}catch(k){console.error("Failed to fetch time slots",k)}};p.useEffect(()=>{console.log(3),yt()},[]);const nt=async k=>{try{const se={time:k.slot,period:k.slot};await je.post("/api/slot",se),await yt()}catch(se){console.error("Add failed",se)}},[pt,ss]=p.useState({commission:15,minOrderAmount:100,maxServiceRadius:25,emailNotifications:!0,smsNotifications:!0,pushNotifications:!1,sessionTimeout:30}),[Ge,ds]=p.useState(["Downtown Mumbai","Andheri","Bandra"]),[us,js]=p.useState(""),Je={totalCustomers:et.length,activeCustomers:et.filter(k=>k.status==="Active").length,totalLaundrymen:Lt.length,activeLaundrymen:Lt.filter(k=>k.status==="Active").length,totalOrders:R.length,pendingOrders:R.filter(k=>k.status==="Pending").length,completedOrders:R.filter(k=>k.status==="Delivered").length,unassignedOrders:R.filter(k=>!k.laundrymanId).length,totalRevenue:R.reduce((k,se)=>k+se.totalAmount,0),todayRevenue:2400,monthlyRevenue:45e3},_s=et.filter(k=>k.name.toLowerCase().includes(me.toLowerCase())||k.email.toLowerCase().includes(me.toLowerCase())),Ns=Lt.filter(k=>k.name.toLowerCase().includes(de.toLowerCase())||k.email.toLowerCase().includes(de.toLowerCase())),rn=R.filter(k=>{const se=H==="All Orders"||k.status===H,Ze=!I||k.orderDate===I;return se&&Ze}),Vn=(k,se,Ze)=>{ft(Lt.map(it=>it.id===k?{...it,status:se==="activate"?"Active":"Inactive"}:it))},on=(k,se)=>{Y({...k,userType:se}),ce(!0)},Ni=k=>{P(k),N(!0)},Gn=k=>{k.preventDefault();const se=new FormData(k.target),Ze={...be,slot:se.get("slot"),maxOrders:parseInt(se.get("maxOrders"))};Z(mt.map(it=>it.id===be.id?Ze:it)),fe(!1),Pe(null)},Vt=()=>{z(!0),f("Profile"),A(c.image)},ln=k=>{const se=k.target.files[0];if(se){const Ze=new FileReader;Ze.onloadend=()=>{A(Ze.result)},Ze.readAsDataURL(se)}},cn=k=>{k.preventDefault();const se=new FormData(k.target),Ze=k.target.image.files[0];if(Ze){const it=new FileReader;it.onloadend=()=>{u({...c,name:se.get("name"),email:se.get("email"),phone:se.get("phone"),address:se.get("address"),image:it.result}),z(!1),f("Dashboard")},it.readAsDataURL(Ze)}else u({...c,name:se.get("name"),email:se.get("email"),phone:se.get("phone"),address:se.get("address"),image:F||c.image}),z(!1),f("Dashboard")},hs=(k,se)=>{ss({...pt,[k]:se})},Ss=k=>{ss({...pt,[k]:!pt[k]})},_t=()=>{us.trim()&&!Ge.includes(us.trim())&&(ds([...Ge,us.trim()]),js(""))},ie=k=>{ds(Ge.filter((se,Ze)=>Ze!==k))},dn=()=>{alert("Backup created successfully!")},ms=()=>{alert("Two-Factor Authentication setup would be implemented here")},ks=()=>{b(!0)},Rs=()=>{b(!1),s("/SignIn")},At=()=>{b(!1)},Fs=()=>{const k=new Date().getHours();return k<12?"Good Morning":k<17?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"admin-dashboard-container",children:[e.jsx("header",{className:"mobile-header",children:e.jsxs("div",{className:"mobile-header-content",children:[e.jsxs("div",{className:"mobile-logo",children:[e.jsx("span",{className:"logo-icon",children:"🧺"}),e.jsx("span",{className:"logo-text",children:"LaundryAdmin"})]}),e.jsx("button",{className:"mobile-menu-toggle",onClick:Ie,"aria-label":"Toggle menu",children:a?e.jsx(es,{size:24}):e.jsx(ll,{size:24})})]})}),a&&e.jsx("div",{className:"mobile-menu-overlay",onClick:ve}),e.jsxs("aside",{className:`admin-sidebar ${a?"mobile-open":""}`,children:[e.jsx("div",{className:"admin-sidebar-header desktop-only",children:e.jsxs("div",{className:"admin-logo",children:[e.jsx("span",{className:"logo-icon",children:"🧺"}),e.jsx("span",{className:"logo-text",children:"LaundryAdmin"})]})}),e.jsxs("div",{className:"admin-sidebar-profile",onClick:Vt,children:[e.jsx("img",{src:c.image||"/placeholder.svg",alt:"Admin",className:"admin-profile-img"}),e.jsxs("div",{className:"admin-profile-info",children:[e.jsx("span",{className:"admin-profile-name",children:c.name}),e.jsx("span",{className:"admin-profile-role",children:c.role})]})]}),e.jsxs("nav",{className:"admin-nav",children:[e.jsxs("button",{className:h==="Dashboard"?"active":"",onClick:()=>De("Dashboard"),children:[e.jsx("span",{className:"nav-icon",children:"📊"}),e.jsx("span",{className:"nav-text",children:"Dashboard"})]}),e.jsxs("button",{className:h==="Customers"?"active":"",onClick:()=>De("Customers"),children:[e.jsx("span",{className:"nav-icon",children:"👥"}),e.jsx("span",{className:"nav-text",children:"Customers"})]}),e.jsxs("button",{className:h==="Laundrymen"?"active":"",onClick:()=>De("Laundrymen"),children:[e.jsx("span",{className:"nav-icon",children:"👨‍💼"}),e.jsx("span",{className:"nav-text",children:"Dhobi"})]}),e.jsxs("button",{className:h==="Orders"?"active":"",onClick:()=>De("Orders"),children:[e.jsx("span",{className:"nav-icon",children:"📦"}),e.jsx("span",{className:"nav-text",children:"Orders"})]}),e.jsxs("button",{className:h==="TimeSlots"?"active":"",onClick:()=>De("TimeSlots"),children:[e.jsx("span",{className:"nav-icon",children:"⏰"}),e.jsx("span",{className:"nav-text",children:"Time Slots"})]}),e.jsxs("button",{className:h==="Messages"?"active":"",onClick:()=>De("Messages"),children:[e.jsx("span",{className:"nav-icon",children:"💬"}),e.jsx("span",{className:"nav-text",children:"Contact Messages"})]}),e.jsxs("button",{className:"admin-logout-btn",onClick:ks,children:[e.jsx("span",{className:"nav-icon",children:"🚪"}),e.jsx("span",{className:"nav-text",children:"Logout"})]})]})]}),e.jsxs("main",{className:"admin-main-content",children:[h==="Dashboard"&&e.jsxs("div",{className:"admin-dashboard-page",children:[e.jsxs("section",{className:"admin-welcome-section",children:[e.jsxs("div",{className:"welcome-content",children:[e.jsxs("h1",{children:[Fs(),", ",c.name,"! 👋"]}),e.jsx("p",{children:"Here's an overview of your laundry service platform"})]}),e.jsxs("div",{className:"admin-date-time",children:[e.jsx("div",{className:"current-date",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"current-time",children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("section",{className:"admin-stats-section",children:e.jsxs("div",{className:"admin-stats-grid",children:[e.jsxs("div",{className:"admin-stat-card customers",children:[e.jsx("div",{className:"stat-icon",children:"👥"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Customers"}),e.jsx("p",{className:"stat-number",children:Je.totalCustomers}),e.jsxs("span",{className:"stat-label",children:[Je.activeCustomers," Active"]})]})]}),e.jsxs("div",{className:"admin-stat-card laundrymen",children:[e.jsx("div",{className:"stat-icon",children:"👨‍💼"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Dhobi"}),e.jsx("p",{className:"stat-number",children:Je.totalLaundrymen}),e.jsxs("span",{className:"stat-label",children:[Je.activeLaundrymen," Active"]})]})]}),e.jsxs("div",{className:"admin-stat-card orders",children:[e.jsx("div",{className:"stat-icon",children:"📦"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Orders"}),e.jsx("p",{className:"stat-number",children:Je.totalOrders}),e.jsxs("span",{className:"stat-label",children:[Je.pendingOrders," Pending"]})]})]}),e.jsxs("div",{className:"admin-stat-card unassigned",children:[e.jsx("div",{className:"stat-icon",children:"⚠️"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Unassigned Orders"}),e.jsx("p",{className:"stat-number",children:Je.unassignedOrders}),e.jsx("span",{className:"stat-label",children:"Need Assignment"})]})]}),e.jsxs("div",{className:"admin-stat-card revenue",children:[e.jsx("div",{className:"stat-icon",children:"₹"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total order amount"}),e.jsxs("p",{className:"stat-number",children:["₹",Je.totalRevenue.toLocaleString()]}),e.jsx("span",{className:"stat-label",children:"This Month"})]})]})]})}),e.jsxs("section",{className:"admin-quick-actions",children:[e.jsx("h3",{children:"Quick Actions"}),e.jsxs("div",{className:"quick-actions-grid",children:[e.jsxs("button",{className:"quick-action-btn",onClick:()=>De("Customers"),children:[e.jsx("div",{className:"action-icon",children:"👥"}),e.jsx("span",{children:"Manage Customers"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>De("Laundrymen"),children:[e.jsx("div",{className:"action-icon",children:"👨‍💼"}),e.jsx("span",{children:"Manage Dhobi"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>De("Orders"),children:[e.jsx("div",{className:"action-icon",children:"📦"}),e.jsx("span",{children:"View Orders"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>De("TimeSlots"),children:[e.jsx("div",{className:"action-icon",children:"⏰"}),e.jsx("span",{children:"Manage Time Slots"})]})]})]})]}),h==="Profile"&&e.jsxs("div",{className:"admin-profile-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Admin Profile"}),e.jsx("button",{className:"back-btn",onClick:()=>De("Dashboard"),children:"← Back to Dashboard"})]}),E?e.jsxs("div",{className:"edit-profile-section",children:[e.jsx("h3",{children:"Edit Profile"}),e.jsx("img",{src:F||c.image||"/placeholder.svg",alt:"Profile Preview",className:"profile-image-preview"}),e.jsxs("form",{onSubmit:cn,className:"edit-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",defaultValue:c.name,required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",defaultValue:c.email,required:!0,placeholder:"Enter your email address"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",defaultValue:c.phone,required:!0,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("textarea",{id:"address",name:"address",defaultValue:c.address,required:!0,placeholder:"Enter your address",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"image",children:"Profile Image"}),e.jsx("input",{id:"image",name:"image",type:"file",accept:"image/*",onChange:ln,ref:i})]}),e.jsxs("div",{className:"profile-buttons",children:[e.jsx("button",{type:"submit",className:"save-btn",children:"Save Changes"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{z(!1),f("Dashboard")},children:"Cancel"})]})]})]}):e.jsx("div",{className:"profile-view-section",children:e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-image-section",children:[e.jsx("img",{src:c.image||"/placeholder.svg",alt:"Admin Profile",className:"profile-image"}),e.jsx("button",{className:"change-photo-btn",onClick:()=>z(!0),children:"Edit Profile"})]}),e.jsxs("div",{className:"profile-info",children:[e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("p",{children:c.name})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("p",{children:c.email})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("p",{children:c.phone})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Role"}),e.jsx("p",{children:c.role})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Address"}),e.jsx("p",{children:c.address})]}),e.jsxs("div",{className:"info-group",children:[e.jsx("label",{children:"Join Date"}),e.jsx("p",{children:c.joinDate})]})]})]})})]}),h==="Customers"&&e.jsxs("div",{className:"admin-customers-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Customer Management"}),e.jsx("div",{className:"header-actions",children:e.jsx("input",{type:"text",placeholder:"Search customers...",value:me,onChange:k=>Oe(k.target.value),className:"search-input"})})]}),e.jsx("div",{className:"customers-grid",children:_s.map(k=>e.jsxs("div",{className:"customer-card",children:[e.jsxs("div",{className:"customer-header",children:[e.jsx("img",{src:"/profile.webp",alt:"User avatar",className:"customer-image w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{className:"customer-info",children:[e.jsx("h4",{children:k.name}),e.jsx("p",{children:k.email})]})]}),e.jsxs("div",{className:"customer-stats bg-gray-100 p-3 rounded-xl mt-2",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label text-sm text-gray-500",children:"Orders"}),e.jsx("span",{className:"stat-value font-semibold",children:k.totalOrders||0})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label text-sm text-gray-500",children:"Spent"}),e.jsxs("span",{className:"stat-value font-semibold",children:["₹",k.totalSpent||0]})]})]}),e.jsx("button",{className:"mt-3 px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>{Ae(k),Fe(!0)},children:"View"})]},k._id))})]}),Ce&&pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-[90%] max-w-md shadow-xl relative",children:[e.jsx("button",{onClick:()=>Fe(!1),className:"absolute top-2 right-2 text-gray-500 hover:text-black text-xl",children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Customer Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",pe.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",pe.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",pe.contact||"Not Provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",(Gt=pe.address)!=null&&Gt.street||(Bt=pe.address)!=null&&Bt.city||($s=pe.address)!=null&&$s.state?`${((un=pe.address)==null?void 0:un.street)||""}, ${((Cs=pe.address)==null?void 0:Cs.city)||""}, ${((hn=pe.address)==null?void 0:hn.state)||""}, ${((Zs=pe.address)==null?void 0:Zs.zip)||""}`:"Not Provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Joined On:"})," ",pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"Not Available"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Orders:"})," ",pe.totalOrders||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Spent:"})," ₹",pe.totalSpent||0]})]})]})}),h==="Laundrymen"&&e.jsxs("div",{className:"admin-laundrymen-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Dhobi Management"}),e.jsx("div",{className:"header-actions",children:e.jsx("input",{type:"text",placeholder:"Search Dhobi...",value:de,onChange:k=>we(k.target.value),className:"search-input"})})]}),e.jsx("div",{className:"laundrymen-grid",children:Ns.map(k=>e.jsxs("div",{className:"laundryman-card",children:[e.jsxs("div",{className:"laundryman-header",children:[e.jsx("img",{src:"/washer.webp",alt:"Dhobi avatar",className:"customer-image w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{className:"laundryman-info",children:[e.jsx("h4",{children:k.name}),e.jsx("p",{children:k.email}),e.jsx("div",{className:"rating"}),e.jsx("span",{className:`status-badge ${k.status.toLowerCase()}`,children:k.status}),e.jsx("span",{className:`availability-badge ${k.availability.toLowerCase()}`,children:k.availability})]})]}),e.jsxs("div",{className:"laundryman-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Total Orders"}),e.jsx("span",{className:"stat-value",children:k.totalOrders})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Completed"}),e.jsx("span",{className:"stat-value",children:k.completedOrders})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Earnings"}),e.jsxs("span",{className:"stat-value",children:["₹",k.earnings]})]})]}),e.jsxs("div",{className:"laundryman-actions",children:[e.jsx("button",{className:"dashboard-btn",onClick:()=>on(k,"laundryman"),children:"Dashboard"}),e.jsx("button",{className:k.status==="Active"?"deactivate-btn":"activate-btn",onClick:()=>Vn(k.id,k.status==="Active"?"deactivate":"activate"),children:k.status==="Active"?"Deactivate":"Activate"})]})]},k.id))})]}),h==="Orders"&&e.jsxs("div",{className:"admin-orders-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Order Management"}),e.jsxs("div",{className:"order-filters",children:[e.jsxs("select",{className:"filter-select",value:H,onChange:k=>K(k.target.value),children:[e.jsx("option",{children:"All Orders"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Assigned"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Delivered"})]}),e.jsx("input",{type:"date",className:"date-filter",value:I,onChange:k=>$(k.target.value)}),e.jsx("button",{className:"clear-filter-btn",onClick:()=>{K("All Orders"),$("")},children:"Clear Filters"})]})]}),e.jsx("div",{className:"orders-table-container",children:e.jsxs("table",{className:"orders-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Dhobi"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Time Slot"}),e.jsx("th",{children:"Priority"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:rn.map(k=>e.jsxs("tr",{children:[e.jsx("td",{children:k.id}),e.jsx("td",{children:k.customerName}),e.jsxs("td",{children:[k.laundrymanName,!k.laundrymanId&&e.jsx("button",{className:"assign-btn small",onClick:()=>{P(k),he(!0)},children:"Assign"})]}),e.jsx("td",{children:k.items.join(", ")}),e.jsxs("td",{children:["₹",k.totalAmount]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${k.status.toLowerCase().replace(" ","-")}`,children:k.status})}),e.jsx("td",{children:k.timeSlot}),e.jsx("td",{children:e.jsx("span",{className:`priority-badge ${k.priority.toLowerCase()}`,children:k.priority})}),e.jsx("td",{children:e.jsx("button",{className:"view-btn small",onClick:()=>Ni(k),children:"View"})})]},k.id))})]})})]}),h==="TimeSlots"&&e.jsxs("div",{className:"admin-timeslots-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Time Slots Management"}),e.jsx("p",{className:"page-description",children:"Manage time slots and schedules for laundry services"})]}),e.jsx(Wc,{})]}),h==="Messages"&&e.jsxs("div",{className:"admin-messages-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Contact Messages"}),e.jsx("p",{className:"page-description",children:"View and manage customer contact form submissions"})]}),e.jsx(Vc,{})]}),h==="Analytics"&&e.jsxs("div",{className:"admin-analytics-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{children:"Analytics & Reports"}),e.jsxs("div",{className:"analytics-filters",children:[e.jsxs("select",{className:"filter-select",value:W,onChange:k=>J(k.target.value),children:[e.jsx("option",{children:"Last 7 Days"}),e.jsx("option",{children:"Last 30 Days"}),e.jsx("option",{children:"Last 3 Months"}),e.jsx("option",{children:"Last Year"})]}),e.jsx("button",{className:"export-btn",children:"Export Report"})]})]}),e.jsxs("div",{className:"analytics-grid",children:[e.jsxs("div",{className:"analytics-card revenue-chart",children:[e.jsx("h3",{children:"Revenue Trends"}),e.jsx("div",{className:"chart-placeholder",children:e.jsxs("div",{className:"chart-content",children:[e.jsx("div",{className:"chart-icon",children:"📈"}),e.jsx("p",{children:"Revenue Chart"}),e.jsxs("div",{className:"chart-stats",children:[e.jsx("div",{className:"chart-stat",children:e.jsxs("span",{children:["Today: ₹",Je.todayRevenue]})}),e.jsx("div",{className:"chart-stat",children:e.jsxs("span",{children:["This Month: ₹",Je.monthlyRevenue]})})]})]})})]}),e.jsxs("div",{className:"analytics-card order-stats",children:[e.jsx("h3",{children:"Order Statistics"}),e.jsxs("div",{className:"order-breakdown",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Completed"}),e.jsx("span",{className:"breakdown-value",children:Je.completedOrders}),e.jsx("div",{className:"breakdown-bar",children:e.jsx("div",{className:"breakdown-fill completed",style:{width:"70%"}})})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"In Progress"}),e.jsx("span",{className:"breakdown-value",children:"1"}),e.jsx("div",{className:"breakdown-bar",children:e.jsx("div",{className:"breakdown-fill in-progress",style:{width:"20%"}})})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("span",{className:"breakdown-label",children:"Pending"}),e.jsx("span",{className:"breakdown-value",children:Je.pendingOrders}),e.jsx("div",{className:"breakdown-bar",children:e.jsx("div",{className:"breakdown-fill pending",style:{width:"10%"}})})]})]})]}),e.jsxs("div",{className:"analytics-card top-performers",children:[e.jsx("h3",{children:"Top Performing Laundrymen"}),e.jsx("div",{className:"performers-list",children:Lt.filter(k=>k.status==="Active").sort((k,se)=>se.rating-k.rating).slice(0,3).map((k,se)=>e.jsxs("div",{className:"performer-item",children:[e.jsxs("div",{className:"performer-rank",children:["#",se+1]}),e.jsx("img",{src:k.image||"/placeholder.svg",alt:k.name,className:"performer-image"}),e.jsxs("div",{className:"performer-info",children:[e.jsx("h5",{children:k.name}),e.jsxs("p",{children:[k.rating," • ",k.completedOrders," orders"]})]})]},k.id))})]}),e.jsxs("div",{className:"analytics-card customer-insights",children:[e.jsx("h3",{children:"Customer Insights"}),e.jsxs("div",{className:"insights-content",children:[e.jsxs("div",{className:"insight-item",children:[e.jsx("span",{className:"insight-label",children:"Average Order Value"}),e.jsxs("span",{className:"insight-value",children:["₹",Math.round(Je.totalRevenue/Je.totalOrders)]})]}),e.jsxs("div",{className:"insight-item",children:[e.jsx("span",{className:"insight-label",children:"Customer Retention"}),e.jsx("span",{className:"insight-value",children:"85%"})]}),e.jsxs("div",{className:"insight-item",children:[e.jsx("span",{className:"insight-label",children:"New Customers"}),e.jsx("span",{className:"insight-value",children:"12 this month"})]})]})]})]})]}),h==="Settings"&&e.jsxs("div",{className:"admin-settings-page",children:[e.jsx("div",{className:"page-header",children:e.jsx("h2",{children:"System Settings"})}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"Platform Settings"}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{children:"Service Commission (%)"}),e.jsx("input",{type:"number",value:pt.commission,min:"0",max:"50",onChange:k=>hs("commission",Number.parseInt(k.target.value))})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{children:"Minimum Order Amount"}),e.jsx("input",{type:"number",value:pt.minOrderAmount,min:"50",onChange:k=>hs("minOrderAmount",Number.parseInt(k.target.value))})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{children:"Maximum Service Radius (km)"}),e.jsx("input",{type:"number",value:pt.maxServiceRadius,min:"5",max:"100",onChange:k=>hs("maxServiceRadius",Number.parseInt(k.target.value))})]}),e.jsx("button",{className:"save-btn",onClick:()=>alert("Platform settings saved!"),children:"Save Changes"})]}),e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"Notification Settings"}),e.jsxs("div",{className:"setting-item toggle",children:[e.jsx("label",{children:"Email Notifications"}),e.jsx("div",{className:`toggle-switch ${pt.emailNotifications?"enabled":"disabled"}`,onClick:()=>Ss("emailNotifications"),children:e.jsx("div",{className:"toggle-slider"})})]}),e.jsxs("div",{className:"setting-item toggle",children:[e.jsx("label",{children:"SMS Notifications"}),e.jsx("div",{className:`toggle-switch ${pt.smsNotifications?"enabled":"disabled"}`,onClick:()=>Ss("smsNotifications"),children:e.jsx("div",{className:"toggle-slider"})})]}),e.jsxs("div",{className:"setting-item toggle",children:[e.jsx("label",{children:"Push Notifications"}),e.jsx("div",{className:`toggle-switch ${pt.pushNotifications?"enabled":"disabled"}`,onClick:()=>Ss("pushNotifications"),children:e.jsx("div",{className:"toggle-slider"})})]}),e.jsx("button",{className:"save-btn",onClick:()=>alert("Notification settings saved!"),children:"Save Changes"})]}),e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"Service Areas"}),e.jsx("div",{className:"service-areas-list",children:Ge.map((k,se)=>e.jsxs("div",{className:"area-item",children:[e.jsx("span",{children:k}),e.jsx("button",{className:"remove-btn",onClick:()=>ie(se),children:"Remove"})]},se))}),e.jsxs("div",{className:"add-area",children:[e.jsx("input",{type:"text",placeholder:"Add new service area",value:us,onChange:k=>js(k.target.value),onKeyPress:k=>k.key==="Enter"&&_t()}),e.jsx("button",{className:"add-btn",onClick:_t,children:"Add Area"})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"Backup & Security"}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{children:"Last Backup"}),e.jsx("span",{children:"2024-12-03 10:30 AM"}),e.jsx("button",{className:"backup-btn",onClick:dn,children:"Create Backup"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{children:"Two-Factor Authentication"}),e.jsx("button",{className:"enable-btn",onClick:ms,children:"Enable 2FA"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",value:pt.sessionTimeout,min:"15",max:"120",onChange:k=>hs("sessionTimeout",Number.parseInt(k.target.value))})]}),e.jsx("button",{className:"save-btn",onClick:()=>alert("Security settings saved!"),children:"Save Changes"})]})]})]})]}),ee&&v&&e.jsxs("div",{className:"order-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("span",{className:"order-id",children:["#",v.id]}),e.jsx("span",{className:`status-badge ${v.status.toLowerCase()}`,children:v.status}),e.jsxs("span",{className:"total-amount",children:["₹",v.totalAmount]})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"order-details",children:[e.jsxs("div",{className:"order-info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Customer"}),e.jsx("span",{children:v.customerName})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Dhobi"}),e.jsx("span",{children:v.laundrymanName||"Not Assigned"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Order Date"}),e.jsx("span",{children:v.orderDate})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Pickup Date"}),e.jsx("span",{children:v.pickupDate||"Not Set"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Time Slot"}),e.jsx("span",{children:v.timeSlotLabel?`${v.timeSlotLabel} (${v.timeSlot})`:v.timeSlot||"Not Set"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Payment Method"}),e.jsx("span",{children:v.paymentMethod})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Payment Status"}),e.jsx("span",{className:`status-badge ${v.paymentStatus.toLowerCase()}`,children:v.paymentStatus})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Current Status"}),e.jsx("span",{className:`status-badge ${v.status.toLowerCase()}`,children:v.status})]})]}),e.jsxs("div",{className:"order-items",children:[e.jsx("h4",{children:"Order Items"}),e.jsx("ul",{children:v.items.map((k,se)=>e.jsxs("li",{children:[k.quantity," x ",k.product.title," (",k.product.category,")"]},se))})]})]})})]}),Le&&B&&e.jsx("div",{className:"modal-overlay",onClick:()=>ce(!1),children:e.jsxs("div",{className:"user-dashboard-modal",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[B.name," - Dashboard"]}),e.jsx("button",{className:"close-btn",onClick:()=>ce(!1),children:"×"})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"dashboard-overview",children:[e.jsx("div",{className:"user-profile-section",children:e.jsxs("div",{className:"user-basic-info",children:[e.jsx("h4",{children:B.name}),e.jsx("p",{children:B.email}),e.jsx("span",{className:`status-badge ${B.status.toLowerCase()}`,children:B.status})]})}),B.userType==="customer"?e.jsxs("div",{className:"customer-dashboard",children:[e.jsxs("div",{className:"dashboard-stats-grid",children:[e.jsxs("div",{className:"dashboard-stat",children:[e.jsx("div",{className:"stat-icon",children:"📦"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h5",{children:"Total Orders"}),e.jsx("span",{children:B.totalOrders})]})]}),e.jsxs("div",{className:"dashboard-stat",children:[e.jsx("div",{className:"stat-icon",children:"₹"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h5",{children:"Total Spent"}),e.jsxs("span",{children:["₹",B.totalSpent]})]})]}),e.jsxs("div",{className:"dashboard-stat",children:[e.jsx("div",{className:"stat-icon",children:"🎯"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h5",{children:"Loyalty Points"}),e.jsx("span",{children:B.loyaltyPoints})]})]})]}),e.jsxs("div",{className:"customer-orders",children:[e.jsx("h5",{children:"Recent Orders"}),e.jsx("div",{className:"orders-list",children:R.filter(k=>k.customerId===B.id).slice(0,5).map(k=>e.jsxs("div",{className:"order-item",children:[e.jsxs("div",{className:"order-info",children:[e.jsx("span",{className:"order-id",children:k.id}),e.jsx("span",{className:"order-date",children:k.orderDate})]}),e.jsxs("div",{className:"order-details",children:[e.jsxs("span",{className:"order-amount",children:["₹",k.totalAmount]}),e.jsx("span",{className:`status-badge ${k.status.toLowerCase().replace(" ","-")}`,children:k.status})]})]},k.id))})]}),e.jsxs("div",{className:"customer-preferences",children:[e.jsx("h5",{children:"Preferences"}),e.jsx("div",{className:"preferences-list",children:B.preferences.map((k,se)=>e.jsx("span",{className:"preference-tag",children:k},se))})]})]}):e.jsxs("div",{className:"laundryman-dashboard",children:[e.jsxs("div",{className:"laundryman-info-card",children:[e.jsx("h4",{children:"Dhobi Details"}),e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"Name:"})," ",B.name]}),e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"Email:"})," ",B.email]}),e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"Contact:"})," ",B.contact]}),e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"Joined On:"})," ",new Date(B.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"dashboard-stats-grid",children:[e.jsxs("div",{className:"dashboard-stat",children:[e.jsx("div",{className:"stat-icon",children:"✅"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h5",{children:"total Order"}),e.jsx("span",{children:B.totalOrders})]})]}),e.jsxs("div",{className:"dashboard-stat",children:[e.jsx("div",{className:"stat-icon",children:"₹"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h5",{children:"Earnings"}),e.jsxs("span",{children:["₹",B.earnings]})]})]}),e.jsxs("div",{className:"dashboard-stat",children:[e.jsx("div",{className:"stat-icon",children:"📋"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h5",{children:"Complete order"}),e.jsx("span",{children:B.completedOrders})]})]})]}),e.jsxs("div",{className:"laundryman-orders",children:[e.jsx("h5",{children:"Assigned Orders"}),e.jsx("div",{className:"orders-list",children:R.filter(k=>k.laundrymanId===B.id).slice(0,5).map(k=>e.jsxs("div",{className:"order-item",children:[e.jsxs("div",{className:"order-info",children:[e.jsx("span",{className:"order-id",children:k.id}),e.jsx("span",{className:"customer-name",children:k.customerName})]}),e.jsxs("div",{className:"order-details",children:[e.jsxs("span",{className:"order-amount",children:["₹",k.totalAmount]}),e.jsx("span",{className:`status-badge ${k.status.toLowerCase().replace(" ","-")}`,children:k.status})]})]},k.id))})]})]})]})})]})}),X&&e.jsx("div",{className:"modal-overlay",onClick:()=>st(!1),children:e.jsxs("div",{className:"timeslot-modal",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Add New Time Slot"}),e.jsx("button",{className:"close-btn",onClick:()=>st(!1),children:"×"})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("form",{onSubmit:k=>{k.preventDefault();const se=new FormData(k.target),Ze={label:se.get("label"),range:se.get("range")};nt(Ze),st(!1)},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Label"}),e.jsx("input",{name:"label",type:"text",required:!0,placeholder:"e.g., Morning"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Time Range"}),e.jsx("input",{name:"range",type:"text",required:!0,placeholder:"e.g., 07:00-09:00",pattern:"[0-9]{2}:[0-9]{2}-[0-9]{2}:[0-9]{2}"})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"save-btn",children:"Add Slot"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>st(!1),children:"Cancel"})]})]})})]})}),ae&&be&&e.jsx("div",{className:"modal-overlay",onClick:()=>fe(!1),children:e.jsxs("div",{className:"timeslot-modal",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Edit Time Slot"}),e.jsx("button",{className:"close-btn",onClick:()=>fe(!1),children:"×"})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("form",{onSubmit:Gn,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Time Slot"}),e.jsx("input",{name:"slot",type:"text",required:!0,defaultValue:be.slot,placeholder:"e.g., 09:00-12:00",pattern:"[0-9]{2}:[0-9]{2}-[0-9]{2}:[0-9]{2}"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Maximum Orders"}),e.jsx("input",{name:"maxOrders",type:"number",required:!0,min:"1",max:"50",defaultValue:be.maxOrders,placeholder:"Enter maximum orders for this slot"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Orders"}),e.jsx("input",{type:"number",value:be.currentOrders,disabled:!0,className:"disabled-input"}),e.jsx("small",{className:"form-help",children:"Current orders cannot be modified directly"})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"save-btn",children:"Save Changes"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>fe(!1),children:"Cancel"})]})]})})]})}),S&&x&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"user-modal",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[x.userType==="customer"?"Customer":"Laundryman"," Details"]}),e.jsx("button",{className:"close-btn",onClick:()=>y(!1),children:"×"})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"user-details",children:[e.jsx("img",{src:x.image||"/placeholder.svg",alt:x.name,className:"user-detail-image"}),e.jsxs("div",{className:"user-info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Name"}),e.jsx("span",{children:x.name})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email"}),e.jsx("span",{children:x.email})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Phone"}),e.jsx("span",{children:x.phone})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Address"}),e.jsx("span",{children:x.address})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Join Date"}),e.jsx("span",{children:x.joinDate})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Status"}),e.jsx("span",{className:`status-badge ${x.status.toLowerCase()}`,children:x.status})]}),x.userType==="customer"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Total Orders"}),e.jsx("span",{children:x.totalOrders})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Total Spent"}),e.jsxs("span",{children:["₹",x.totalSpent]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Preferences"}),e.jsx("div",{className:"preferences-list",children:x.preferences.map((k,se)=>e.jsx("span",{className:"preference-tag",children:k},se))})]})]}),x.userType==="laundryman"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Rating"}),e.jsxs("span",{children:[" ",x.rating]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Completed Orders"}),e.jsx("span",{children:x.completedOrders})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Current Orders"}),e.jsxs("span",{children:[x.currentOrders,"/",x.maxOrders]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Earnings"}),e.jsxs("span",{children:["₹",x.earnings]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Availability"}),e.jsx("span",{className:`availability-badge ${x.availability.toLowerCase()}`,children:x.availability})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Working Hours"}),e.jsx("div",{className:"hours-list",children:x.workingHours.map((k,se)=>e.jsx("span",{className:"hour-tag",children:k},se))})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Specialties"}),e.jsx("div",{className:"specialties-list",children:x.specialties.map((k,se)=>e.jsx("span",{className:"specialty-tag",children:k},se))})]})]})]})]})})]})}),j&&v&&e.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:e.jsxs("div",{className:"order-modal",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Order Details - ",v.id]}),e.jsx("button",{className:"close-btn",onClick:()=>N(!1),children:"×"})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"order-details",children:[e.jsxs("div",{className:"order-info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Customer"}),e.jsx("span",{children:v.customerName})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Dhobi"}),e.jsx("span",{children:v.laundrymanName})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Order Date"}),e.jsx("span",{children:v.orderDate})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Pickup Date"}),e.jsx("span",{children:v.pickupDate||"Not Set"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Time Slot"}),e.jsx("span",{children:v.timeSlotLabel?`${v.timeSlotLabel} (${v.timeSlot})`:v.timeSlot||"Not Set"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Priority"}),e.jsx("span",{className:`priority-badge ${v.priority.toLowerCase()}`,children:v.priority})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Total Amount"}),e.jsxs("span",{children:["₹",v.totalAmount]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Payment Method"}),e.jsx("span",{children:v.paymentMethod})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Payment Status"}),e.jsx("span",{className:`status-badge ${v.paymentStatus.toLowerCase()}`,children:v.paymentStatus})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Order Status"}),e.jsx("span",{className:`status-badge ${v.status.toLowerCase().replace(" ","-")}`,children:v.status})]})]}),e.jsxs("div",{className:"order-items",children:[e.jsx("h4",{children:"Items"}),e.jsx("ul",{children:v.items.map((k,se)=>e.jsx("li",{children:k},se))})]})]})})]})}),g&&e.jsx("div",{className:"logout-popup-overlay",children:e.jsxs("div",{className:"logout-popup-content",children:[e.jsx("h3",{children:"Confirm Logout"}),e.jsx("p",{children:"Are you sure you want to logout?"}),e.jsxs("div",{className:"logout-popup-buttons",children:[e.jsx("button",{className:"confirm-btn",onClick:Rs,children:"Yes, Logout"}),e.jsx("button",{className:"cancel-btn",onClick:At,children:"Cancel"})]})]})})]})},gx=[{id:"wash",name:"Wash",icon:"🧼"},{id:"dry-clean",name:"Dry-Clean",icon:"🧴"},{id:"iron",name:"Iron",icon:"🔥"}],xx=({onSubmit:s,onBack:i})=>{const[a,o]=p.useState({title:"",name:"",category:"",description:"",options:[]}),[c,u]=p.useState(null),[h,f]=p.useState(null),[g,b]=p.useState(!1),x=j=>{var v;const N=(v=j.target.files)==null?void 0:v[0];N&&(u(N),f(URL.createObjectURL(N)))},_=(j,N)=>{const v=a.options.find(E=>E.id===j);let P=[];v?P=a.options.filter(E=>E.id!==j):P=[...a.options,{id:j,name:N,price:""}],o(E=>({...E,options:P}))},S=(j,N)=>{const v=a.options.map(P=>P.id===j?{...P,price:N}:P);o(P=>({...P,options:v}))},y=async j=>{if(j.preventDefault(),!a.title.trim()||!a.name.trim()||!a.category.trim()||!a.description.trim()||a.options.length===0||a.options.some(v=>!v.price||isNaN(Number(v.price)))||!c){alert("Please fill all fields, set valid prices, and upload a photo.");return}try{b(!0);const v=localStorage.getItem("token");if(!v)throw new Error("User not logged in.");const P=a.options.map(A=>({id:A.id,name:A.name,price:Number(A.price)})),E=new FormData;E.append("title",a.title),E.append("name",a.name),E.append("category",a.category),E.append("description",a.description),E.append("options",JSON.stringify(P)),E.append("image",c);const z=await lt("/api/product/create",{method:"POST",headers:{Authorization:`Bearer ${v}`},body:E});if(!z.ok){const A=await z.json().catch(()=>({}));throw new Error(A.message||"Failed to create service.")}const F=await z.json();alert("Service created successfully!"),o({title:"",name:"",category:"",description:"",options:[]}),u(null),f(null),s(F)}catch(v){alert(v.message||"Something went wrong.")}finally{b(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-6 rounded-lg shadow",children:[e.jsxs("button",{onClick:i,className:"mb-4 text-sm text-blue-600 flex items-center",children:[e.jsx(al,{className:"w-4 h-4 mr-1"})," Back"]}),e.jsxs("h2",{className:"text-xl font-bold text-blue-600 mb-1 flex items-center gap-2",children:[e.jsx(Ms,{})," Add New Service"]}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Fill in the details to add a new washing service"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Service Title *"}),e.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:a.title,onChange:j=>o({...a,title:j.target.value}),placeholder:"e.g., Premium Shirt Washing Service"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Service Name *"}),e.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:a.name,onChange:j=>o({...a,name:j.target.value}),placeholder:"e.g., Express Wash & Fold"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Category *"}),e.jsxs("select",{className:"w-full border px-3 py-2 rounded",value:a.category,onChange:j=>o({...a,category:j.target.value}),children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Shirt",children:"Shirt"}),e.jsx("option",{value:"Pant",children:"Pant"}),e.jsx("option",{value:"Bedsheet",children:"Bedsheet"}),e.jsx("option",{value:"Curtain",children:"Curtain"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Service Options *"}),e.jsx("div",{className:"space-y-2",children:gx.map(({id:j,name:N,icon:v})=>{const P=a.options.find(E=>E.id===j);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!P,onChange:()=>_(j,N)}),e.jsx("span",{children:v}),e.jsx("span",{className:"capitalize",children:N}),P&&e.jsx("input",{type:"number",min:"0",value:P.price,onChange:E=>S(j,E.target.value),placeholder:"₹ Price",className:"ml-2 border px-2 py-1 w-24 rounded"})]},j)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Service Photo *"}),e.jsx("div",{className:"border border-dashed p-4 rounded text-center cursor-pointer",children:e.jsxs("label",{className:"cursor-pointer",children:[h?e.jsx("img",{src:h,alt:"Preview",className:"h-32 mx-auto object-cover"}):e.jsxs("div",{children:[e.jsx(iu,{className:"mx-auto mb-2"}),e.jsx("span",{children:"Click to upload a photo"}),e.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG up to 10MB"})]}),e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:x})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Service Description *"}),e.jsx("textarea",{className:"w-full border px-3 py-2 rounded",rows:3,placeholder:"Describe your service in detail...",value:a.description,onChange:j=>o({...a,description:j.target.value})})]}),e.jsx("button",{type:"submit",disabled:g,className:"bg-gradient-to-r from-blue-500 to-teal-400 text-white py-2 px-6 rounded w-full font-semibold",children:g?"Adding Service...":"+ Add Service"})]})]})},el=[{value:"Shirt",label:"Shirt",icon:"👔"},{value:"Pant",label:"Pant",icon:"👖"},{value:"Bedsheet",label:"Bedsheet",icon:"🛏️"},{value:"Curtain",label:"Curtain",icon:"🪟"}],vx=[{value:"wash",label:"Wash",icon:"🧼"},{value:"dry-clean",label:"Dry Clean",icon:"🧽"},{value:"iron",label:"Iron",icon:"🔥"}];function yx({services:s,onEdit:i,onDelete:a,onAddNew:o}){const[c,u]=p.useState(s),[h,f]=p.useState(""),[g,b]=p.useState(null),[x,_]=p.useState({}),[S,y]=p.useState(null),[j,N]=p.useState(null),v=c.filter(I=>(I.title+I.name+I.description+I.category).toLowerCase().includes(h.toLowerCase()));p.useEffect(()=>{(async()=>{const $=localStorage.getItem("token"),J=localStorage.getItem("role")==="washerman"?"/api/product/my-products":"/api/product/all";try{const U=await lt(J,{headers:{Authorization:`Bearer ${$}`}}),te=await U.json();U.ok?u(te):console.error("Error:",te.message)}catch(U){console.error("Fetch error:",U)}})()},[]);const P=I=>{b(I._id),_({...I}),N(null)},E=async()=>{try{if(!g)throw new Error("No service selected for editing");const $=["title","name","category","options","description"].filter(te=>!x[te]);if($.length>0)throw new Error(`Missing required fields: ${$.join(", ")}`);if(!x.options||x.options.length===0)throw new Error("At least one service option is required");const W=localStorage.getItem("token");if(!W)throw new Error("Authentication token not found");const J=await lt(`/api/product/${g}`,{method:"PUT",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"},body:JSON.stringify(x)});if(!J.ok){const te=await J.json();throw new Error(te.message||"Failed to update service")}const U=await J.json();i(g,U),b(null),_({}),N(null)}catch(I){console.error("Update error:",I),N(I instanceof Error?I.message:"Failed to update service")}},z=()=>{b(null),_({}),N(null)},F=async I=>{try{const $=prompt("Please confirm your password to delete the service");if(!$)return;const W=localStorage.getItem("token");if(!W)throw new Error("Authentication token not found");const J=await lt(`/api/product/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"},body:JSON.stringify({password:$})});if(!J.ok){const U=await J.json();throw new Error(U.message||"Failed to delete service")}y(null),a(I),N(null)}catch($){console.error("Delete error:",$),N($ instanceof Error?$.message:"Failed to delete service"),y(null)}},A=I=>{const $=el.find(W=>W.value===I);return $?`${$.icon} ${$.label}`:I},H=I=>{if(!I||typeof I!="string")return"Unknown";const $=vx.find(W=>W.value.toLowerCase()===I.toLowerCase()||W.label.toLowerCase()===I.toLowerCase());return $?`${$.icon} ${$.label}`:I},K=I=>I?I.startsWith("http")?I:`http://localhost:5000/${I}`:"";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dhobi Services"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your services"})]}),e.jsxs("button",{onClick:o,className:"bg-gradient-to-r from-blue-600 to-teal-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-teal-700 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Add New Service"]})]}),j&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:j}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search services...",value:h,onChange:I=>f(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(I=>{var $,W,J;return e.jsx("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-lg transition-all",children:g===I._id?e.jsxs("div",{className:"p-6 space-y-4",children:[x.image&&e.jsx("img",{src:K(x.image),alt:"Preview",className:"w-full h-48 object-cover rounded-lg mb-2"}),e.jsx("input",{type:"text",value:x.title||"",onChange:U=>_(te=>({...te,title:U.target.value})),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Title"}),e.jsx("input",{type:"text",value:x.name||"",onChange:U=>_(te=>({...te,name:U.target.value})),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Name"}),e.jsxs("select",{value:x.category||"",onChange:U=>_(te=>({...te,category:U.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select Category"}),el.map(U=>e.jsxs("option",{value:U.value,children:[U.icon," ",U.label]},U.value))]}),($=x.options)==null?void 0:$.map((U,te)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsx("input",{type:"text",value:H(U.name),disabled:!0,className:"border px-3 py-2 rounded bg-gray-100 text-gray-700 font-medium"}),e.jsx("input",{type:"number",value:U.price!==void 0&&!isNaN(U.price)?U.price:"",onChange:oe=>{const le=[...x.options||[]],ee=parseFloat(oe.target.value);le[te].price=isNaN(ee)?0:ee,_(he=>({...he,options:le}))},className:"border px-3 py-2 rounded",placeholder:"Enter price"})]},te)),e.jsx("textarea",{value:x.description||"",onChange:U=>_(te=>({...te,description:U.target.value})),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Description"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:E,className:"flex-1 bg-green-600 text-white py-2 rounded",children:[e.jsx(mi,{className:"w-4 h-4 inline mr-1"})," Save"]}),e.jsxs("button",{onClick:z,className:"flex-1 bg-gray-600 text-white py-2 rounded",children:[e.jsx(es,{className:"w-4 h-4 inline mr-1"})," Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[I.image&&e.jsx("img",{src:K(I.image),alt:I.title,className:"h-48 w-full object-cover rounded-t-2xl"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:I.title}),e.jsxs("span",{className:"bg-green-100 text-green-800 text-sm px-2 py-1 rounded-full",children:["₹",((W=I.options)==null?void 0:W.reduce((U,te)=>U+(te.price||0),0))||0]})]}),e.jsx("p",{className:"font-medium",children:I.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 my-2",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:A(I.category)}),(J=I.options)==null?void 0:J.map((U,te)=>e.jsxs("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:[H(U.name)," - ₹",U.price]},te))]}),e.jsx("p",{className:"text-sm text-gray-600",children:I.description}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>P(I),className:"flex-1 bg-blue-600 text-white py-2 rounded",children:[e.jsx(hu,{className:"w-4 h-4 inline mr-1"})," Edit"]}),e.jsxs("button",{onClick:()=>y(I._id),className:"flex-1 bg-red-600 text-white py-2 rounded",children:[e.jsx(ml,{className:"w-4 h-4 inline mr-1"})," Delete"]})]})]})]})},I._id)})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Delete Service"}),e.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this service?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 bg-gray-600 text-white py-2 rounded",children:"Cancel"}),e.jsx("button",{onClick:()=>F(S),className:"flex-1 bg-red-600 text-white py-2 rounded",children:"Delete"})]})]})})]})})}const bx=s=>{const i=[],a=new Date;for(let o=0;o<s;o++){const c=new Date(a);c.setDate(c.getDate()+o),i.push(c.toISOString().split("T")[0])}return i},wx=()=>{const[s,i]=p.useState(!1),[a,o]=p.useState([]),[c,u]=p.useState([]),[h,f]=p.useState([]),g=bx(10),b=y=>{o(j=>[...j,y])},x=y=>{u(j=>j.includes(y)?j.filter(N=>N!==y):[...j,y])},_=async()=>{if(c.length===0||a.length===0){alert("Please select dates and add at least one slot.");return}try{const y=localStorage.getItem("token");await je.post("/api/slots",{dates:c,slots:a},{headers:{Authorization:`Bearer ${y}`}}),alert("Slot templates saved successfully."),o([]),u([]),S()}catch(y){console.error(y),alert("Failed to save slot templates.")}},S=async()=>{try{const y=localStorage.getItem("token"),j=await je.get("/api/slot-templates",{headers:{Authorization:`Bearer ${y}`}});f(j.data)}catch(y){console.error("Failed to fetch slot templates:",y)}};return p.useEffect(()=>{S()},[]),e.jsxs("div",{className:"p-6 max-w-5xl mx-auto bg-white shadow-xl rounded-2xl mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Slot Template Manager"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Select Dates"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:g.map(y=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.includes(y),onChange:()=>x(y),className:"accent-blue-500"}),e.jsx("span",{className:"text-sm",children:y})]},y))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Defined Slots"}),a.length>0?e.jsx("ul",{className:"list-disc list-inside text-gray-700 mb-4",children:a.map((y,j)=>e.jsxs("li",{children:[e.jsx("strong",{children:y.label})," - ",y.range]},j))}):e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No slots added yet."}),e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"+ Add Time Slot"})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{onClick:_,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Save Slot Templates"})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>i(!1),children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-lg",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Add New Time Slot"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-800",children:"×"})]}),e.jsxs("form",{onSubmit:y=>{y.preventDefault();const j=new FormData(y.target),N={label:j.get("label"),range:j.get("range")};b(N),i(!1)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Label"}),e.jsx("input",{name:"label",type:"text",required:!0,placeholder:"e.g., Morning",className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Time Range"}),e.jsx("input",{name:"range",type:"text",required:!0,placeholder:"e.g., 07:00-09:00",pattern:"[0-9]{2}:[0-9]{2}-[0-9]{2}:[0-9]{2}",className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Slot"})]})]})]})}),h.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:"All Slot Templates"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:h.map((y,j)=>{var N;return e.jsxs("div",{className:"p-4 border rounded-lg shadow-sm bg-gray-50",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-700 mb-2",children:["📅 Date: ",y.date]}),(N=y.slots)==null?void 0:N.map((v,P)=>e.jsxs("p",{className:"text-sm text-gray-700",children:["• ",v.label,": ",v.range]},P))]},j)})})]})]})},jx=()=>{const[s,i]=p.useState([]),[a,o]=p.useState({}),[c,u]=p.useState({}),[h,f]=p.useState(!0),[g,b]=p.useState(null),[x,_]=p.useState({}),[S,y]=p.useState({});p.useEffect(()=>{(async()=>{try{f(!0),b(null);const H=localStorage.getItem("token"),K=await je.get("/api/show/slot-templates",{headers:{Authorization:`Bearer ${H}`}});i(K.data);const I=JSON.parse(localStorage.getItem("washermanEnabledSlots")||"{}");o(I)}catch{b("Failed to load slot templates. Please try again.")}finally{f(!1)}})()},[]);const j=(A,H)=>{const K=new Set(a[A]||[]);K.has(H.range)?K.delete(H.range):K.add(H.range);const I=[...K];o({...a,[A]:I}),localStorage.setItem("washermanEnabledSlots",JSON.stringify({...a,[A]:I})),y($=>({...$,[A]:!1}))},N=(A,H,K)=>{u(I=>({...I,[A]:{...I[A],[H]:parseInt(K)}}))},v=async A=>{var K;_(I=>({...I,[A]:!0}));const H=localStorage.getItem("token");try{const I={date:A,enabledSlots:(((K=s.find($=>$.date===A))==null?void 0:K.slots)||[]).filter($=>{var W;return(W=a[A])==null?void 0:W.includes($.range)}).map($=>{var W;return{label:$.label,range:$.range,maxBookings:((W=c[A])==null?void 0:W[$.range])||1}})};await je.post("/api/show/slots/washer",I,{headers:{Authorization:`Bearer ${H}`}}),y($=>({...$,[A]:!0})),setTimeout(()=>y($=>({...$,[A]:!1})),3e3)}catch{b("Failed to save slots. Please try again.")}finally{_(I=>({...I,[A]:!1}))}},P=A=>new Date(A).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),E=A=>{const H=a[A]||[];return new Set(H).size},z=A=>{var I;const H=((I=s.find($=>$.date===A))==null?void 0:I.slots)||[];return new Set(H.map($=>$.range)).size},F=()=>window.location.reload();return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsx(Os,{className:"w-12 h-12 text-blue-600 animate-spin"})}):g?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lr,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsx("p",{className:"text-red-600 mt-2",children:g}),e.jsxs("button",{onClick:F,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(hl,{className:"inline-block w-4 h-4 mr-1"}),"Try Again"]})]})}):e.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:s.map(A=>{const H=A.date,K=z(H),I=E(H),$=x[H],W=S[H];return e.jsxs("div",{className:"bg-white shadow rounded-lg mb-6 border",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-2 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-blue-800",children:P(H)}),e.jsx("p",{className:"text-sm text-gray-600",children:H})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[I,"/",K," Active Slots"]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded mt-1",children:e.jsx("div",{className:"h-2 bg-green-500 rounded",style:{width:`${I/K*100}%`}})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4",children:A.slots.map(J=>{var te,oe;const U=(te=a[H])==null?void 0:te.includes(J.range);return e.jsx("div",{className:`p-4 rounded border ${U?"bg-green-50 border-green-300":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:J.label}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-1",children:[e.jsx(Rn,{className:"w-4 h-4"}),e.jsx("span",{children:J.range})]}),U&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Max Bookings"}),e.jsx("input",{type:"number",min:"1",value:((oe=c[H])==null?void 0:oe[J.range])||"",onChange:le=>N(H,J.range,le.target.value),className:"mt-1 w-20 px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer mt-1",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:()=>j(H,J),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-6 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500 relative"})]})]})},J.range+J.label)})}),e.jsx("button",{onClick:()=>v(H),disabled:$,className:`w-full mt-4 py-2 rounded-lg font-semibold transition ${$?"bg-gray-400 text-white":W?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:$?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(Os,{className:"w-5 h-5 animate-spin mr-2"})," Saving..."]}):W?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(On,{className:"w-5 h-5 mr-2"})," Saved!"]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(mi,{className:"w-5 h-5 mr-2"}),"Save for ",new Date(H).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})]},H)})})},_x=()=>{const{token:s}=Hd(),i=ws(),[a,o]=p.useState(""),[c,u]=p.useState(""),h=async f=>{if(f.preventDefault(),!a||!c)return qe.fire("Error","Please fill all fields","error");if(a!==c)return qe.fire("Error","Passwords do not match","error");try{const g=await lt(`/api/auth/reset-password/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:a})}),b=await g.json();g.ok?(qe.fire("Success",b.message||"Password reset successful!","success"),i("/signin")):qe.fire("Failed",b.message||"Token invalid or expired","error")}catch{qe.fire("Error","Something went wrong","error")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:e.jsxs("form",{onSubmit:h,className:"bg-white p-6 rounded-lg shadow-md w-full max-w-md space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Reset Your Password"}),e.jsx("input",{type:"password",placeholder:"New Password",className:"w-full border px-3 py-2 rounded",autoComplete:"new-password",value:a,onChange:f=>o(f.target.value)}),e.jsx("input",{type:"password",placeholder:"Confirm New Password",className:"w-full border px-3 py-2 rounded",autoComplete:"new-password",value:c,onChange:f=>u(f.target.value)}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Reset Password"})]})})},Nx=()=>e.jsxs("div",{className:"text-gray-600 font-sans",children:[e.jsxs("section",{className:"bg-blue-50 py-5 px-4 text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold",children:["Professional Laundry ",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600",children:"At Your Doorstep"})]}),e.jsx("p",{className:"mt-1 text-md max-w-2xl mx-auto",children:"Experience hassle-free laundry service with pickup and delivery. Quality cleaning, affordable prices, and reliable service guaranteed."})]}),e.jsxs("section",{className:"bg-blue-50 py-5 px-4 grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-blue-600 text-4xl",children:"✔️"}),e.jsx("h3",{className:"text-xl font-semibold mt-2",children:"Quality Guaranteed"}),e.jsx("p",{children:"100% satisfaction or money back"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-blue-600 text-4xl",children:"🛡️"}),e.jsx("h3",{className:"text-xl font-semibold mt-2",children:"Safe & Secure"}),e.jsx("p",{children:"Eco-friendly cleaning products"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-blue-600 text-4xl",children:"🚚"}),e.jsx("h3",{className:"text-xl font-semibold mt-2",children:"Free Delivery"}),e.jsx("p",{children:"Convenient doorstep service"})]})]}),e.jsxs("section",{className:"bg-white py-9 px-4 text-center",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8",children:"Our Services"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 max-w-6xl mx-auto",children:[{title:"Ironing Service",desc:"Professional ironing for wrinkle-free clothes",icon:"🧼"},{title:"Wash",desc:"Deep cleaning with fabric softener",icon:"✨"},{title:"Dry Cleaning",desc:"Professional dry cleaning for delicate items",icon:"🛡️"},{title:"Express Service",desc:"Same day pickup and delivery",icon:"⏱️"}].map(s=>e.jsxs("div",{className:"border rounded-lg p-6 shadow hover:shadow-md transition",children:[e.jsx("div",{className:"text-3xl",children:s.icon}),e.jsx("h4",{className:"text-xl font-semibold mt-2",children:s.title}),e.jsx("p",{className:"text-sm mt-1",children:s.desc})]},s.title))})]}),e.jsxs("section",{className:"bg-gray-50 py-12 px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"How It Works"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 max-w-6xl mx-auto",children:[{title:"1. Schedule Pickup",desc:"Book online or call us to schedule a convenient pickup time",icon:"📅"},{title:"2. We Clean",desc:"Professional cleaning with eco-friendly detergents and care",icon:"🧽"},{title:"3. We Iron",desc:"Expert ironing service for perfectly pressed clothes",icon:"🧺"},{title:"4. Free Delivery",desc:"Clean, fresh clothes delivered back to your doorstep",icon:"🚛"}].map(s=>e.jsxs("div",{className:"rounded-lg border p-6 bg-white shadow hover:shadow-md transition",children:[e.jsx("div",{className:"text-3xl mb-2",children:s.icon}),e.jsx("h4",{className:"text-lg font-semibold",children:s.title}),e.jsx("p",{className:"text-sm mt-1",children:s.desc})]},s.title))})]})]});delete zs.Icon.Default.prototype._getIconUrl;zs.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Sx=({onServicesFound:s,onNoServices:i,onLocationSet:a,startInMap:o=!1})=>{const[c,u]=p.useState(null),[h,f]=p.useState(!1),[g,b]=p.useState(!1),[x,_]=p.useState(null),[S,y]=p.useState(""),[j,N]=p.useState(""),[v,P]=p.useState(!1),[E,z]=p.useState(o),[F,A]=p.useState({lat:20.5937,lng:78.9629}),[H,K]=p.useState(null),[I,$]=p.useState(!1),[W,J]=p.useState({}),[U,te]=p.useState({}),oe=B=>{if(!B)return{};const Y=[B.road,B.suburb,B.neighbourhood].filter(Boolean);return{houseNumber:B.house_number||"",street:Y.join(", "),landmark:B.landmark||B.public_building||"",city:B.city||B.town||B.village||B.county||"",state:B.state||"",zip:B.postcode||""}},le=()=>{var Y,me,Oe,de,we,mt;const B={};return(Y=W.houseNumber)!=null&&Y.trim()||(B.houseNumber="House/Flat/Block No. is required"),(me=W.street)!=null&&me.trim()||(B.street="Street/Area is required"),(Oe=W.city)!=null&&Oe.trim()||(B.city="City is required"),(de=W.state)!=null&&de.trim()||(B.state="State is required"),(!((we=W.zip)!=null&&we.trim())||((mt=W.zip)==null?void 0:mt.length)!==6)&&(B.zip="Valid 6-digit pincode is required"),te(B),Object.keys(B).length===0};p.useEffect(()=>{const B=localStorage.getItem("customerLocation");if(B)try{const Y=JSON.parse(B);u(Y),A({lat:Y.lat,lng:Y.lng})}catch(Y){console.error("Error parsing saved location:",Y)}},[]);const ee=()=>{u(null),K(null),$(!1),J({}),te({}),localStorage.removeItem("customerLocation")},he=async B=>{console.log("🗺️ Map clicked!",B.latlng);const{lat:Y,lng:me}=B.latlng;try{const de=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Y}&lon=${me}&zoom=18&addressdetails=1`)).json(),we={lat:Y,lng:me,address:de.display_name||`${Y.toFixed(4)}, ${me.toFixed(4)}`};console.log("📍 Location selected:",we),K(we),J(oe(de.address)),y("")}catch(Oe){console.error("Error getting address:",Oe);const de={lat:Y,lng:me,address:`${Y.toFixed(4)}, ${me.toFixed(4)}`};K(de),J({}),y("Location selected, but could not get address details")}},X=()=>{H&&(u(H),a(H),$(!0))},st=()=>(nx({click:he}),null),ae=async B=>{var me;b(!0),y("");const Y=localStorage.getItem("token");if(!Y){y("Please log in to check service availability"),b(!1);return}try{const de=(await tt.post("/api/check-availability",{lat:B.lat,lng:B.lng,address:B.address},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`}})).data;if(!de){console.error("❌ No response data received"),y("No response from server"),i();return}if(!de.availability){console.error("❌ Invalid response structure - missing availability:",de),y("Invalid response from server"),i();return}_(de),de.availability.servicesAvailable?s(de.services||[]):i()}catch(Oe){console.error("Error checking service availability:",Oe);let de="Failed to check service availability";Oe.response?de=((me=Oe.response.data)==null?void 0:me.message)||`Server error: ${Oe.response.status}`:Oe.request?de="No response from server. Please check your connection.":de=Oe.message||"Unknown error occurred",y(de),i()}finally{b(!1)}},fe=async()=>{if(!j.trim()){y("Please enter an address");return}f(!0),y("");try{const Y=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(j)}&limit=1`)).json();if(Y&&Y.length>0){const me=Y[0],Oe={lat:parseFloat(me.lat),lng:parseFloat(me.lon),address:me.display_name};u(Oe),A({lat:Oe.lat,lng:Oe.lng}),a(Oe),$(!0),J(oe(me.address))}else y("Address not found. Please try a different address.")}catch(B){console.error("Error geocoding address:",B),y("Failed to process address. Please try again.")}finally{f(!1)}},be=()=>{if(!navigator.geolocation){y("Geolocation is not supported by this browser");return}f(!0),y(""),navigator.geolocation.getCurrentPosition(async B=>{const{latitude:Y,longitude:me}=B.coords;try{const de=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Y}&lon=${me}&zoom=18&addressdetails=1`)).json(),we={lat:Y,lng:me,address:de.display_name||`Current Location: ${Y.toFixed(4)}, ${me.toFixed(4)}`};u(we),A({lat:Y,lng:me}),a(we),$(!0),J(oe(de.address))}catch(Oe){console.error("Error getting address:",Oe);const de={lat:Y,lng:me,address:`Current Location: ${Y.toFixed(4)}, ${me.toFixed(4)}`};u(de),A({lat:Y,lng:me}),a(de),$(!0)}},B=>{console.error("Geolocation error:",B);let Y="Failed to get your location";switch(B.code){case B.PERMISSION_DENIED:Y="Location access denied. Please allow location access in your browser settings.";break;case B.POSITION_UNAVAILABLE:Y="Location information unavailable. Please check your GPS settings.";break;case B.TIMEOUT:Y="Location request timed out. Please try again.";break;default:Y="Unable to get your location. Please try again."}y(Y)},{enableHighAccuracy:!0,timeout:2e4,maximumAge:0})},Pe=async B=>{try{const Y=localStorage.getItem("token");if(!Y){console.warn("No token found, skipping backend save");return}await tt.post("/api/user/location",{lat:c==null?void 0:c.lat,lng:c==null?void 0:c.lng,address:c==null?void 0:c.address,deliveryAddress:B},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`}}),console.log("✅ Location saved to backend")}catch(Y){console.error("❌ Error saving to backend:",Y)}},Le=async()=>{if(le()){if(!c){y("No location selected");return}try{const B={houseNo:W.houseNumber,street:W.street,landmark:W.landmark,city:W.city,state:W.state,pincode:W.zip,fullAddress:`${W.houseNumber}, ${W.street}, ${W.landmark}, ${W.city}, ${W.state} - ${W.zip}`,coordinates:{lat:c.lat,lng:c.lng}};localStorage.setItem("deliveryAddress",JSON.stringify(B)),await Pe(B),await ae(c),$(!1),z(!1)}catch(B){console.error("Error saving address:",B),y("Failed to save address. Please try again.")}}},ce=()=>{c&&(ae(c),$(!1),z(!1))};return I?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Delivery Address"}),e.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Complete address is required for delivery"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"House/Flat/Block No. *"}),e.jsx("input",{type:"text",value:W.houseNumber||"",onChange:B=>J(Y=>({...Y,houseNumber:B.target.value})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${U.houseNumber?"border-red-500":"border-gray-300"}`,placeholder:"Enter house/flat number *"}),U.houseNumber&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.houseNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street / Area *"}),e.jsx("input",{type:"text",value:W.street||"",onChange:B=>J(Y=>({...Y,street:B.target.value})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${U.street?"border-red-500":"border-gray-300"}`,placeholder:"Enter street/area *"}),U.street&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.street})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Landmark (optional)"}),e.jsx("input",{type:"text",value:W.landmark||"",onChange:B=>J(Y=>({...Y,landmark:B.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Near hospital, school, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),e.jsx("input",{type:"text",value:W.city||"",onChange:B=>J(Y=>({...Y,city:B.target.value})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${U.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city *"}),U.city&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("input",{type:"text",value:W.state||"",onChange:B=>J(Y=>({...Y,state:B.target.value})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${U.state?"border-red-500":"border-gray-300"}`,placeholder:"Enter state *"}),U.state&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),e.jsx("input",{type:"text",value:W.zip||"",onChange:B=>J(Y=>({...Y,zip:B.target.value})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${U.zip?"border-red-500":"border-gray-300"}`,placeholder:"Enter 6-digit pincode *",maxLength:6}),U.zip&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.zip})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:Le,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Save and Continue"}),e.jsx("button",{onClick:ce,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Skip"})]})]}):E?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Location on Map"}),e.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"📍 Current Location"}),c?e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-700",children:c.address}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Coordinates: ",c.lat.toFixed(6),", ",c.lng.toFixed(6)]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No location set"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:be,disabled:h,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx($i,{className:"w-4 h-4 animate-spin"}),"Detecting Location..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_o,{className:"w-4 h-4"}),"Use Current Location"]})}),e.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-center gap-2 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",children:[e.jsx(ci,{className:"w-4 h-4"}),"Enter Address Manually"]})]}),H&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"📍 Selected Map Location"}),e.jsx("p",{className:"text-sm text-blue-800",children:H.address}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Coordinates: ",H.lat.toFixed(6),", ",H.lng.toFixed(6)]}),e.jsx("button",{onClick:X,className:"mt-2 w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Confirm This Location"})]})]}),e.jsx("div",{className:"h-96 rounded-lg overflow-hidden border border-gray-200",children:e.jsxs(Or,{center:[F.lat,F.lng],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(Mr,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.jsx(st,{}),c&&e.jsx(Bn,{position:[c.lat,c.lng],children:e.jsx(zn,{children:e.jsxs("div",{children:[e.jsx("strong",{children:"Your Location"}),e.jsx("br",{}),c.address]})})}),H&&e.jsx(Bn,{position:[H.lat,H.lng],children:e.jsx(zn,{children:e.jsxs("div",{children:[e.jsx("strong",{children:"Selected Location"}),e.jsx("br",{}),H.address]})})})]})})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Mn,{className:"w-12 h-12 text-blue-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Choose Your Delivery Location"}),e.jsx("p",{className:"text-gray-600",children:"Set your location to find nearby laundry services"})]}),S&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(lr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:S})]})}),c&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(On,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Location Set:"})," ",c.address]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:be,disabled:h,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx($i,{className:"w-4 h-4 animate-spin"}),"Detecting Location..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_o,{className:"w-4 h-4"}),"Use Current Location"]})}),e.jsxs("button",{onClick:()=>z(!0),className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(uu,{className:"w-4 h-4"}),"Pick on Map"]}),e.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-center gap-2 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",children:[e.jsx(ci,{className:"w-4 h-4"}),"Enter Address Manually"]}),c&&e.jsx("button",{onClick:()=>ae(c),disabled:g,className:"w-full flex items-center justify-center gap-2 bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:g?e.jsxs(e.Fragment,{children:[e.jsx($i,{className:"w-4 h-4 animate-spin"}),"Checking Services..."]}):e.jsxs(e.Fragment,{children:[e.jsx(On,{className:"w-4 h-4"}),"Check Service Availability"]})})]}),v&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-md",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Enter Address Manually"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:j,onChange:B=>N(B.target.value),placeholder:"Enter your full address",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:fe,disabled:h,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?"Processing...":"Submit"}),e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:ee,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:"Reset Location"})})]})},tl=s=>{const i=[],a=new Date,o=a.getFullYear(),c=a.getMonth(),u=a.getDate();for(let h=0;h<s;h++){const f=new Date(o,c,u+h),g=f.getFullYear()+"-"+String(f.getMonth()+1).padStart(2,"0")+"-"+String(f.getDate()).padStart(2,"0");i.push(g)}return i},Ua=()=>{const s=new Date;return s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")},kx=({isAdmin:s=!1})=>{const i=p.useRef(""),a=p.useRef(null),o=p.useRef(!1),c=async h=>{if(o.current){console.log("Background slot generation already running, skipping...");return}o.current=!0;try{console.log("🔄 Background: Checking for new dates that need templates...");const f=localStorage.getItem("token");if(!f){console.log("Background: No token found, skipping auto-generation");return}const g=await je.get("/api/slot-templates",{headers:{Authorization:`Bearer ${f}`}}),b=g.data.map(N=>N.date),x=h.filter(N=>!b.includes(N));if(x.length===0){console.log("Background: All new dates already have templates");return}console.log("Background: New dates needing templates:",x);const _=Ua(),S=g.data.filter(N=>N.date>=_).sort((N,v)=>new Date(N.date).getTime()-new Date(v.date).getTime())[0];if(!S){console.log("Background: No recent template found to copy from");return}console.log("Background: Using template from",S.date,"as base for new templates");const j=(await je.post("/api/auto-generate-dates",{templateDate:S.date,numberOfDays:10},{headers:{Authorization:`Bearer ${f}`}})).data.results.filter(N=>N.status==="success").length;console.log(`Background: Auto-generated ${j} new templates`),j>0&&(console.log(`✅ Background: Auto-generated ${j} new templates for upcoming dates`),window.dispatchEvent(new CustomEvent("slotTemplatesGenerated",{detail:{count:j,dates:x}})))}catch(f){console.error("Background: Error auto-generating templates for new dates:",f)}finally{o.current=!1}},u=async()=>{const h=Ua();if(h!==i.current){console.log("Background: Date changed detected:",i.current,"->",h),i.current=h;const f=tl(10);await c(f)}};return p.useEffect(()=>{if(!s)return;console.log("🚀 Background Slot Generator started for admin user"),i.current=Ua();const h=tl(10);c(h),a.current=setInterval(()=>{u()},5*60*1e3);const f=()=>{document.hidden||(console.log("Background: Page became visible, checking for updates..."),u())};document.addEventListener("visibilitychange",f);const g=()=>{console.log("Background: Window focused, checking for updates..."),u()};return window.addEventListener("focus",g),()=>{a.current&&clearInterval(a.current),document.removeEventListener("visibilitychange",f),window.removeEventListener("focus",g),console.log("🛑 Background Slot Generator stopped")}},[s]),null},Cx=[{id:"all",name:"All"},{id:"shirt",name:"Shirt"},{id:"pant",name:"Pant"},{id:"suits",name:"Suits"},{id:"Bedsheet",name:"Bedsheet"}];function sl(){const s=ws(),[i,a]=p.useState("services"),[o,c]=p.useState("all"),[u,h]=p.useState(""),[f,g]=p.useState(new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0]),[b,x]=p.useState(null),[_,S]=p.useState([]),[y,j]=p.useState([]),[N,v]=p.useState(!1),[P,E]=p.useState(null),[z,F]=p.useState(!1),[A,H]=p.useState(null),[K,I]=p.useState(!1),[$,W]=p.useState(""),[J,U]=p.useState(!1),[te,oe]=p.useState(!1),{cartItems:le,addToCart:ee,removeFromCart:he,updateQuantity:X,getTotalItems:st,clearCart:ae}=Em(),[fe,be]=p.useState(""),Pe=async()=>{try{const q=await je.get("/api/product/all");j(q.data||[])}catch(q){console.error("❌ Failed to load fallback services:",q),j([])}};p.useEffect(()=>{b?localStorage.setItem("selectedTimeSlot",JSON.stringify(b)):localStorage.removeItem("selectedTimeSlot")},[b]),p.useEffect(()=>{localStorage.setItem("selectedDate",f)},[f]),p.useEffect(()=>{const q=Ri(f);S(q),x(null)},[f]),p.useEffect(()=>(z?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[z]),p.useEffect(()=>{(async()=>{if(!localStorage.getItem("token"))return;const pe=localStorage.getItem("customerLocation");if(!pe&&!te)F(!0),oe(!0);else if(pe)try{const Ae=JSON.parse(pe);H(Ae),U(!0),Le(Ae.lat,Ae.lng)}catch(Ae){console.error("Error parsing saved location:",Ae),te||(F(!0),oe(!0))}})()},[te]),p.useEffect(()=>{const q=localStorage.getItem("customerLocation");if(q&&!A)try{const re=JSON.parse(q);H(re)}catch(re){console.error("Error parsing saved location:",re)}},[A]);const Le=async(q,re,pe)=>{try{const Ae=pe||localStorage.getItem("token")||"",Ce=Ae?{Authorization:`Bearer ${Ae}`}:void 0,Fe=await je.get("/api/customer/nearby-services",{headers:Ce,params:{lat:q,lng:re}});console.log("🧾 Nearby services response:",Fe.data),Array.isArray(Fe.data)?j(Fe.data):(console.error("❌ Invalid nearby response format:",Fe.data),Pe())}catch(Ae){console.error("❌ Failed to fetch nearby services:",Ae),Pe()}};p.useEffect(()=>{(async()=>{const re=localStorage.getItem("token");try{if(!re){const Ce=await je.get("/api/product/all");j(Ce.data||[]);return}const Ae=(await je.get("/api/user/currentuser",{headers:{Authorization:`Bearer ${re}`}})).data;if(v(!0),E(Ae.role),Ae.role==="customer")"geolocation"in navigator?navigator.geolocation.getCurrentPosition(Ce=>{const Fe=Ce.coords.latitude,Pt=Ce.coords.longitude;Le(Fe,Pt,re)},Ce=>{console.warn("❌ Location error:",Ce),Pe()}):Pe();else{const Ce=await je.get("/api/product/all");j(Ce.data||[])}}catch(pe){console.error("❌ Error fetching user or services:",pe),v(!1),Pe()}})()},[]);const ce=y.filter(q=>{var vt;const re=(q.title||q.name||q.serviceName||"").toLowerCase(),pe=(((vt=q.washerman)==null?void 0:vt.name)||q.washermanName||q.laundryman||"").toLowerCase(),Ae=(q.category||"").toLowerCase(),Ce=u.trim().toLowerCase(),Fe=o==="all"||Ae===o.toLowerCase(),Pt=Ce===""||re.includes(Ce)||pe.includes(Ce);return Fe&&Pt}),B=(q,re,pe)=>{ee(q,re,pe)},Y=()=>{if(le.length>0){if(N&&!A){alert("Please set your delivery location before proceeding to booking. Location is required for delivery."),F(!0),oe(!0);return}a("booking");const q=Ri(f);S(q),x(null)}},me=()=>{F(!0),oe(!0)},Oe=()=>{a("services");const q=Ri(f);S(q),x(null)},de=()=>{a("services"),ae(),x(null);const q=Ri(f);S(q),s("/payment",{state:{cartItems:le,selectedDate:f,selectedTimeSlot:b}})},we=q=>s(q),mt=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(di,{searchQuery:u,onSearchChange:h,cartItemCount:st(),onCartClick:Y,onContactClick:()=>we("/contact"),onAboutClick:()=>we("/about"),onOrdersClick:()=>we("/orders"),onHomeClick:()=>we("/mainapp"),onSignInClick:()=>we("/signin"),onSignUpClick:()=>we("/signup"),onProfileClick:()=>we("/CustomerDashboard")}),N&&e.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"📍"}),A?e.jsxs("span",{className:"text-sm text-blue-800",children:["Delivering to: ",A.address]}):e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Location required for delivery"})]}),e.jsx("button",{onClick:me,className:`text-sm font-medium transition-colors ${A?"text-blue-600 hover:text-blue-700":"text-red-600 hover:text-red-700 bg-red-100 px-3 py-1 rounded-lg"}`,children:A?"Change Location":"Add Location"})]})}),e.jsx("div",{children:e.jsx(Nx,{})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsx(Tm,{categories:Cx,selectedCategory:o,onCategoryChange:c}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 mb-8",children:ce.map(q=>e.jsx(Xu,{service:q,onAddToCart:B},q._id))}),ce.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No services found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]}),le.length>0&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-blue-600 text-white p-3 md:p-4 shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-sm md:text-base",children:[st()," items selected"]}),e.jsx("button",{onClick:Y,className:"bg-white text-blue-600 px-4 md:px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-sm md:text-base",children:"Proceed to Order"})]})})]})]}),Z=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(di,{searchQuery:u,onSearchChange:h,cartItemCount:st(),onCartClick:()=>{},onContactClick:()=>we("/contact"),onAboutClick:()=>we("/about"),onOrdersClick:()=>we("/orders"),onHomeClick:()=>we("/mainapp"),onSignInClick:()=>we("/signin"),onSignUpClick:()=>we("/signup"),onProfileClick:()=>we("/CustomerDashboard")}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8",children:[e.jsxs("button",{onClick:Oe,className:"mb-6 flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"font-medium",children:"Back to Products"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Lm,{timeSlots:_,selectedDate:f,selectedTimeSlot:b,onDateChange:g,onTimeSlotSelect:x})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Am,{cartItems:le,selectedDate:f,selectedTimeSlot:b,onCompleteOrder:de,onRemoveFromCart:he,onUpdateQuantity:X})})]})]})]});return e.jsxs(e.Fragment,{children:[i==="services"?mt():Z(),N&&z&&e.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-0 md:p-4",children:e.jsxs("div",{className:"bg-white w-full h-[100vh] md:h-auto md:max-w-3xl md:rounded-lg shadow-xl p-0 md:p-4 overflow-y-auto max-h-[100vh]",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 md:p-0 md:mb-2 border-b md:border-0 bg-white",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Delivery Location"}),e.jsx("button",{onClick:()=>{A&&localStorage.setItem("customerLocation",JSON.stringify(A)),F(!1),oe(!0)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsx("div",{className:"px-4 pb-4 md:p-0",children:e.jsx(Sx,{onServicesFound:q=>{j(Array.isArray(q)?q:[]),U(!0)},onNoServices:()=>{U(!0)},onLocationSet:q=>{H(q),localStorage.setItem("customerLocation",JSON.stringify(q))},startInMap:!0})})]})})]})}function Px(){const[s,i]=p.useState([]),[a,o]=p.useState("list");p.useEffect(()=>{(async()=>{try{const g=localStorage.getItem("token"),x=await(await lt("/api/product/all",{headers:{Authorization:`Bearer ${g}`}})).json();i(x)}catch(g){console.error("Failed to fetch services:",g)}})()},[]);const c=async f=>{try{const g=localStorage.getItem("token"),x=await(await lt("/api/product",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify(f)})).json();i(_=>[x,..._]),o("list")}catch(g){console.error("Add service failed:",g)}},u=(f,g)=>{i(b=>b.map(x=>x._id===f?{...x,...g,updatedAt:new Date().toISOString()}:x))},h=f=>{i(g=>g.filter(b=>b._id!==f))};return e.jsx("div",{className:"App",children:a==="form"?e.jsx(xx,{onSubmit:c,onBack:()=>o("list")}):e.jsx(yx,{services:s,onEdit:u,onDelete:h,onAddNew:()=>o("form")})})}function Lx(){const[s,i]=p.useState(!1);return p.useEffect(()=>{(async()=>{const o=localStorage.getItem("token");if(o)try{const u=(await je.get("/api/user/currentuser",{headers:{Authorization:`Bearer ${o}`}})).data;i(u.role==="admin")}catch(c){console.error("Error checking admin status:",c)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(kx,{isAdmin:s}),e.jsxs(Ud,{children:[e.jsx(ut,{path:"/",element:e.jsx(sl,{})}),e.jsx(ut,{path:"/mainapp",element:e.jsx(sl,{})}),e.jsx(ut,{path:"/contact",element:e.jsx(Dm,{})}),e.jsx(ut,{path:"/about",element:e.jsx($m,{})}),e.jsx(ut,{path:"/orders",element:e.jsx(Vm,{})}),e.jsx(ut,{path:"/signin",element:e.jsx(Rg,{})}),e.jsx(ut,{path:"/signup",element:e.jsx(Fg,{})}),e.jsx(ut,{path:"/LaundrymanDashboard",element:e.jsx(dx,{})}),e.jsx(ut,{path:"/CustomerDashboard",element:e.jsx(fx,{})}),e.jsx(ut,{path:"/adminservices",element:e.jsx(Px,{})}),e.jsx(ut,{path:"/adminDashboard",element:e.jsx(px,{})}),e.jsx(ut,{path:"/payment",element:e.jsx(zg,{})}),e.jsx(ut,{path:"/SlotTemplateManager",element:e.jsx(wx,{})}),e.jsx(ut,{path:"/WashermanSlotToggle",element:e.jsx(jx,{})}),e.jsx(ut,{path:"/SlotTemplateManagers",element:e.jsx(Wc,{})}),e.jsx(ut,{path:"/location-test",element:e.jsx(ox,{})}),e.jsx(ut,{path:"/location-debug",element:e.jsx(lx,{})}),e.jsx(ut,{path:"/nearby-washermen",element:e.jsx(rx,{})}),e.jsx(ut,{path:"/reset-password/:token",element:e.jsx(_x,{})}),e.jsx(ut,{path:"/AdminMessages",element:e.jsx(Vc,{})})]})]})}function Ax(s={}){const{immediate:i=!1,onNeedRefresh:a,onOfflineReady:o,onRegistered:c,onRegisteredSW:u,onRegisterError:h}=s;let f,g;const b=async(_=!0)=>{await g};async function x(){if("serviceWorker"in navigator){if(f=await hi(async()=>{const{Workbox:_}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:_}},[]).then(({Workbox:_})=>new _("/sw.js",{scope:"/",type:"classic"})).catch(_=>{h==null||h(_)}),!f)return;f.addEventListener("activated",_=>{(_.isUpdate||_.isExternal)&&window.location.reload()}),f.addEventListener("installed",_=>{_.isUpdate||o==null||o()}),f.register({immediate:i}).then(_=>{u?u("/sw.js",_):c==null||c(_)}).catch(_=>{h==null||h(_)})}}return g=x(),b}Ax({immediate:!0});Yd.createRoot(document.getElementById("root")).render(e.jsx(qi.StrictMode,{children:e.jsx(qd,{children:e.jsx(Lx,{})})}));export{Rn as C,Co as T,fi as W,pu as a,qa as b,ye as c,e as j};
